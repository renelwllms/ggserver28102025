import{r as u,K as y,j as c,S as h,ag as p,M as d}from"./index.5c46b2c4.js";import{a as b}from"./updateForm.4b0dcb38.js";function x({allCourseisibility:t,setAllCourseVisible:e,studentData:r,getList:s}){const[o,i]=u.exports.useState(!1),n=y(l=>l.token);u.exports.useEffect(()=>{},[n,r]);const a=()=>{e(!1)};return c(h,{loading:o,block:!0,children:c(p,{title:"Student All Courses",visible:t,footer:null,onCancel:a,autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"70%"},children:c(b,{onCancel:a,student:r})})})}const m=t=>{var s,o,i,n,a;if(!t.response)return t.message==="Network Error"?{message:"Network connection failed",details:"Please check your internet connection and try again.",retryable:!0}:t.code==="ECONNABORTED"?{message:"Request timeout",details:"The server is taking too long to respond. Please try again.",retryable:!0}:{message:"Connection error",details:"Unable to connect to the server. Please try again later.",retryable:!0};const e=(s=t.response)==null?void 0:s.status,r=((i=(o=t.response)==null?void 0:o.data)==null?void 0:i.message)||((a=(n=t.response)==null?void 0:n.data)==null?void 0:a.error);switch(e){case 400:return{message:"Invalid request",details:r||"The request contains invalid data. Please check your input.",retryable:!1,statusCode:e};case 401:return{message:"Authentication required",details:"Your session has expired. Please log in again.",retryable:!1,statusCode:e};case 403:return{message:"Access denied",details:"You do not have permission to perform this action.",retryable:!1,statusCode:e};case 404:return{message:"Not found",details:r||"The requested resource was not found.",retryable:!1,statusCode:e};case 409:return{message:"Conflict",details:r||"This operation conflicts with existing data.",retryable:!1,statusCode:e};case 422:return{message:"Validation error",details:r||"The data provided failed validation.",retryable:!1,statusCode:e};case 429:return{message:"Too many requests",details:"You have made too many requests. Please wait a moment and try again.",retryable:!0,statusCode:e};case 500:return{message:"Server error",details:"An internal server error occurred. Please try again later.",retryable:!0,statusCode:e};case 502:case 503:return{message:"Service unavailable",details:"The server is temporarily unavailable. Please try again in a few moments.",retryable:!0,statusCode:e};case 504:return{message:"Gateway timeout",details:"The server took too long to respond. Please try again.",retryable:!0,statusCode:e};default:return{message:"An error occurred",details:r||`An unexpected error occurred (Error ${e}).`,retryable:!0,statusCode:e}}},A=(t,e)=>{const r=m(t),s=e||r.message,o=r.details?`${s}: ${r.details}`:s;return d.error({content:o,duration:5e3}),r},P=async(t,e={})=>{const{maxRetries:r=3,initialDelay:s=1e3,maxDelay:o=1e4,onRetry:i}=e;let n;for(let a=0;a<=r;a++)try{return await t()}catch(l){if(n=l,!m(l).retryable)throw l;if(a===r)break;const f=Math.min(s*Math.pow(2,a),o);i&&i(a+1,l),await new Promise(g=>setTimeout(g,f))}throw n},T=(t,e)=>{d.info({content:`Request failed. Retrying (${t}/${e})...`,duration:2e3})};export{x as A,A as a,P as r,T as s};
