import{a as e,F as i,j as d,m as u,l as $,B as m,s as Ie,t as Ee,G as X,v as ee,E as Le,r as o,h as v,S as A,D as Te,w as he,g as M,x as pe,y as me,z as fe,M as D,A as we}from"./index.dbab94e8.js";import{T as te}from"./index.027a4f8b.js";import{C as le}from"./index.40af5fda.js";import{I as ve,M as Q,D as Ce}from"./index.b2408667.js";import{R as Se,P as V}from"./index.1602af59.js";import{h as be}from"./moment.0f22a298.js";import{L as xe,s as W}from"./index.0f78e0ca.js";const Oe="_toolbar_1e6zf_1",Ae="_operations_1e6zf_6";var ye={toolbar:Oe,operations:Ae,"content-type":"_content-type_1e6zf_9","search-form-wrapper":"_search-form-wrapper_1e6zf_16","right-button":"_right-button_1e6zf_21","button-group":"_button-group_1e6zf_30","search-form":"_search-form_1e6zf_16"};const{Row:De,Col:Je}=X,{useForm:Fe}=i;function Re(b){const[h]=Fe(),C=()=>{const f=h.getFieldsValue();b.onSearch(f)},p=()=>{h.resetFields(),b.onSearch({School:void 0,name:void 0})},S=()=>{window.open("https://forms.office.com/r/Uy4i31KrM1")};return e("div",{children:e(i,{form:h,className:ye["search-form"],labelAlign:"left",layout:"inline",style:{display:"inline-block",marginBottom:"10px"},children:d(De,{children:[e(i.Item,{label:"Learner Name",field:"name",children:e(u,{allowClear:!0,placeholder:"Please enter the Learner Name"})}),e(i.Item,{label:"School Name",field:"School",children:e(u,{allowClear:!0,placeholder:"Please enter the School Name"})}),d($,{children:[e(m,{type:"primary",icon:e(Ie,{}),onClick:C,children:"Search"}),e(m,{icon:e(ve,{}),onClick:p,children:"Reset"})]}),e("div",{style:{position:"absolute",right:"20px",display:"inline-block"},children:e(m,{type:"primary",icon:e(Ee,{}),onClick:S,children:"register"})})]})})})}const ze=te.TabPane,ge={WorklifeCourses:"WORK & LIFE SKILLS COURSES",HospitalityCourses:"HOSPITALITY COURSES",FarmingUnits:"FARMING AND PRIMARY INDUSTRIES"};function Pe({rowData:b}){return e("div",{style:{height:400,width:"100%",overflow:"auto"},children:(()=>{const C=Object.keys(ge).map(p=>{if(!b[p])return null;let S=[];try{S=JSON.parse(b[p])||[]}catch{}return e(ze,{title:ge[p],children:e(xe,{size:"small",header:"",dataSource:S,render:(f,L)=>e(xe.Item,{children:f},L)})},p)});return C!=null&&C.every(p=>p===null)?e(ee,{children:e(Le,{})}):e(te,{type:"rounded",children:C})})()})}const We=X.Row,ke=X.Col;function $e({handleSubmit:b,loading:h,form:C,handleCancel:p=null}){const S=()=>{C.resetFields()};o.exports.useEffect(()=>{k()},[]);const[f,L]=o.exports.useState([]),[_,y]=o.exports.useState([]),k=()=>{v.getCourse({}).then(c=>{y((c==null?void 0:c.data)||[])}),v.getSchool({}).then(c=>{L((c==null?void 0:c.data)||[])})};return d(i,{form:C,className:ye["search-form"],labelAlign:"left",wrapperCol:{span:24},onSubmit:b,children:[e("div",{style:{width:"100%"},children:d(We,{gutter:24,children:[d(ke,{span:11,children:[e(i.Item,{label:"Learner First Name",field:"FirstName",rules:[{required:!0,message:"required"}],children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Learner Last Name",field:"LastName",rules:[{required:!0,message:"required"}],children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"School Name",field:"School",rules:[{required:!0,message:"required"}],children:e(A,{showSearch:!0,allowClear:!0,options:f.map(c=>({label:c.SchoolName,value:c.SchoolName})),allowCreate:{formatter:c=>({value:c,label:c})},filterOption:(c,T)=>{var I,N,O;return((N=(I=T.props.value)==null?void 0:I.label)==null?void 0:N.toLowerCase().indexOf(c.toLowerCase()))>=0||((O=T.props)==null?void 0:O.children.toLowerCase().indexOf(c.toLowerCase()))>=0},placeholder:"please select (If the option does not exist, you can enter it manually)"})}),e(i.Item,{label:"Date of Birth",field:"DateOfBirth",rules:[{required:!0,message:"required"}],children:e(Te,{style:{width:"100%"}})}),e(i.Item,{label:"Gender",field:"Gender",rules:[{required:!0,message:"required"}],children:e(A,{allowClear:!0,options:["Male","Female","Other"],placeholder:"please enter"})}),e(i.Item,{label:"Ethnicity",field:"Ethnicity",rules:[{required:!0,message:"required"}],children:e(A,{allowClear:!0,allowCreate:!0,showSearch:!0,options:["Australian","British","Cambodian","Chinese","Chinese","Cook Island","Dutch","Fijian","German","Indian","Italian","Japanese","Korean","American","NZ European","Maori","Polish","Samoan","Tongan"],placeholder:"please select (If the option does not exist, you can enter it manually)"})}),e(i.Item,{label:"Email",field:"Email",rules:[{required:!0,message:"required"}],children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Learner Status",field:"Status",children:e(A,{allowClear:!0,options:["Achieved","Withdraws","Did Not Complete","Other"],placeholder:"please enter"})}),e(i.Item,{label:"Fees",field:"Fees",children:e(A,{allowClear:!0,options:["Paid","Parially Paid","Un Paid"],placeholder:"please enter"})})]}),d(ke,{span:11,offset:1,children:[e(i.Item,{label:"Farming Course",field:"FarmingUnits",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Hospitality Course",field:"HospitalityCourses",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Worklife Course",field:"WorklifeCourses",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Workbook Option",field:"WorkbookOption",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Teacher Email",field:"TeacherEmail",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Street Address",field:"StreetAddress",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"City",field:"City",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Region",field:"Region",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Zipcode",field:"Zipcode",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Additional Info",field:"AdditionalInfo",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Invoice Email",field:"InvoiceEmail",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Tutor",field:"Tutor",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),e(i.Item,{label:"Phone Number",field:"PhoneNumber",children:e(u,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})})]})]})}),e(i.Item,{style:{textAlign:"center"},children:d($,{children:[e(m,{loading:h,type:"primary",htmlType:"submit",children:"Submit"}),p?e(m,{onClick:p,children:"Cancel"}):e(m,{onClick:S,children:"Reset"})]})})]})}function _e(){he();const[b,h]=o.exports.useState(!1),[C,p]=o.exports.useState([]),S=M(t=>t.token),f=M(t=>t.isAdmin),[L,_]=o.exports.useState({}),[y,k]=o.exports.useState({total:0,pageSize:10,current:1}),[c,T]=o.exports.useState(!1),[I,N]=o.exports.useState({}),[O,P]=o.exports.useState(""),[F,G]=o.exports.useState({}),[w]=pe(),[B,q]=o.exports.useState([]),[R,Y]=o.exports.useState([]),[K,E]=o.exports.useState(!1),[U,z]=o.exports.useState(!1),[n,r]=o.exports.useState([]),[x,ae]=o.exports.useState(1);o.exports.useEffect(()=>{r([{title:"Learner Name",key:"StudentName",dataIndex:"StudentName",width:160,render:(l,a)=>`${a.FirstName||""} ${a.LastName||""}`},{title:"DOB",dataIndex:"DateOfBirth",key:"DateOfBirth",width:120,ellipsis:!0,render:l=>be(l).format("YYYY-MM-DD")},{title:"Gender",dataIndex:"Gender",key:"Gender",width:85},{title:"Ethnicity",dataIndex:"Ethnicity",key:"Ethnicity",ellipsis:!0,width:100},{title:"Email",dataIndex:"Email",key:"Email",ellipsis:!0,width:120},{title:"School",dataIndex:"School",key:"School",ellipsis:!0,width:160},{title:"Learner Status",dataIndex:"Status",key:"Status",width:90,ellipsis:!0,render:l=>e("span",{style:{fontSize:"12px"},children:l})},{title:"Fees",dataIndex:"Fees",key:"Fees",width:90,ellipsis:!0,render:l=>e("span",{style:{fontSize:"12px"},children:l})},...f?[{title:"Operation",dataIndex:"operation",key:"operation",width:150,render:(l,a)=>d($,{children:[e(m,{type:"primary",size:"mini",onClick:s=>{s.stopPropagation(),N(a),w.setFieldsValue({...a,SchoolName:a.SchoolNumber?a.SchoolNumber:a.SchoolName}),E(!0)},children:"Edit"}),e("div",{onClick:s=>{s.stopPropagation()},children:e(V,{focusLock:!0,title:"Confirm",content:"Are you sure you want to delete?",onOk:()=>{se(a.EnrollmentID)},children:e(m,{type:"primary",status:"danger",size:"mini",children:"Delete"})})})]})}]:[]]),ae(x+1)},[f]),o.exports.useEffect(()=>{S&&g()},[S]);const oe=t=>{W.setStudentTutor(t).then(l=>{D.success(l==null?void 0:l.data),g()})},ne=t=>{W.setStudentCourse(t).then(l=>{D.success(l==null?void 0:l.data),g()})},g=(t={})=>{h(!0),W.getStudentList({...y,...L,...t,total:void 0}).then(l=>{p((l==null?void 0:l.data)||[]),k({...y,...l==null?void 0:l.pagination})}).finally(()=>{h(!1)})},re=t=>{const{current:l,pageSize:a}=t;k({...t,current:l,pageSize:a}),g({current:l,pageSize:a})};function ie(t){k({...y,current:1}),_(t),g({current:1,...t})}const se=t=>{v.deleteStudentInfo({EnrollmentID:t}).then(l=>{l!=null&&l.data&&(D.success("success"),g())})},de=t=>{var l,a;z(!0),v.postStudentInfo({EnrollmentID:I.EnrollmentID,...t,CourseID:(l=t==null?void 0:t.CourseID)==null?void 0:l.value,CourseName:(a=t==null?void 0:t.CourseID)==null?void 0:a.label}).then(s=>{s!=null&&s.data&&(E(!1),D.success("success"),w.resetFields(),g())}).finally(()=>{z(!1)})},ce=t=>{const l=[{label:"Farming Course:",value:t.FarmingUnits},{label:"Hospitality Course:",value:t.HospitalityCourses},{label:"Worklife Course:",value:t.WorklifeCourses},{label:"Tutor:",value:t.Tutor},{label:"Phone Number:",value:t.PhoneNumber},{label:"Workbook Option:",value:t.WorkbookOption},{label:"Address:",value:!t.StreetAddress&&!t.StreetAddress&&!t.StreetAddress?"-":`${t.StreetAddress||""}, ${t.City||""}, ${t.Region||""}`},{label:"Zipcode:",value:t.Zipcode},{label:"Teacher Name:",value:t.TeacherName},{label:"Teacher Email:",value:t.TeacherEmail},{label:"Invoice Email:",value:t.InvoiceEmail},{label:"Additional Info:",value:t.AdditionalInfo}];return d(ee,{children:[e(Ce,{layout:"inline-horizontal",border:!0,column:{xs:1,sm:2,md:2,lg:2,xl:3,xxl:4},data:l}),d($,{children:[e(m,{type:"primary",size:"mini",onClick:a=>{a.stopPropagation(),N(t),T(!0)},children:"Courses filled in on the forms"}),f&&e("div",{onClick:a=>{a.stopPropagation()},children:e(V,{focusLock:!0,icon:null,title:d("div",{style:{width:"300px"},children:[e("p",{children:" Assign Course"}),e(A,{allowCreate:!0,labelInValue:!0,showSearch:!0,allowClear:!0,options:B.map(a=>({label:a.CourseName,value:a.CourseID})),filterOption:(a,s)=>{var H,Z,j;return((Z=(H=s.props.value)==null?void 0:H.label)==null?void 0:Z.toLowerCase().indexOf(a.toLowerCase()))>=0||((j=s.props)==null?void 0:j.children.toLowerCase().indexOf(a.toLowerCase()))>=0},placeholder:"please enter",onChange:a=>{G(a)}})]}),okText:"ok",cancelText:"cancel",onVisibleChange:a=>{a&&v.getCourse({}).then(s=>{q((s==null?void 0:s.data)||[])})},onOk:()=>{ne({id:t.EnrollmentID,CourseName:F.label,CourseID:F.value})},children:e(m,{type:"primary",size:"mini",children:"Assign Course"})})}),f&&e("div",{onClick:a=>{a.stopPropagation()},children:e(V,{focusLock:!0,icon:null,title:d("div",{style:{width:"200px"},children:[e("p",{children:"Assign to a tutor"}),e(A,{defaultValue:t.Tutor||void 0,showSearch:!0,options:R,placeholder:"please enter",onChange:a=>{P(a)}})]}),okText:"ok",cancelText:"cancel",onVisibleChange:a=>{a&&(v.getTutor({}).then(s=>{Y((s==null?void 0:s.data)||[])}),P(t.Tutor))},onOk:()=>{oe({id:t.EnrollmentID,tutor:O})},children:e(m,{type:"primary",size:"mini",children:"Assign to a tutor"})})})]})]})},J=()=>{E(!1),w.resetFields()};return d(le,{children:[e(Re,{onSearch:ie}),e(Se,{columns:n,rowKey:"EnrollmentID",expandedRowRender:ce,expandProps:{icon:({expanded:t,record:l,...a})=>t?e("button",{...a,children:e(me,{})}):e("button",{...a,children:e(fe,{})}),expandRowByClick:!0},data:C,loading:b,scroll:{x:1e3},border:{wrapper:!0,cell:!0},pagination:{...y,size:"mini",bufferSize:3,sizeCanChange:!0,showTotal:!0,showJumper:!0,pageSizeChangeResetCurrent:!0},onChange:re},x),e(Q,{title:"Courses filled in on the forms",visible:c,footer:e("div",{style:{textAlign:"center"},children:e(m,{type:"primary",onClick:()=>T(!1),children:"ok"})}),onCancel:()=>T(!1),autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"800px"},children:e(Pe,{rowData:I})}),e(Q,{title:"Edit Remote Learner",visible:K,footer:null,onCancel:()=>{E(!1),w.resetFields()},autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"70%"},children:e($e,{form:w,handleSubmit:de,handleCancel:J,loading:U})})]})}const{Row:Be,Col:Qe}=X,{useForm:Ve}=i;function Ne(b){const[h]=Ve(),C=()=>{const S=h.getFieldsValue();b.onSearch(S)},p=()=>{h.resetFields(),b.onSearch({School:void 0,name:void 0})};return e("div",{children:e(i,{form:h,className:ye["search-form"],labelAlign:"left",layout:"inline",style:{display:"inline-block",marginBottom:"10px"},children:d(Be,{children:[e(i.Item,{label:"Learner Name",field:"name",children:e(u,{allowClear:!0,placeholder:"Please enter the Learner Name"})}),e(i.Item,{label:"School Name",field:"School",children:e(u,{allowClear:!0,placeholder:"Please enter the School Name"})}),d($,{children:[e(m,{type:"primary",icon:e(Ie,{}),onClick:C,children:"Search"}),e(m,{icon:e(ve,{}),onClick:p,children:"Reset"})]})]})})})}function Me(){he();const[b,h]=o.exports.useState(!1),[C,p]=o.exports.useState([]),S=M(t=>t.token),f=M(t=>t.isAdmin),[L,_]=o.exports.useState({}),[y,k]=o.exports.useState({total:0,pageSize:10,current:1}),[c,T]=o.exports.useState(!1),[I,N]=o.exports.useState({}),[O,P]=o.exports.useState(""),[F,G]=o.exports.useState({}),[w]=pe(),[B,q]=o.exports.useState([]),[R,Y]=o.exports.useState([]),[K,E]=o.exports.useState(!1),[U,z]=o.exports.useState(!1),[n,r]=o.exports.useState([]),[x,ae]=o.exports.useState(1);o.exports.useEffect(()=>{r([{title:"Learner Name",key:"StudentName",dataIndex:"StudentName",width:150,render:(l,a)=>`${a.FirstName||""} ${a.LastName||""}`},{title:"DOB",dataIndex:"DateOfBirth",key:"DateOfBirth",width:110,ellipsis:!0,render:l=>be(l).format("YYYY-MM-DD")},{title:"Gender",dataIndex:"Gender",key:"Gender",width:80},{title:"Ethnicity",dataIndex:"Ethnicity",key:"Ethnicity",ellipsis:!0,width:120},{title:"Email",dataIndex:"Email",key:"Email",ellipsis:!0,width:150},{title:"School Name",dataIndex:"SchoolName",key:"SchoolName",ellipsis:!0,width:150},{title:"Workshop Code",dataIndex:"Code",key:"Code",ellipsis:!0,width:150},{title:"Learner Status",dataIndex:"Status",key:"Status",width:90,ellipsis:!0,render:l=>e("span",{style:{fontSize:"12px"},children:l})},{title:"Fees",dataIndex:"Fees",key:"Fees",width:90,ellipsis:!0,render:l=>e("span",{style:{fontSize:"12px"},children:l})},...f?[{title:"Operation",dataIndex:"operation",key:"operation",render:(l,a)=>d($,{children:[e(m,{type:"primary",size:"mini",onClick:s=>{s.stopPropagation(),N(a),w.setFieldsValue({...a,SchoolName:a.SchoolNumber?a.SchoolNumber:a.SchoolName}),E(!0)},children:"Edit"}),e(V,{focusLock:!0,title:"Confirm",content:"Are you sure you want to delete?",onOk:()=>{ie(a.WorkshopResultID)},children:e(m,{type:"primary",status:"danger",size:"mini",children:"Delete"})})]}),width:150}]:[]]),ae(x+1)},[f]),o.exports.useEffect(()=>{S&&g()},[S]);const oe=t=>{W.setStudentTutor(t).then(l=>{D.success(l==null?void 0:l.data),g()})},ne=t=>{W.setStudentCourse(t).then(l=>{D.success(l==null?void 0:l.data),g()})},g=(t={})=>{h(!0),W.getWorkshopStudent({...y,...L,...t,total:void 0}).then(l=>{p((l==null?void 0:l.data)||[]),k({...y,...l==null?void 0:l.pagination})}).finally(()=>{h(!1)})},re=t=>{z(!0);let{SchoolName:l}=t;typeof l=="number"?l={label:I.SchoolName,value:t==null?void 0:t.SchoolName}:typeof(l==null?void 0:l.value)=="string"&&(l={label:l.value,value:0}),v.postWorkshopInfo({WorkshopResultID:I.WorkshopResultID,...t,SchoolName:l==null?void 0:l.label,SchoolNumber:l==null?void 0:l.value}).then(a=>{a!=null&&a.data&&(E(!1),D.success("success"),w.resetFields(),g())}).finally(()=>{z(!1)})},ie=t=>{v.deleteWorkshopInfo({WorkshopResultID:t}).then(l=>{l!=null&&l.data&&(D.success("success"),g())})},se=t=>{const{current:l,pageSize:a}=t;k({...t,current:l,pageSize:a}),g({current:l,pageSize:a})};function de(t){k({...y,current:1}),_(t),g({current:1,...t})}const ce=t=>{const l=[{label:"Current Course:",value:t.CourseName},{label:"Tutor:",value:t.Tutor},{label:"PhoneNumber:",value:t.PhoneNumber},{label:"WorkbookOption:",value:t.WorkbookOption},{label:"Address:",value:!t.StreetAddress&&!t.StreetAddress&&!t.StreetAddress?"-":`${t.StreetAddress||""}, ${t.City||""}, ${t.Region||""}`},{label:"Zipcode:",value:t.Zipcode},{label:"TeacherName:",value:t.TeacherName},{label:"TeacherEmail:",value:t.TeacherEmail},{label:"InvoiceEmail:",value:t.InvoiceEmail},{label:"AdditionalInfo:",value:t.AdditionalInfo}];return d(ee,{children:[e(Ce,{layout:"inline-horizontal",border:!0,column:{xs:1,sm:2,md:2,lg:2,xl:3,xxl:4},data:l}),d($,{children:[e(m,{type:"primary",size:"mini",onClick:a=>{a.stopPropagation(),N(t),T(!0)},children:"Courses filled in on the forms"}),f&&e("div",{onClick:a=>{a.stopPropagation()},children:e(V,{focusLock:!0,icon:null,title:d("div",{style:{width:"300px"},children:[e("p",{children:" Assign Course"}),e(A,{allowCreate:!0,labelInValue:!0,showSearch:!0,allowClear:!0,options:B.map(a=>({label:a.CourseName,value:a.CourseID})),filterOption:(a,s)=>{var H,Z,j;return((Z=(H=s.props.value)==null?void 0:H.label)==null?void 0:Z.toLowerCase().indexOf(a.toLowerCase()))>=0||((j=s.props)==null?void 0:j.children.toLowerCase().indexOf(a.toLowerCase()))>=0},placeholder:"please enter",onChange:a=>{G(a)}})]}),okText:"ok",cancelText:"cancel",onVisibleChange:a=>{a&&v.getCourse({}).then(s=>{q((s==null?void 0:s.data)||[])})},onOk:()=>{ne({id:t.EnrollmentID,CourseName:F.label,CourseID:F.value})},children:e(m,{type:"primary",size:"mini",children:"Assign Course"})})}),f&&e("div",{onClick:a=>{a.stopPropagation()},children:e(V,{focusLock:!0,icon:null,title:d("div",{style:{width:"200px"},children:[e("p",{children:"Assign to a tutor"}),e(A,{defaultValue:t.Tutor||void 0,showSearch:!0,options:R,placeholder:"please enter",onChange:a=>{P(a)}})]}),okText:"ok",cancelText:"cancel",onVisibleChange:a=>{a&&(v.getTutor({}).then(s=>{Y((s==null?void 0:s.data)||[])}),P(t.Tutor))},onOk:()=>{oe({id:t.EnrollmentID,tutor:O})},children:e(m,{type:"primary",size:"mini",children:"Assign to a tutor"})})})]})]})},J=()=>{E(!1),w.resetFields()};return d(le,{children:[e(Ne,{onSearch:de}),e(Se,{columns:n,rowKey:"WorkshopResultID",expandedRowRender:ce,expandProps:{icon:({expanded:t,record:l,...a})=>t?e("button",{...a,children:e(me,{})}):e("button",{...a,children:e(fe,{})}),expandRowByClick:!0},data:C,loading:b,scroll:{x:1e3},border:{wrapper:!0,cell:!0},pagination:{...y,size:"mini",bufferSize:3,sizeCanChange:!0,showTotal:!0,showJumper:!0,pageSizeChangeResetCurrent:!0},onChange:se},x),e(Q,{title:"Edit Workshop Learner",visible:K,footer:null,onCancel:J,autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"600px"},children:e(we,{isEdit:!0,form:w,handleSubmit:re,handleCancel:J,loading:U})})]})}function Ge(){he();const[b,h]=o.exports.useState(!1),[C,p]=o.exports.useState([]),S=M(n=>n.token),f=M(n=>n.isAdmin),[L,_]=o.exports.useState({}),[y,k]=o.exports.useState({total:0,pageSize:10,current:1});o.exports.useState(!1);const[c,T]=o.exports.useState({});o.exports.useState(""),o.exports.useState({});const[I]=pe();o.exports.useState([]),o.exports.useState([]);const[N,O]=o.exports.useState(!1),[P,F]=o.exports.useState(!1),[G,w]=o.exports.useState([]),[B,q]=o.exports.useState(1);o.exports.useEffect(()=>{w([{title:"Learner Name",key:"StudentName",dataIndex:"StudentName",width:150,render:(n,r)=>`${r.FirstName||""} ${r.LastName||""}`},{title:"DOB",dataIndex:"DateOfBirth",key:"DateOfBirth",width:110,ellipsis:!0,render:n=>be(n).format("YYYY-MM-DD")},{title:"Gender",dataIndex:"Gender",key:"Gender",width:80},{title:"Ethnicity",dataIndex:"Ethnicity",key:"Ethnicity",ellipsis:!0,width:120},{title:"Email",dataIndex:"Email",key:"Email",ellipsis:!0,width:150},{title:"School Name",dataIndex:"SchoolName",key:"SchoolName",ellipsis:!0,width:150},{title:"Workshop Code",dataIndex:"Code",key:"Code",ellipsis:!0,width:150},{title:"Learner Status",dataIndex:"Status",key:"Status",width:90,ellipsis:!0,render:n=>e("span",{style:{fontSize:"12px"},children:n})},{title:"Fees",dataIndex:"Fees",key:"Fees",width:90,ellipsis:!0,render:n=>e("span",{style:{fontSize:"12px"},children:n})}]),q(B+1)},[f]),o.exports.useEffect(()=>{S&&R()},[S]);const R=(n={})=>{h(!0),W.getAllStudent({...y,...L,...n,total:void 0}).then(r=>{p((r==null?void 0:r.data)||[]),k({...y,...r==null?void 0:r.pagination})}).finally(()=>{h(!1)})},Y=n=>{F(!0);let{SchoolName:r}=n;typeof r=="number"?r={label:c.SchoolName,value:n==null?void 0:n.SchoolName}:typeof(r==null?void 0:r.value)=="string"&&(r={label:r.value,value:0}),v.postWorkshopInfo({WorkshopResultID:c.WorkshopResultID,...n,SchoolName:r==null?void 0:r.label,SchoolNumber:r==null?void 0:r.value}).then(x=>{x!=null&&x.data&&(O(!1),D.success("success"),I.resetFields(),R())}).finally(()=>{F(!1)})},K=n=>{const{current:r,pageSize:x}=n;k({...n,current:r,pageSize:x}),R({current:r,pageSize:x})};function E(n){k({...y,current:1}),_(n),R({current:1,...n})}const U=n=>{const r=[{label:"Farming Course:",value:n.FarmingUnits},{label:"Hospitality Course:",value:n.HospitalityCourses},{label:"Worklife Course:",value:n.WorklifeCourses},{label:"Tutor:",value:n.Tutor},{label:"PhoneNumber:",value:n.PhoneNumber},{label:"WorkbookOption:",value:n.WorkbookOption},{label:"Address:",value:!n.StreetAddress&&!n.StreetAddress&&!n.StreetAddress?"-":`${n.StreetAddress||""}, ${n.City||""}, ${n.Region||""}`},{label:"Zipcode:",value:n.Zipcode},{label:"TeacherName:",value:n.TeacherName},{label:"TeacherEmail:",value:n.TeacherEmail},{label:"InvoiceEmail:",value:n.InvoiceEmail},{label:"AdditionalInfo:",value:n.AdditionalInfo}];return e(ee,{children:e(Ce,{layout:"inline-horizontal",border:!0,column:{xs:1,sm:2,md:2,lg:2,xl:3,xxl:4},data:r})})},z=()=>{O(!1),I.resetFields()};return d(le,{children:[e(Ne,{onSearch:E}),e(Se,{columns:G,rowKey:"ID",expandedRowRender:U,expandProps:{icon:({expanded:n,record:r,...x})=>n?e("button",{...x,children:e(me,{})}):e("button",{...x,children:e(fe,{})}),expandRowByClick:!0},data:C,loading:b,scroll:{x:1e3},border:{wrapper:!0,cell:!0},pagination:{...y,size:"mini",bufferSize:3,sizeCanChange:!0,showTotal:!0,showJumper:!0,pageSizeChangeResetCurrent:!0},onChange:K},B),e(Q,{title:"Edit Workshop Learner",visible:N,footer:null,onCancel:z,autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"600px"},children:e(we,{isEdit:!0,form:I,handleSubmit:Y,handleCancel:z,loading:P})})]})}const ue=te.TabPane;function Xe(){return e(le,{children:d(te,{defaultActiveTab:"1",destroyOnHide:!0,children:[e(ue,{title:"Remote",children:e(_e,{})},"1"),e(ue,{title:"Workshop",children:e(Me,{})},"2"),e(ue,{title:"All",children:e(Ge,{})},"3")]})})}export{Xe as default};
