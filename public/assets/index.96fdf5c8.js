import{R as G,r as m,C as V,u as Y,j as O,c as T,a as l,I as Z,T as ee,b as W,d as te,e as ne,f as re,o as oe,i as ae,g as ie,h as L,F as _,S as $,D as le,k as se,l as ce,B as K,m as de,n as he,p as ue,M as fe}from"./index.dbab94e8.js";import{C as ge}from"./index.40af5fda.js";var A=globalThis&&globalThis.__assign||function(){return A=Object.assign||function(e){for(var a,r=1,n=arguments.length;r<n;r++){a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},A.apply(this,arguments)},pe=globalThis&&globalThis.__rest||function(e,a){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)a.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};function ye(e,a){var r,n,o,c,y,s,S=m.exports.useContext(V).getPrefixCls,u=m.exports.useContext(Q),w=Y(),k=e.children,I=e.name,N=e.header,H=e.className,t=e.style,h=e.contentStyle,g=e.extra,f=e.disabled,p=e.destroyOnHide,P=e.expandIcon,C=e.showExpandIcon,E=C===void 0?!0:C,v=pe(e,["children","name","header","className","style","contentStyle","extra","disabled","destroyOnHide","expandIcon","showExpandIcon"]),d=S("collapse-item"),b=((s=u.activeKeys)===null||s===void 0?void 0:s.indexOf(I))>-1,R=E?"expandIcon"in e?P:u.expandIcon:null,x=function(i,j){if(!f){var z=u.triggerRegion,X=z==="icon"?0:z==="header"?1:2;(j===X||z==="header"&&[0,1].includes(j))&&u.onToggle(I,i)}};return O("div",{...A({ref:a},v,{className:T(d,(r={},r[d+"-active"]=b,r[d+"-no-icon"]=!R,r[d+"-disabled"]=f,r),H),style:t}),children:[O("div",{...A({role:"button","aria-disabled":f,"aria-expanded":b,"data-active-region":u.triggerRegion,tabIndex:f?-1:0,className:T(d+"-header",d+"-header-"+u.expandIconPosition,(n={},n[d+"-header-disabled"]=f,n)),onClick:function(i){return x(i,2)}},w({onPressEnter:function(i){!f&&u.onToggle(I,i)}})),children:[R&&l(Z,{prefix:d,disabled:f,className:T((o={},o[d+"-icon-hover-right"]=u.expandIconPosition==="right",o[d+"-header-icon-right"]=u.expandIconPosition==="right",o)),onClick:function(i){return x(i,0)},children:l("span",{className:T(d+"-header-icon",(c={},c[d+"-header-icon-down"]=b,c)),children:R})}),l("div",{className:d+"-header-title",onClick:function(i){return x(i,1)},children:N}),g&&l("div",{className:d+"-header-extra",onClick:function(i){i.stopPropagation()},children:g})]}),l(ee,{in:b,addEndListener:function(i,j){i.addEventListener("transitionend",j,!1)},mountOnEnter:"destroyOnHide"in e?p:u.destroyOnHide||u.lazyload,unmountOnExit:"destroyOnHide"in e?p:u.destroyOnHide,onEnter:function(i){i.style.height=0,i.style.display="block"},onEntering:function(i){i.style.height=i.scrollHeight+"px"},onEntered:function(i){i.style.height="auto"},onExit:function(i){i.style.display="block",i.style.height=i.offsetHeight+"px",i.offsetHeight},onExiting:function(i){i.style.height=0},onExited:function(i){i.style.display="none",i.style.height="auto"},children:l("div",{role:"region",className:T(d+"-content",(y={},y[d+"-content-expanded"]=b,y)),children:l("div",{style:h,className:d+"-content-box",children:k})})})]})}var J=G.forwardRef(ye);J.displayName="CollapseItem";var me=J,D=globalThis&&globalThis.__assign||function(){return D=Object.assign||function(e){for(var a,r=1,n=arguments.length;r<n;r++){a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},D.apply(this,arguments)},be=globalThis&&globalThis.__rest||function(e,a){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)a.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},F=globalThis&&globalThis.__read||function(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,c=[],y;try{for(;(a===void 0||a-- >0)&&!(o=n.next()).done;)c.push(o.value)}catch(s){y={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(y)throw y.error}}return c},xe=globalThis&&globalThis.__spreadArray||function(e,a,r){if(r||arguments.length===2)for(var n=0,o=a.length,c;n<o;n++)(c||!(n in a))&&(c||(c=Array.prototype.slice.call(a,0,n)),c[n]=a[n]);return e.concat(c||Array.prototype.slice.call(a))},B=function(e,a){var r=[].concat(e);return a?r.slice(0,1):r},Ce={bordered:!0,lazyload:!0,expandIconPosition:"left"},Q=m.exports.createContext({expandIconPosition:"left",expandIcon:l(W,{}),activeKeys:[],onToggle:function(){}});function ve(e,a){var r,n=m.exports.useContext(V),o=n.getPrefixCls,c=n.componentConfig,y=n.rtl,s=te(e,Ce,c==null?void 0:c.Collapse),S=F(ne([],{defaultValue:"defaultActiveKey"in s?B(s.defaultActiveKey,s.accordion):void 0,value:"activeKey"in s?B(s.activeKey,s.accordion):void 0}),2),u=S[0],w=S[1],k=s.children,I=s.className,N=s.style,H=s.bordered,t=s.lazyload,h=s.expandIcon,g=s.expandIconPosition,f=s.destroyOnHide,p=s.accordion,P=s.triggerRegion,C=s.onChange,E=be(s,["children","className","style","bordered","lazyload","expandIcon","expandIconPosition","destroyOnHide","accordion","triggerRegion","onChange"]),v=o("collapse"),d=function(b,R){var x=xe([],F(u||[]),!1),i=u==null?void 0:u.indexOf(b);i>-1?x.splice(i,1):p?x=[b]:x.push(b),"activeKey"in s||w(x),ae(C)&&C(b,x,R)};return l(Q.Provider,{value:{activeKeys:u,triggerRegion:P,lazyload:t,destroyOnHide:f,expandIconPosition:g,onToggle:d,expandIcon:"expandIcon"in s?h:g==="right"?l(re,{}):l(W,{})},children:l("div",{...D({ref:a},oe(E,["activeKey","defaultActiveKey"]),{className:T(v,v+"-"+(H?"border":"borderless"),(r={},r[v+"-rtl"]=y,r),I),style:N}),children:k})})}var Ie=G.forwardRef(ve),q=Ie;q.displayName="Collapse";q.Item=me;var U=q;const _e="_toolbar_1e6zf_1",Oe="_operations_1e6zf_6";var M={toolbar:_e,operations:Oe,"content-type":"_content-type_1e6zf_9","search-form-wrapper":"_search-form-wrapper_1e6zf_16","right-button":"_right-button_1e6zf_21","button-group":"_button-group_1e6zf_30","search-form":"_search-form_1e6zf_16"};const{useForm:Se}=_;function we(e){const[a]=Se(),r=ie(t=>t.token),[n,o]=m.exports.useState(!1),[c,y]=m.exports.useState([]),[s,S]=m.exports.useState([]),[u,w]=m.exports.useState();m.exports.useEffect(()=>{r&&k()},[r]);const k=(t={})=>{L.getCourse({}).then(h=>{y((h==null?void 0:h.data)||[])}),L.getSchool({}).then(h=>{S((h==null?void 0:h.data)||[])})},I=t=>{var f,p,P,C,E,v;o(!0);let h=(f=t==null?void 0:t.SchoolName)==null?void 0:f.value,g=(p=t==null?void 0:t.SchoolName)==null?void 0:p.label;typeof((P=t==null?void 0:t.SchoolName)==null?void 0:P.value)!="number"&&(h=0,g=(C=t==null?void 0:t.SchoolName)==null?void 0:C.value),L.addWorkshop({...t,CourseID:(E=t==null?void 0:t.CourseID)==null?void 0:E.value,CourseName:(v=t==null?void 0:t.CourseID)==null?void 0:v.label,SchoolNumber:h,SchoolName:g}).then(d=>{d!=null&&d.data&&e.onSubmit(d.data)}).finally(()=>{N(),o(!1)})},N=()=>{a.resetFields()},H=t=>`${t.Street} ${t.Suburb?", "+t.Suburb:""} ${t.City?", "+t.City:""} ,  ${t.DHB}`;return l("div",{className:M["search-form-wrapper"],children:O(_,{form:a,className:M["search-form"],labelAlign:"left",wrapperCol:{span:24},onSubmit:I,children:[l(_.Item,{label:"Workshop Name",field:"CourseID",rules:[{required:!0,message:"required"}],children:l($,{allowCreate:!0,labelInValue:!0,showSearch:!0,allowClear:!0,options:c.map(t=>({label:t.CourseName,value:t.CourseID})),filterOption:(t,h)=>{var g,f,p;return((f=(g=h.props.value)==null?void 0:g.label)==null?void 0:f.toLowerCase().indexOf(t.toLowerCase()))>=0||((p=h.props)==null?void 0:p.children.toLowerCase().indexOf(t.toLowerCase()))>=0},placeholder:"please enter"})}),l(_.Item,{label:"Course Date",field:"CourseDate",rules:[{required:!0,message:"required"}],children:l(le,{style:{width:"100%"}})}),l(_.Item,{label:"School Name",field:"SchoolName",rules:[{required:!0,message:"required"}],children:l($,{labelInValue:!0,showSearch:!0,allowClear:!0,options:s.map(t=>({label:t.SchoolName,value:t.SchoolNumber})),allowCreate:{formatter:t=>({value:t,label:t})},filterOption:(t,h)=>{var g,f,p;return((f=(g=h.props.value)==null?void 0:g.label)==null?void 0:f.toLowerCase().indexOf(t.toLowerCase()))>=0||((p=h.props)==null?void 0:p.children.toLowerCase().indexOf(t.toLowerCase()))>=0},placeholder:"please select (If the option does not exist, you can enter it manually)",onChange:t=>{var h=s.filter(g=>g.SchoolNumber==t.value);h.length>0?w(h[0]):w(null)}})}),u&&l("p",{children:H(u)}),l(_.Item,{label:"Number of learners attending",field:"StudentsNum",rules:[{required:!0,message:"required"}],children:l(se,{placeholder:"Please enter",min:0,style:{width:"100%"}})}),l(_.Item,{style:{textAlign:"center"},children:O(ce,{children:[l(K,{loading:n,type:"primary",htmlType:"submit",children:"Submit"}),l(K,{onClick:N,children:"Reset"})]})})]})})}const Ne=U.Item;function Te(){const[e,a]=m.exports.useState(""),[r,n]=m.exports.useState(localStorage.getItem("generateCode"));function o(){if(!e)return fe.warning("Please Enter");window.open(`/learner?code=${e}`)}return O(ge,{style:{height:"700px"},children:[O("div",{style:{textAlign:"center",marginBottom:"20px"},children:[l(de,{value:e,placeholder:"Enter the workshop code to start collecting learners data",style:{width:"500px",height:"33px"},onChange:c=>a(c)}),l(K,{type:"primary",icon:l(he,{}),onClick:o})]}),l("div",{style:{display:"flex",justifyContent:"center"},children:l(U,{defaultActiveKey:["1"],style:{width:"530px"},children:l(Ne,{header:"Generate a unique workshop group code",name:"1",children:r?O("div",{style:{marginBottom:"20px"},children:["The currently generated code:",l(ue,{color:"#00b42a",style:{margin:"16px",cursor:"pointer"},onClick:()=>{a(r)},children:r}),l(K,{onClick:()=>{localStorage.setItem("generateCode",""),n("")},type:"primary",children:"Generate again"})]}):l(we,{onSubmit:c=>{localStorage.setItem("generateCode",c),n(c),a(c)}})})})})]})}export{Te as default};
