import{R as He,r as a,aC as lt,k as n,j as e,aD as rt,a4 as ce,L as w,J as q,V as G,P as te,b3 as Se,Q as P,U as C,M as B,a8 as he,N as F,ah as pe,aH as le,C as O,bf as Oe,ai as me,ax as Q,a6 as Re,b6 as re,ae as Ye,af as Je,ag as de,G as Ne,Y as W,bg as Ge,m as Fe,bh as ke,l as nt,aI as Ae,bi as Ce,K as ye,ad as ee,ac as ot,ab as at,a9 as it}from"./index.6f379340.js";import{T as Le}from"./index.58732ccb.js";import{S as K}from"./index.7975beb9.js";import{I as ie,b as $e,P as ue,c as we,a as st}from"./communication.f96fc4ce.js";import{c as H,t as Ee}from"./teacher.f9020bed.js";import{E as Ze}from"./exceljs.min.5c247d31.js";import{D as Qe}from"./index.d592f7de.js";import{h as Ve}from"./moment.0f22a298.js";import{C as Xe}from"./index.1af8514b.js";function _e(l,m){var f=Object.keys(l);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);m&&(o=o.filter(function(v){return Object.getOwnPropertyDescriptor(l,v).enumerable})),f.push.apply(f,o)}return f}function Me(l){for(var m=1;m<arguments.length;m++){var f=arguments[m]!=null?arguments[m]:{};m%2?_e(Object(f),!0).forEach(function(o){rt(l,o,f[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(f)):_e(Object(f)).forEach(function(o){Object.defineProperty(l,o,Object.getOwnPropertyDescriptor(f,o))})}return l}function ct(l,m){var f=a.exports.useContext(lt),o=f.prefixCls,v=o===void 0?"arco":o,g=l.spin,s=l.className,S=Me(Me({"aria-hidden":!0,focusable:!1,ref:m},l),{},{className:"".concat(s?s+" ":"").concat(v,"-icon ").concat(v,"-icon-email")});return g&&(S.className="".concat(S.className," ").concat(v,"-icon-loading")),delete S.spin,delete S.isIcon,n("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...S,children:[e("rect",{width:"36",height:"32",x:"6",y:"8",rx:"1"}),e("path",{d:"m37 17-12.43 8.606a1 1 0 0 1-1.14 0L11 17"})]})}var ze=He.forwardRef(ct);ze.defaultProps={isIcon:!0};ze.displayName="IconEmail";var dt=ze,Z={getGroups:{url:"/api/microcredential/groups",method:"get"},getGroup:{url:"/api/microcredential/groups/:groupId",method:"get"},getAvailableCourses:{url:"/api/microcredential/available-courses",method:"get"},createGroup:{url:"/api/microcredential/groups",method:"post"},updateGroup:{url:"/api/microcredential/groups/:groupId",method:"put"},deleteGroup:{url:"/api/microcredential/groups/:groupId",method:"delete"},removeCourse:{url:"/api/microcredential/groups/:groupId/courses/:courseId",method:"delete"}};const fe={async getGroups(l={}){return await ce(Z.getGroups,l)},async getGroup(l){return await ce({...Z.getGroup,url:Z.getGroup.url.replace(":groupId",String(l))})},async getAvailableCourses(l={}){return await ce(Z.getAvailableCourses,l)},async createGroup(l){return await ce(Z.createGroup,l)},async updateGroup(l,m){return await ce({...Z.updateGroup,url:Z.updateGroup.url.replace(":groupId",String(l))},m)},async deleteGroup(l){return await ce({...Z.deleteGroup,url:Z.deleteGroup.url.replace(":groupId",String(l))})},async removeCourse(l,m){return await ce({...Z.removeCourse,url:Z.removeCourse.url.replace(":groupId",String(l)).replace(":courseId",String(m))})}},ut="_logo_1p51g_1",ht="_toolbar_1p51g_15",pt="_operations_1p51g_20";var ge={logo:ut,"logo-name":"_logo-name_1p51g_8",toolbar:ht,operations:pt,"content-type":"_content-type_1p51g_23","search-form-wrapper":"_search-form-wrapper_1p51g_30","right-button":"_right-button_1p51g_35","button-group":"_button-group_1p51g_44","search-form":"_search-form_1p51g_30","cLoading-form":"_cLoading-form_1p51g_55"};const ne=w.Item,mt=q.Option,gt=({rowData:l,onOk:m,unitStandards:f,onCancel:o})=>{const[v]=w.useForm(),[g,s]=a.exports.useState(!1),[S,p]=a.exports.useState(!1);a.exports.useEffect(()=>{l!=null&&l.CourseID?(v.setFieldsValue({...l}),p(l.IsCustom)):(v.resetFields(),p(!1))},[l]);const c=N=>{s(!0),l!=null&&l.CourseID?H.updateCourse({CourseID:l==null?void 0:l.CourseID,...N,IsCustom:S}).then(u=>{u!=null&&u.data&&(B.success("success"),m())}).finally(()=>{s(!1)}):H.addCourse({...N,IsCustom:S}).then(u=>{u!=null&&u.data&&(B.success("success"),m())}).finally(()=>{s(!1)})},A=N=>{p(N)};return n(w,{form:v,onSubmit:c,labelAlign:"left",wrapperCol:{span:24},className:ge["search-form"],size:"small",children:[e(ne,{label:"Course Name",field:"CourseName",rules:[{required:!0,message:"Please enter course name"}],children:e(G,{placeholder:"Enter course name"})}),e(ne,{label:"Course Details",field:"CourseDetails",children:e(G.TextArea,{placeholder:"Enter course details"})}),e(ne,{label:"Course Level",field:"CourseLevel",rules:[{required:!0,message:"Please enter course level"}],children:e(te,{placeholder:"Enter course level",min:1})}),e(ne,{label:"Course Credits",field:"CourseCredits",rules:[{required:!0,message:"Please enter course credits"}],children:e(te,{placeholder:"Enter course credits",min:1})}),e(ne,{label:"Course Delivery",field:"CourseDelivery",children:e(G,{placeholder:"Please enter"})}),e(ne,{label:"Course Group",field:"CourseGroup",children:e(G,{placeholder:"Enter course group"})}),e(ne,{label:"Unit Standards",field:"UnitStandardIDs",children:e(q,{mode:"multiple",placeholder:"Select unit standards",allowClear:!0,showSearch:!0,filterOption:(N,u)=>{var I,R,T;return((T=(R=(I=u.props)==null?void 0:I.children)==null?void 0:R.toLowerCase())==null?void 0:T.indexOf(N==null?void 0:N.toLowerCase()))>=0},children:f.map(N=>e(mt,{value:N.UnitStandardID,children:`${N.US} - ${N.USName}`},N.UnitStandardID))})}),e(ne,{label:"Is Custom",field:"IsCustom",children:e(Se,{checked:S,onChange:A})}),e(w.Item,{style:{textAlign:"center"},children:n(P,{children:[e(C,{type:"primary",htmlType:"submit",loading:g,children:"Submit"}),e(C,{onClick:o,children:"Cancel"})]})})]})},et=async(l,m,f,o)=>{try{const v=new Ze.Workbook,g=v.addWorksheet(f);g.columns=o,g.getRow(1).font={bold:!0,size:12},g.getRow(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF165DFF"}},g.getRow(1).font={...g.getRow(1).font,color:{argb:"FFFFFFFF"}},l.forEach(A=>{g.addRow(A)}),g.columns.forEach(A=>{let N=0;A.eachCell({includeEmpty:!0},u=>{const I=u.value?u.value.toString().length:10;I>N&&(N=I)}),A.width=N<10?10:N+2}),g.autoFilter={from:"A1",to:String.fromCharCode(64+o.length)+"1"};const s=await v.xlsx.writeBuffer(),S=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),p=window.URL.createObjectURL(S),c=document.createElement("a");return c.href=p,c.download=`${m}_${new Date().toISOString().split("T")[0]}.xlsx`,c.click(),window.URL.revokeObjectURL(p),!0}catch(v){throw console.error("Error exporting to Excel:",v),v}},ft=async(l,m)=>{const f=l.map(v=>{var s;const g=((s=v.UnitStandardIDs)==null?void 0:s.map(S=>{const p=m.find(c=>c.UnitStandardID===S);return p?`${p.US} - ${p.USName}`:""}).join("; "))||"None";return{CourseName:v.CourseName,CourseDetails:v.CourseDetails||"",CourseLevel:v.CourseLevel,CourseCredits:v.CourseCredits,UnitStandards:g}});await et(f,"Courses","Courses",[{header:"Course Name",key:"CourseName",width:30},{header:"Course Details",key:"CourseDetails",width:40},{header:"Level",key:"CourseLevel",width:10},{header:"Credits",key:"CourseCredits",width:10},{header:"Unit Standards",key:"UnitStandards",width:60}])},yt=async l=>{const m=l.map(o=>({US:o.US,USName:o.USName,USDescription:o.USDescription||"",USLevel:o.USLevel,USCredits:o.USCredits,USVersion:o.USVersion||""}));await et(m,"Unit_Standards","Unit Standards",[{header:"Unit Standard",key:"US",width:15},{header:"Name",key:"USName",width:40},{header:"Description",key:"USDescription",width:50},{header:"Level",key:"USLevel",width:10},{header:"Credits",key:"USCredits",width:10},{header:"Version",key:"USVersion",width:15}])},{Col:ve}=Ne,Ct=()=>{const[l,m]=a.exports.useState([]),[f,o]=a.exports.useState({}),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState([]),[p]=he(),[c,A]=a.exports.useState(!1),[N,u]=a.exports.useState(null),[I,R]=a.exports.useState({current:1,pageSize:10,total:0});a.exports.useEffect(()=>{T(),z()},[]);const T=(L={})=>{A(!0),H.getCourses(L).then(x=>{m((x==null?void 0:x.data)||[]),R(V=>{var _;return{...V,total:((_=x==null?void 0:x.data)==null?void 0:_.length)||0}})}).catch(x=>{console.error("Failed to load courses:",x),F.error({title:"Error",content:"Failed to load courses. Please try again.",duration:5e3})}).finally(()=>{A(!1)})},z=async(L={})=>{try{const x=await H.getUnits(L);S((x==null?void 0:x.data)||[])}catch(x){console.error("Failed to load unit standards:",x),F.error({title:"Error",content:"Failed to load unit standards.",duration:3e3})}},U=()=>{o({}),g(!0)},b=L=>{o(L),g(!0)},d=[{title:"Course Name",dataIndex:"CourseName",key:"CourseName"},{title:"Course Details",dataIndex:"CourseDetails",key:"CourseDetails"},{title:"Course Level",dataIndex:"CourseLevel",key:"CourseLevel"},{title:"Course Credits",dataIndex:"CourseCredits",key:"CourseCredits"},{title:"Usage",dataIndex:"Usage",key:"Usage",render:(L,x)=>n(P,{children:[x.StudentCount>0&&n(W,{color:"blue",children:[x.StudentCount," Student",x.StudentCount!==1?"s":""]}),x.InMicrocredentialCount>0&&n(W,{color:"gold",children:["In ",x.InMicrocredentialCount," Microcredential",x.InMicrocredentialCount!==1?"s":""]}),x.StudentCount===0&&x.InMicrocredentialCount===0&&e(W,{color:"gray",children:"Not in use"})]})},{title:"Operation",dataIndex:"Operation",render:(L,x)=>n(P,{children:[e(C,{size:"mini",type:"primary",onClick:V=>{V.stopPropagation(),b(x)},children:"Edit"}),e(C,{size:"mini",type:"secondary",icon:e(Ge,{}),onClick:V=>{V.stopPropagation(),t(x)},children:"Duplicate"}),e(ue,{focusLock:!0,title:"Confirm Deletion",content:`Are you sure you want to delete "${x.CourseName}"?`,onOk:()=>$(x.CourseID,x.CourseName),children:e(C,{type:"primary",status:"danger",size:"mini",loading:N===x.CourseID,children:"Delete"})})]})}],$=async(L,x)=>{u(L);try{const V=await H.deleteCourse({id:L});V!=null&&V.data&&(F.success({title:"Success",content:`Course "${x}" has been deleted successfully.`,duration:3e3}),T())}catch(V){console.error("Failed to delete course:",V),F.error({title:"Deletion Failed",content:"Failed to delete course. Please try again.",duration:5e3})}finally{u(null)}},E=()=>{const L=p.getFieldsValue();R(x=>({...x,current:1})),T(L)},r=a.exports.useMemo(()=>pe(()=>{E()},500),[]),i=()=>{p.resetFields(),R(L=>({...L,current:1})),T()},h=L=>{var V;if(!L.UnitStandardIDs)return"No Unit Standard available at the moment";if(!s||!(s!=null&&s.length))return"Loading";const x=(V=L.UnitStandardIDs)==null?void 0:V.map(_=>{const M=s==null?void 0:s.find(J=>J.UnitStandardID===_);return{label:`${M==null?void 0:M.US} - `,value:M==null?void 0:M.USName}});return e(Qe,{layout:"inline-horizontal",column:1,border:!0,data:x})},D=L=>{L.key==="Enter"&&E()},t=L=>{const x={...L,CourseName:`${L.CourseName} (Copy)`,CourseID:void 0};o(x),g(!0)},y=async()=>{try{await ft(l,s),F.success({title:"Export Successful",content:`${l.length} courses exported to Excel`,duration:3e3})}catch(L){console.error("Export error:",L),F.error({title:"Export Failed",content:"Failed to export courses. Please try again.",duration:3e3})}},k=a.exports.useMemo(()=>{const L=l.length,x=l.filter(se=>se.CourseLevel===1).length,V=l.filter(se=>se.CourseLevel===2).length,_=l.filter(se=>se.CourseLevel===3).length,M=l.reduce((se,tt)=>se+(parseInt(tt.CourseCredits)||0),0),J=L>0?Math.round(M/L):0;return{totalCourses:L,level1Count:x,level2Count:V,level3Count:_,totalCredits:M,avgCredits:J}},[l]);return n("div",{children:[n(le,{gutter:16,style:{marginBottom:20},children:[e(ve,{span:6,children:e(O,{children:e(K,{title:"Total Courses",value:k.totalCourses,prefix:e(Oe,{}),styleValue:{color:"#0FC6C2"}})})}),e(ve,{span:6,children:e(O,{children:e(K,{title:"Level 1-2 Courses",value:k.level1Count+k.level2Count,groupSeparator:!0,styleValue:{color:"#165DFF"}})})}),e(ve,{span:6,children:e(O,{children:e(K,{title:"Total Credits",value:k.totalCredits,suffix:"credits",styleValue:{color:"#722ED1"}})})}),e(ve,{span:6,children:e(O,{children:e(K,{title:"Average Credits",value:k.avgCredits,suffix:"per course",styleValue:{color:"#F77234"}})})})]}),e(w,{form:p,labelAlign:"left",layout:"inline",style:{display:"inline-block",marginBottom:"10px"},children:n(le,{justify:"space-between",align:"center",children:[n(P,{wrap:!0,children:[e(w.Item,{label:"Course Name",field:"CourseName",children:e(G,{allowClear:!0,onKeyDown:D,onChange:r,placeholder:"Please enter"})}),e(w.Item,{label:"Course Level",field:"CourseLevel",children:e(te,{onKeyDown:D,onChange:r,placeholder:"Please enter"})}),e(w.Item,{label:"Course Credits",field:"CourseCredits",children:e(te,{onKeyDown:D,onChange:r,placeholder:"Please enter"})}),n(P,{children:[e(C,{type:"primary",icon:e(me,{}),onClick:E,children:"Search"}),e(C,{icon:e(ie,{}),onClick:i,children:"Reset"})]})]}),n(P,{children:[e(C,{type:"outline",icon:e($e,{}),onClick:y,disabled:l.length===0,children:"Export to Excel"}),e(C,{type:"primary",icon:e(Q,{}),onClick:U,children:"Add"})]})]})}),!c&&l.length===0?e(Re,{icon:e(Oe,{style:{fontSize:64,color:"#165DFF"}}),description:n(P,{direction:"vertical",align:"center",children:[e("div",{style:{fontSize:16,fontWeight:500},children:"No courses found"}),e("div",{style:{color:"#86909C"},children:p.getFieldsValue().CourseName||p.getFieldsValue().CourseLevel?"Try adjusting your search filters":"Get started by creating your first course"}),e(C,{type:"primary",icon:e(Q,{}),onClick:U,style:{marginTop:10},children:"Create Course"})]})}):e(re,{rowKey:"CourseID",expandedRowRender:h,expandProps:{icon:({expanded:L,record:x,...V})=>L?e("button",{...V,children:e(Ye,{})}):e("button",{...V,children:e(Je,{})}),expandRowByClick:!0},columns:d,data:l,loading:c,pagination:{...I,showTotal:!0,showJumper:!0,sizeCanChange:!0,onChange:(L,x)=>{R({...I,current:L,pageSize:x})}}}),e(de,{title:f!=null&&f.CourseID?"Edit Course":"Add Course",visible:v,onCancel:()=>g(!1),footer:null,children:e(gt,{rowData:f,unitStandards:s,onOk:L=>{g(!1),E(),F.success({title:"Success",content:`Course "${L}" has been ${f!=null&&f.CourseID?"updated":"created"} successfully.`,duration:3e3})},onCancel:()=>{g(!1)}})})]})},oe=w.Item,St=({rowData:l,onOk:m,onCancel:f})=>{const[o]=w.useForm(),[v,g]=a.exports.useState(!1);return a.exports.useEffect(()=>{l!=null&&l.UnitStandardID?o.setFieldsValue({...l}):o.resetFields()},[l]),n(w,{form:o,onSubmit:S=>{g(!0),H.updateUnitstandard({UnitStandardID:(l==null?void 0:l.UnitStandardID)||void 0,...S}).then(p=>{p!=null&&p.data&&(B.success("success"),m())}).finally(()=>{g(!1)})},labelAlign:"left",wrapperCol:{span:24},className:ge["search-form"],size:"small",children:[e(oe,{label:"Unit Standard",field:"US",rules:[{required:!0,message:"Please enter"}],children:e(G,{placeholder:"Please enter"})}),e(oe,{label:"Unit Standard Name",field:"USName",rules:[{required:!0,message:"Please enter"}],children:e(G,{placeholder:"Please enter"})}),e(oe,{label:"Level",field:"USLevel",rules:[{required:!0,message:"Please enter"}],children:e(te,{placeholder:"Please enter",min:1})}),e(oe,{label:"Credits",field:"USCredits",rules:[{required:!0,message:"Please enter"}],children:e(te,{placeholder:"Please enter",min:1})}),e(oe,{label:"Description",field:"USDescription",children:e(G.TextArea,{placeholder:"Please enter"})}),e(oe,{label:"Version",field:"USVersion",rules:[{required:!0,message:"Please enter"}],children:e(te,{placeholder:"Please enter",min:1})}),e(oe,{label:"Classification",field:"USClassification",children:e(G,{placeholder:"Please enter"})}),e(oe,{label:"URL",field:"USURL",children:e(G,{placeholder:"Please enter"})}),e(w.Item,{style:{textAlign:"center"},children:n(P,{children:[e(C,{type:"primary",htmlType:"submit",loading:v,children:"Submit"}),e(C,{onClick:f,children:"Cancel"})]})})]})},be={current:1,pageSize:10,total:0},xe=(l,m)=>({...l,showTotal:!0,showJumper:!0,sizeCanChange:!0,onChange:(f,o)=>{m({...l,current:f,pageSize:o})}}),{Col:Ie}=Ne,bt=()=>{const[l,m]=a.exports.useState([]),[f,o]=a.exports.useState(!1),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(null),[p]=he(),[c,A]=a.exports.useState({}),[N,u]=a.exports.useState(be);a.exports.useEffect(()=>{R()},[]);const I=async(t,y)=>{S(t);try{const k=await H.deleteUnitStandard({id:t});k!=null&&k.data&&(F.success({title:"Success",content:`Unit Standard "${y}" has been deleted successfully.`,duration:3e3}),R())}catch(k){console.error("Failed to delete unit standard:",k),F.error({title:"Deletion Failed",content:"Failed to delete unit standard. Please try again.",duration:5e3})}finally{S(null)}},R=async(t={})=>{g(!0);try{const y=await H.getUnits(t);m((y==null?void 0:y.data)||[]),u(k=>{var L;return{...k,total:((L=y==null?void 0:y.data)==null?void 0:L.length)||0}})}catch(y){console.error("Failed to load unit standards:",y),F.error({title:"Error",content:"Failed to load unit standards. Please try again.",duration:5e3})}finally{g(!1)}},T=()=>{A({}),o(!0)},z=t=>{A(t),o(!0)},U=t=>{const y={...t,US:`${t.US}-COPY`,USName:`${t.USName} (Copy)`,UnitStandardID:void 0};A(y),o(!0)},b=async()=>{try{await yt(l),F.success({title:"Export Successful",content:`${l.length} unit standards exported to Excel`,duration:3e3})}catch(t){console.error("Export error:",t),F.error({title:"Export Failed",content:"Failed to export unit standards. Please try again.",duration:3e3})}},d=a.exports.useMemo(()=>{const t=l.length,y=l.filter(_=>_.USLevel===1).length,k=l.filter(_=>_.USLevel===2).length,L=l.filter(_=>_.USLevel===3).length,x=l.reduce((_,M)=>_+(parseInt(M.USCredits)||0),0),V=t>0?Math.round(x/t):0;return{totalUnits:t,level1Count:y,level2Count:k,level3Count:L,totalCredits:x,avgCredits:V}},[l]),$=[{title:"Unit Standard",dataIndex:"US",key:"US"},{title:"Unit Standard Name",dataIndex:"USName",key:"USName"},{title:"Description",dataIndex:"USDescription",key:"USDescription"},{title:"Level",dataIndex:"USLevel",key:"USLevel"},{title:"Credits",dataIndex:"USCredits",key:"USCredits"},{title:"Version",dataIndex:"USVersion",key:"USVersion"},{title:"Operation",dataIndex:"Operation",render:(t,y)=>n(P,{children:[e(C,{type:"primary",size:"mini",onClick:k=>{k.stopPropagation(),z(y)},children:"Edit"}),e(C,{size:"mini",type:"secondary",icon:e(Ge,{}),onClick:k=>{k.stopPropagation(),U(y)},children:"Duplicate"}),e(ue,{focusLock:!0,title:"Confirm Deletion",content:`Are you sure you want to delete "${y.USName}"?`,onOk:()=>I(y.UnitStandardID,y.USName),children:e(C,{type:"primary",status:"danger",size:"mini",loading:s===y.UnitStandardID,children:"Delete"})})]})}],E=()=>{const t=p.getFieldsValue();u(y=>({...y,current:1})),R(t)},r=a.exports.useMemo(()=>pe(()=>{E()},500),[]),i=()=>{p.resetFields(),u(t=>({...t,current:1})),R()},h=t=>{t.key==="Enter"&&E()},D=t=>{const y=[{label:"Classification",value:t==null?void 0:t.USClassification},{label:"URL",value:t!=null&&t.USURL?e("a",{href:t==null?void 0:t.USURL,target:"_blank",rel:"noopener noreferrer",children:t==null?void 0:t.USURL}):""},{label:"Available Grade",value:t==null?void 0:t.USAvailableGrade}];return e(Qe,{layout:"inline-horizontal",column:1,border:!0,data:y})};return n("div",{children:[n(le,{gutter:16,style:{marginBottom:20},children:[e(Ie,{span:6,children:e(O,{children:e(K,{title:"Total Unit Standards",value:d.totalUnits,prefix:e(Fe,{}),styleValue:{color:"#0FC6C2"}})})}),e(Ie,{span:6,children:e(O,{children:e(K,{title:"Level 1-2 Units",value:d.level1Count+d.level2Count,groupSeparator:!0,styleValue:{color:"#165DFF"}})})}),e(Ie,{span:6,children:e(O,{children:e(K,{title:"Total Credits",value:d.totalCredits,suffix:"credits",styleValue:{color:"#722ED1"}})})}),e(Ie,{span:6,children:e(O,{children:e(K,{title:"Average Credits",value:d.avgCredits,suffix:"per unit",styleValue:{color:"#F77234"}})})})]}),e(w,{form:p,labelAlign:"left",layout:"inline",style:{marginBottom:"10px"},children:n(le,{justify:"space-between",align:"center",style:{width:"100%"},children:[n(P,{wrap:!0,children:[e(w.Item,{label:"Unit Standard",field:"name",children:e(G,{onKeyDown:h,onChange:r,allowClear:!0,placeholder:"Please enter"})}),e(w.Item,{label:"Level",field:"USLevel",children:e(te,{onKeyDown:h,onChange:r,placeholder:"Please enter"})}),e(w.Item,{label:"Credits",field:"USCredits",children:e(te,{onKeyDown:h,onChange:r,placeholder:"Please enter"})}),n(P,{children:[e(C,{type:"primary",icon:e(me,{}),onClick:E,children:"Search"}),e(C,{icon:e(ie,{}),onClick:i,children:"Reset"})]})]}),n(P,{children:[e(C,{type:"outline",icon:e($e,{}),onClick:b,disabled:l.length===0,children:"Export to Excel"}),e(C,{type:"primary",icon:e(Q,{}),onClick:T,children:"Add"})]})]})}),!v&&l.length===0?e(Re,{icon:e(Fe,{style:{fontSize:64,color:"#165DFF"}}),description:n(P,{direction:"vertical",align:"center",children:[e("div",{style:{fontSize:16,fontWeight:500},children:"No unit standards found"}),e("div",{style:{color:"#86909C"},children:p.getFieldsValue().name||p.getFieldsValue().USLevel?"Try adjusting your search filters":"Get started by creating your first unit standard"}),e(C,{type:"primary",icon:e(Q,{}),onClick:T,style:{marginTop:10},children:"Create Unit Standard"})]})}):e(re,{rowKey:"UnitStandardID",expandedRowRender:D,expandProps:{icon:({expanded:t,record:y,...k})=>t?e("button",{...k,children:e(Ye,{})}):e("button",{...k,children:e(Je,{})}),expandRowByClick:!0},columns:$,data:l,loading:v,pagination:xe(N,u)}),e(de,{title:c!=null&&c.UnitStandardID?"Edit Unit Standard":"Add Unit Standard",visible:f,onCancel:()=>o(!1),footer:null,children:e(St,{rowData:c,onOk:t=>{o(!1),E(),F.success({title:"Success",content:`Unit Standard "${t}" has been ${c!=null&&c.UnitStandardID?"updated":"created"} successfully.`,duration:3e3})},onCancel:()=>{o(!1)}})})]})},Y=w.Item,{Row:Te,Col:j}=Ne,xt=({rowData:l,onOk:m,onCancel:f})=>{const[o]=w.useForm(),[v,g]=a.exports.useState(!1);return a.exports.useEffect(()=>{l!=null&&l.SchoolNumber?o.setFieldsValue({...l}):o.resetFields()},[l]),n(w,{form:o,onSubmit:S=>{g(!0);const p=S.SchoolName,c=!!(l!=null&&l.SchoolNumber);H.addSchool({SchoolNumber:(l==null?void 0:l.SchoolNumber)||void 0,...S}).then(A=>{A!=null&&A.data&&(B.success({content:`School "${p}" has been ${c?"updated":"created"} successfully.`,duration:3e3}),m(p))}).finally(()=>{g(!1)})},labelAlign:"left",layout:"vertical",className:ge["search-form"],autoComplete:"off",children:[n("div",{style:{marginBottom:"20px"},children:[e("h4",{style:{margin:"0 0 16px 0",color:"#1D2129",fontWeight:600},children:"Basic Information"}),n(Te,{gutter:16,children:[e(j,{span:24,children:e(Y,{label:"School Name",field:"SchoolName",rules:[{required:!0,message:"School name is required"}],children:e(G,{placeholder:"Enter school name"})})}),e(j,{span:12,children:e(w.Item,{label:"School Type",field:"SchoolType",children:e(q,{allowClear:!0,options:["Composite","Composite (Year 1-10)","Composite (Year 1-15)","Contributing","Correspondence School","Intermediate","Private Secondary (Years 9-13)","Restricted Composite (Year 7-10)","Secondary (Year 11-15)","Secondary (Year 7-10)","Secondary (Year 7-15)","Secondary (Year 9-15)","Special School","Teen Parent Unit"],placeholder:"Select school type"})})}),e(j,{span:12,children:e(w.Item,{label:"Urban Area",field:"UrbanArea",children:e(q,{allowClear:!0,options:["Central Auckland Zone","Main Urban Area","Marton","Minor Urban Area","Northern Auckland Zone","Not Applicable","Rotorua","Rural Area","Rural Centre","Secondary Urban Area","Southern Auckland Zone","Upper Hutt Zone","Western Auckland Zone","Whakatane"],placeholder:"Select urban area"})})})]})]}),e(ke,{}),n("div",{style:{marginBottom:"20px"},children:[e("h4",{style:{margin:"0 0 16px 0",color:"#1D2129",fontWeight:600},children:"Contact Information"}),n(Te,{gutter:16,children:[e(j,{span:12,children:e(Y,{label:"Telephone",field:"Telephone",rules:[{pattern:/^[\d\s\-\+\(\)]*$/,message:"Please enter a valid phone number"}],children:e(G,{placeholder:"e.g., 09 123 4567"})})}),e(j,{span:12,children:e(Y,{label:"Fax",field:"Fax",rules:[{pattern:/^[\d\s\-\+\(\)]*$/,message:"Please enter a valid fax number"}],children:e(G,{placeholder:"e.g., 09 123 4567"})})}),e(j,{span:12,children:e(Y,{label:"Email",field:"Email",rules:[{type:"email",message:"Please enter a valid email address"}],children:e(G,{placeholder:"e.g., admin@school.co.nz"})})}),e(j,{span:12,children:e(Y,{label:"School Website",field:"SchoolWebsite",rules:[{pattern:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,message:"Please enter a valid website URL"}],children:e(G,{placeholder:"e.g., https://school.co.nz"})})})]})]}),e(ke,{}),n("div",{style:{marginBottom:"20px"},children:[e("h4",{style:{margin:"0 0 16px 0",color:"#1D2129",fontWeight:600},children:"Address Information"}),n(Te,{gutter:16,children:[e(j,{span:12,children:e(Y,{label:"Street",field:"Street",children:e(G,{placeholder:"Enter street address"})})}),e(j,{span:12,children:e(Y,{label:"Suburb",field:"Suburb",children:e(G,{placeholder:"Enter suburb"})})}),e(j,{span:12,children:e(Y,{label:"City",field:"City",children:e(G,{placeholder:"Enter city"})})}),e(j,{span:12,children:e(Y,{label:"Postal Code",field:"PostalCode",children:e(G,{placeholder:"Enter postal code"})})}),e(j,{span:8,children:e(Y,{label:"Postal Address 1",field:"PostalAddress1",children:e(G,{placeholder:"Address line 1"})})}),e(j,{span:8,children:e(Y,{label:"Postal Address 2",field:"PostalAddress2",children:e(G,{placeholder:"Address line 2"})})}),e(j,{span:8,children:e(Y,{label:"Postal Address 3",field:"PostalAddress3",children:e(G,{placeholder:"Address line 3"})})}),e(j,{span:12,children:e(Y,{label:"DHB (District Health Board)",field:"DHB",children:e(G,{placeholder:"Enter DHB"})})})]})]}),e(ke,{}),e(w.Item,{style:{textAlign:"right",marginBottom:0},children:n(P,{size:"medium",children:[e(C,{onClick:f,size:"large",children:"Cancel"}),e(C,{type:"primary",htmlType:"submit",loading:v,size:"large",children:l!=null&&l.SchoolNumber?"Update School":"Create School"})]})})]})},vt=()=>{const[l,m]=a.exports.useState([]),[f,o]=a.exports.useState(!1),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(null),[p]=he(),[c,A]=a.exports.useState({}),[N,u]=a.exports.useState(be);a.exports.useEffect(()=>{I()},[]);const I=async(r={})=>{g(!0);try{const i=await nt.getSchool(r);m((i==null?void 0:i.data)||[]),u(h=>{var D;return{...h,total:((D=i==null?void 0:i.data)==null?void 0:D.length)||0}})}catch(i){console.error("Failed to load schools:",i),F.error({title:"Error",content:"Failed to load schools. Please try again.",duration:5e3})}finally{g(!1)}},R=()=>{A({}),o(!0)},T=r=>{A(r),o(!0)},z=[{title:"School Number",dataIndex:"SchoolNumber",key:"SchoolNumber",width:130,fixed:"left",sorter:(r,i)=>r.SchoolNumber-i.SchoolNumber,render:r=>n(W,{color:"arcoblue",style:{fontFamily:"monospace",fontSize:"13px"},children:["#",r]})},{title:"School Name",dataIndex:"SchoolName",key:"SchoolName",width:220,fixed:"left",sorter:(r,i)=>(r.SchoolName||"").localeCompare(i.SchoolName||""),render:r=>e("strong",{children:r})},{title:"City",dataIndex:"City",key:"City",width:120,sorter:(r,i)=>(r.City||"").localeCompare(i.City||"")},{title:"School Type",dataIndex:"SchoolType",key:"SchoolType",width:180,ellipsis:!0,sorter:(r,i)=>(r.SchoolType||"").localeCompare(i.SchoolType||""),render:r=>r?e(W,{color:"blue",children:r}):"-"},{title:"Telephone",dataIndex:"Telephone",key:"Telephone",width:130},{title:"Email",dataIndex:"Email",key:"Email",width:200,ellipsis:!0},{title:"Street",dataIndex:"Street",key:"Street",width:150,ellipsis:!0},{title:"Suburb",dataIndex:"Suburb",key:"Suburb",width:120,ellipsis:!0},{title:"Address",dataIndex:"PostalAddress1",key:"PostalAddress1",width:150,ellipsis:!0},{title:"Website",dataIndex:"SchoolWebsite",key:"SchoolWebsite",width:150,ellipsis:!0,render:r=>r?e("a",{href:r.startsWith("http")?r:`https://${r}`,target:"_blank",rel:"noopener noreferrer",children:r}):"-"},{title:"Created",dataIndex:"CreateDate",key:"CreateDate",width:110,sorter:(r,i)=>{const h=r.CreateDate?new Date(r.CreateDate).getTime():0,D=i.CreateDate?new Date(i.CreateDate).getTime():0;return h-D},render:r=>r?Ve(r).format("DD/MM/YYYY"):"-"},{title:"Last Updated",dataIndex:"UpdateDate",key:"UpdateDate",width:150,sorter:(r,i)=>{const h=r.UpdateDate?new Date(r.UpdateDate).getTime():0,D=i.UpdateDate?new Date(i.UpdateDate).getTime():0;return h-D},render:r=>r?Ve(r).format("DD/MM/YY HH:mm"):"-"},{title:"Operation",dataIndex:"Operation",fixed:"right",width:160,render:(r,i)=>n(P,{children:[e(C,{type:"primary",size:"mini",onClick:h=>{h.stopPropagation(),T(i)},children:"Edit"}),e(ue,{focusLock:!0,title:"Confirm Deletion",content:`Are you sure you want to delete "${i.SchoolName}"?`,onOk:()=>E(i.SchoolNumber,i.SchoolName),children:e(C,{type:"primary",status:"danger",size:"mini",loading:s===i.SchoolNumber,children:"Delete"})})]})}],U=()=>{const r=p.getFieldsValue();u(i=>({...i,current:1})),I(r)},b=a.exports.useMemo(()=>pe(()=>{U()},500),[]),d=()=>{p.resetFields(),u(r=>({...r,current:1})),I()},$=r=>{r.key==="Enter"&&U()},E=async(r,i)=>{S(r);try{const h=await H.deleteSchool({id:r});h!=null&&h.data&&(F.success({title:"Success",content:`School "${i}" has been deleted successfully.`,duration:3e3}),I())}catch(h){console.error("Failed to delete school:",h),F.error({title:"Deletion Failed",content:"Failed to delete school. Please try again.",duration:5e3})}finally{S(null)}};return n("div",{children:[n(le,{gutter:16,style:{marginBottom:"20px"},children:[e(Ae,{span:8,children:e(O,{children:e(K,{title:"Total Schools",value:l.length,precision:0,countUp:!0,styleValue:{color:"#165DFF"}})})}),e(Ae,{span:8,children:e(O,{children:e(K,{title:"Schools with Email",value:l.filter(r=>r.Email).length,precision:0,countUp:!0,styleValue:{color:"#00B42A"}})})}),e(Ae,{span:8,children:e(O,{children:e(K,{title:"Schools with Website",value:l.filter(r=>r.SchoolWebsite).length,precision:0,countUp:!0,styleValue:{color:"#FF7D00"}})})})]}),e(O,{style:{marginBottom:"16px"},bordered:!1,bodyStyle:{padding:"16px 20px"},children:e(w,{form:p,labelAlign:"left",layout:"inline",children:n(le,{justify:"space-between",align:"center",style:{width:"100%"},children:[n(P,{wrap:!0,children:[e(w.Item,{label:"School Name",field:"SchoolName",style:{marginBottom:0},children:e(G,{onKeyDown:$,onChange:b,allowClear:!0,placeholder:"Search by school name...",style:{width:"250px"}})}),n(P,{children:[e(C,{type:"primary",icon:e(me,{}),onClick:U,children:"Search"}),e(C,{icon:e(ie,{}),onClick:d,children:"Reset"})]})]}),e(C,{type:"primary",icon:e(Q,{}),onClick:R,size:"large",children:"Add School"})]})})}),e(O,{bordered:!1,children:e(re,{rowKey:"SchoolNumber",columns:z,data:l,loading:v,scroll:{x:1800},pagination:xe(N,u),border:{wrapper:!0,cell:!0},stripe:!0})}),e(de,{title:e("div",{style:{fontSize:"18px",fontWeight:600},children:c!=null&&c.SchoolNumber?"Edit School":"Add New School"}),visible:f,onCancel:()=>o(!1),footer:null,style:{maxWidth:"900px",width:"90%"},children:e(xt,{rowData:c,onOk:r=>{o(!1),U(),F.success({title:"Success",content:`School "${r}" has been ${c!=null&&c.SchoolNumber?"updated":"created"} successfully.`,duration:3e3})},onCancel:()=>{o(!1)}})})]})},We=w.Item,It=({rowData:l,onOk:m,onCancel:f})=>{const[o]=w.useForm(),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(0),[p,c]=a.exports.useState(!1),[A,N]=a.exports.useState([]);a.exports.useEffect(()=>{l!=null&&l.Id?(S(l.Id),console.log("rowData"),console.log(l),c(l.MarkAsDefault),o.setFieldsValue({...l})):(S(0),c(!1),o.resetFields()),u()},[l]);const u=async(T={})=>{g(!0),Ce.getActiveAll().then(z=>{N((z==null?void 0:z.data)||[])}).finally(()=>{g(!1)})},I=T=>{s>0?Ee.UpdateTeacher({...T,MarkAsDefault:p,Id:s}).then(z=>{z!=null&&z.data&&(B.success("success"),m())}).finally(()=>{g(!1)}):Ee.AddTeacher({...T,MarkAsDefault:p,Id:0}).then(z=>{z!=null&&z.data&&(B.success("success"),m())}).finally(()=>{g(!1)})},R=T=>{c(T)};return n(w,{form:o,onSubmit:I,labelAlign:"left",wrapperCol:{span:24},className:ge["search-form"],size:"small",children:[e(We,{label:"Teacher Name",field:"DeliverySpecialist",rules:[{required:!0,message:"Please enter"}],children:e(G,{placeholder:"Please enter"})}),e(w.Item,{label:"User",field:"UserId",children:e(q,{allowClear:!0,options:A.map(T=>({label:T.Name,value:T.Id})),placeholder:"please enter"})}),e(We,{label:"Mark As Default",field:"MarkAsDefault",children:e(Se,{checked:p,onChange:R})}),e(w.Item,{style:{textAlign:"center"},children:n(P,{children:[e(C,{type:"primary",htmlType:"submit",loading:v,children:"Submit"}),e(C,{onClick:f,children:"Cancel"})]})})]})},Ut=()=>{const[l,m]=a.exports.useState([]),[f,o]=a.exports.useState(!1),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(null),[p]=he(),[c,A]=a.exports.useState({}),[N,u]=a.exports.useState(be);a.exports.useEffect(()=>{I()},[]);const I=async(r={})=>{g(!0);try{const i=await Ee.getAll(r);m((i==null?void 0:i.data)||[]),u(h=>{var D;return{...h,total:((D=i==null?void 0:i.data)==null?void 0:D.length)||0}})}catch(i){console.error("Failed to load teachers:",i),F.error({title:"Error",content:"Failed to load teachers. Please try again.",duration:5e3})}finally{g(!1)}},R=()=>{A({}),o(!0)},T=r=>{A(r),o(!0)},z=[{title:"Name",dataIndex:"DeliverySpecialist",key:"DeliverySpecialist"},{title:"Is Default",dataIndex:"MarkAsDefault",render:(r,i)=>e(Se,{checked:i.MarkAsDefault,"aria-readonly":!0})},{title:"Operation",dataIndex:"Operation",render:(r,i)=>n(P,{children:[e(C,{type:"primary",size:"mini",onClick:h=>{h.stopPropagation(),T(i)},children:"Edit"}),e(ue,{focusLock:!0,title:"Confirm Deletion",content:`Are you sure you want to delete teacher "${i.DeliverySpecialist}"?`,onOk:()=>U(i.Id,i.DeliverySpecialist),children:e(C,{type:"primary",status:"danger",size:"mini",loading:s===i.Id,children:"Delete"})})]})}],U=async(r,i)=>{S(r);try{const h=await Ee.deleteTeacher({id:r});h!=null&&h.data&&(F.success({title:"Success",content:`Teacher "${i}" has been deleted successfully.`,duration:3e3}),I())}catch(h){console.error("Failed to delete teacher:",h),F.error({title:"Deletion Failed",content:"Failed to delete teacher. Please try again.",duration:5e3})}finally{S(null)}},b=()=>{const r=p.getFieldsValue();u(i=>({...i,current:1})),I(r)},d=a.exports.useMemo(()=>pe(()=>{b()},500),[]),$=()=>{p.resetFields(),u(r=>({...r,current:1})),I()},E=r=>{r.key==="Enter"&&b()};return n("div",{children:[e(w,{form:p,labelAlign:"left",layout:"inline",style:{marginBottom:"10px"},children:n(le,{justify:"space-between",align:"center",style:{width:"100%"},children:[n(P,{wrap:!0,children:[e(w.Item,{label:"Name",field:"DeliverySpecialist",children:e(G,{onKeyDown:E,onChange:d,allowClear:!0,placeholder:"Please enter"})}),n(P,{children:[e(C,{type:"primary",icon:e(me,{}),onClick:b,children:"Search"}),e(C,{icon:e(ie,{}),onClick:$,children:"Reset"})]})]}),e(C,{type:"primary",icon:e(Q,{}),onClick:R,children:"Add"})]})}),e(re,{rowKey:"Id",columns:z,data:l,loading:v,pagination:xe(N,u)}),e(de,{title:c!=null&&c.Id?"Edit Teacher":"Add Teacher",visible:f,onCancel:()=>o(!1),footer:null,children:e(It,{rowData:c,onOk:r=>{o(!1),b(),F.success({title:"Success",content:`Teacher "${r}" has been ${c!=null&&c.Id?"updated":"created"} successfully.`,duration:3e3})},onCancel:()=>{o(!1)}})})]})},Pe=w.Item,kt=({rowData:l,onOk:m,onCancel:f})=>{const[o]=w.useForm(),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(0),[p,c]=a.exports.useState(!1);a.exports.useEffect(()=>{l!=null&&l.Id?(S(l.Id),c(l.IsActive),o.setFieldsValue({...l})):(S(0),c(!1),o.resetFields(),o.setFieldValue("UserRole","User"))},[l]);const A=u=>{s>0?Ce.Update({...u,IsActive:p,Id:s}).then(I=>{I!=null&&I.data&&(B.success("success"),m(u.Name))}).finally(()=>{g(!1)}):Ce.Add({...u,IsActive:p,Id:0}).then(I=>{I!=null&&I.data&&(B.success("success"),m(u.Name))}).finally(()=>{g(!1)})},N=u=>{c(u)};return n(w,{form:o,onSubmit:A,labelAlign:"left",wrapperCol:{span:24},className:ge["search-form"],size:"small",children:[e(Pe,{label:"Name",field:"Name",rules:[{required:!0,message:"Please enter"}],children:e(G,{placeholder:"Please enter"})}),e(Pe,{label:"Email",field:"Email",rules:[{required:!0,message:"Please enter"}],children:e(G,{placeholder:"Please enter"})}),e(w.Item,{label:"User Role",field:"UserRole",rules:[{required:!0,message:"Please select a user role"}],children:e(q,{options:["Admin","User"],placeholder:"Select user role"})}),e(Pe,{label:"Active",field:"IsActive",children:e(Se,{checked:p,onChange:N})}),e(w.Item,{style:{textAlign:"center"},children:n(P,{children:[e(C,{type:"primary",htmlType:"submit",loading:v,children:"Submit"}),e(C,{onClick:f,children:"Cancel"})]})})]})},Ft=()=>{const[l,m]=a.exports.useState([]),[f,o]=a.exports.useState(!1),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(null),[p]=he(),[c,A]=a.exports.useState({}),[N,u]=a.exports.useState(be);a.exports.useEffect(()=>{I()},[]);const I=async(r={})=>{g(!0);try{const i=await Ce.getAll(r);m((i==null?void 0:i.data)||[]),u(h=>{var D;return{...h,total:((D=i==null?void 0:i.data)==null?void 0:D.length)||0}})}catch(i){console.error("Failed to load users:",i),F.error({title:"Error",content:"Failed to load users. Please try again.",duration:5e3})}finally{g(!1)}},R=()=>{A({}),o(!0)},T=r=>{A(r),o(!0)},z=async(r,i)=>{S(r);try{const h=await Ce.delete({id:r});h!=null&&h.data&&(F.success({title:"Success",content:`User "${i}" has been deleted successfully.`,duration:3e3}),I())}catch(h){console.error("Failed to delete user:",h),F.error({title:"Deletion Failed",content:"Failed to delete user. Please try again.",duration:5e3})}finally{S(null)}},U=[{title:"Name",dataIndex:"Name",key:"Name"},{title:"Email",dataIndex:"Email",key:"Email"},{title:"Role",dataIndex:"UserRole",key:"UserRole",render:r=>e("span",{style:{fontWeight:r==="Admin"?"bold":"normal",color:r==="Admin"?"#165DFF":"#4E5969"},children:r||"User"})},{title:"Active",dataIndex:"IsActive",render:(r,i)=>e(Se,{checked:i.IsActive,"aria-readonly":!0})},{title:"Operation",dataIndex:"Operation",render:(r,i)=>n(P,{children:[e(C,{type:"primary",size:"mini",onClick:h=>{h.stopPropagation(),T(i)},children:"Edit"}),e(ue,{focusLock:!0,title:"Confirm Deletion",content:`Are you sure you want to delete user "${i.Name}"?`,onOk:()=>z(i.Id,i.Name),children:e(C,{type:"primary",status:"danger",size:"mini",loading:s===i.Id,children:"Delete"})})]})}],b=()=>{const r=p.getFieldsValue();u(i=>({...i,current:1})),I(r)},d=a.exports.useMemo(()=>pe(()=>{b()},500),[]),$=()=>{p.resetFields(),u(r=>({...r,current:1})),I()},E=r=>{r.key==="Enter"&&b()};return n("div",{children:[e(w,{form:p,labelAlign:"left",layout:"inline",style:{marginBottom:"10px"},children:n(le,{justify:"space-between",align:"center",style:{width:"100%"},children:[n(P,{wrap:!0,children:[e(w.Item,{label:"Name",field:"Name",children:e(G,{onKeyDown:E,onChange:d,allowClear:!0,placeholder:"Please enter"})}),n(P,{children:[e(C,{type:"primary",icon:e(me,{}),onClick:b,children:"Search"}),e(C,{icon:e(ie,{}),onClick:$,children:"Reset"})]})]}),e(C,{type:"primary",icon:e(Q,{}),onClick:R,children:"Add"})]})}),e(re,{rowKey:"Id",columns:U,data:l,loading:v,pagination:xe(N,u)}),e(de,{title:c!=null&&c.Id?"Edit User":"Add User",visible:f,onCancel:()=>o(!1),footer:null,children:e(kt,{rowData:c,onOk:r=>{o(!1),b(),F.success({title:"Success",content:`User "${r}" has been ${c!=null&&c.Id?"updated":"created"} successfully.`,duration:3e3})},onCancel:()=>{o(!1)}})})]})},De=w.Item,Be=[{var:"{LearnerName}",description:"Full name of the learner"},{var:"{CourseName}",description:"Name of the course (if applicable)"}],wt=({rowData:l,onOk:m,onCancel:f})=>{const[o]=w.useForm(),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(0);a.exports.useState([]);const[p,c]=a.exports.useState("");a.exports.useState(!1);const[A,N]=a.exports.useState(!1),u=ye(U=>U.userInfo);a.exports.useEffect(()=>{l!=null&&l.id?(S(l.id),console.log("rowData"),console.log(l),o.setFieldsValue({...l}),I(l.Template||"")):(S(0),o.resetFields(),c(""))},[l]);const I=U=>{let b=U||"";b=b.replace(/{LearnerName}/g,"John Smith"),b=b.replace(/{CourseName}/g,"Introduction to Farming"),c(b)},R=U=>{I(U)},T=async()=>{try{await o.validate(["Subject","Template"]);const U=o.getFieldValue("Subject"),b=o.getFieldValue("Template");if(!(u!=null&&u.mail)){B.warning("Your email address is not available. Please check your profile.");return}N(!0);const d=await at.sendTestEmail({email:u.mail,subject:U,template:b});if((d==null?void 0:d.code)===0)F.success({title:"Test Email Sent",content:`A test email has been sent to ${u.mail}`,duration:3e3});else throw new Error((d==null?void 0:d.message)||"Failed to send test email")}catch(U){console.error("Error sending test email:",U),F.error({title:"Failed to Send Test Email",content:(U==null?void 0:U.message)||"Please try again.",duration:5e3})}finally{N(!1)}};return n(w,{form:o,onSubmit:U=>{g(!0),s>0?we.UpdateTemplate({...U,id:s}).then(b=>{(b==null?void 0:b.code)===0?(B.success((b==null?void 0:b.data)||"Template updated successfully"),m(U.Name)):B.error((b==null?void 0:b.message)||"Failed to update template")}).catch(b=>{console.error("Error updating template:",b),B.error("Failed to update template. Please try again.")}).finally(()=>{g(!1)}):we.AddTemplate({...U,id:0}).then(b=>{(b==null?void 0:b.code)===0?(B.success((b==null?void 0:b.data)||"Template created successfully"),m(U.Name)):B.error((b==null?void 0:b.message)||"Failed to create template")}).catch(b=>{console.error("Error creating template:",b),B.error("Failed to create template. Please try again.")}).finally(()=>{g(!1)})},labelAlign:"left",wrapperCol:{span:24},className:ge["search-form"],size:"small",children:[e(De,{label:"Name",field:"Name",rules:[{required:!0,message:"Template name is required"}],children:e(G,{placeholder:"e.g., Welcome Email, Invoice Reminder"})}),e(De,{label:"Category",field:"Category",rules:[{required:!1}],children:e(q,{placeholder:"Select a category",allowClear:!0,options:[{label:"General",value:"General"},{label:"Welcome",value:"Welcome"},{label:"Reminder",value:"Reminder"},{label:"Follow-up",value:"Follow-up"},{label:"Invoice",value:"Invoice"},{label:"Completion",value:"Completion"}]})}),e(De,{label:"Subject",field:"Subject",rules:[{required:!0,message:"Email subject is required"}],children:e(G,{placeholder:"e.g., Welcome to The Get Group!"})}),e(w.Item,{label:"Template",field:"Template",rules:[{required:!0,message:"Please enter"}],extra:e("div",{children:n(ee.Text,{type:"secondary",style:{fontSize:12},children:["Available variables: ",Be.map(U=>U.var).join(", ")]})}),children:e(G.TextArea,{allowClear:!0,style:{width:"100%"},placeholder:"Enter your email template here. Use {LearnerName} and {CourseName} as placeholders.",autoSize:{minRows:5,maxRows:10},onChange:U=>R(U)})}),e(ot,{type:"info",content:n("div",{children:[e(ee.Text,{bold:!0,children:"Available Template Variables:"}),e("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:Be.map((U,b)=>n("li",{children:[e(ee.Text,{code:!0,children:U.var})," - ",U.description]},b))})]}),style:{marginBottom:16}}),p&&e(w.Item,{label:"Live Preview",children:e(O,{style:{backgroundColor:"#f7f8fa",padding:"12px",borderRadius:"4px"},bordered:!0,children:e(ee.Text,{style:{whiteSpace:"pre-wrap"},children:p})})}),e(ke,{}),e(w.Item,{style:{textAlign:"center"},children:n(P,{children:[n(C,{type:"primary",htmlType:"submit",loading:v,children:[s>0?"Update":"Save"," Template"]}),e(C,{type:"outline",icon:e(dt,{}),loading:A,onClick:T,children:"Send Test Email"}),e(C,{onClick:f,children:"Cancel"})]})}),(u==null?void 0:u.mail)&&n(ee.Text,{type:"secondary",style:{display:"block",textAlign:"center",fontSize:12,marginTop:-8},children:["Test email will be sent to: ",u.mail]})]})},Et=()=>{const[l,m]=a.exports.useState([]),[f,o]=a.exports.useState(!1),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(null),[p]=he(),[c,A]=a.exports.useState({}),[N,u]=a.exports.useState(be),I=ye(h=>h.token),R=He.useRef(!0);a.exports.useEffect(()=>(R.current=!0,I&&T(),()=>{R.current=!1}),[I]);const T=async(h={})=>{var D;if(!!R.current){g(!0);try{const t=await we.getAllTemplateList(h);if(console.log("Email template response:",t),!R.current)return;(t==null?void 0:t.code)===0||(t==null?void 0:t.data)?(m((t==null?void 0:t.data)||[]),u(y=>{var k;return{...y,total:((k=t==null?void 0:t.data)==null?void 0:k.length)||0}})):(console.warn("Unexpected response structure:",t),m([]))}catch(t){if(console.error("Failed to load email templates - Full error:",t),console.error("Error details:",{message:t==null?void 0:t.message,response:t==null?void 0:t.response,status:(D=t==null?void 0:t.response)==null?void 0:D.status}),!R.current)return;F.error({title:"Error",content:`Failed to load email templates: ${(t==null?void 0:t.message)||"Unknown error"}`,duration:5e3})}finally{R.current&&g(!1)}}},z=()=>{A({}),o(!0)},U=h=>{A(h),o(!0)},b=[{title:"Name",dataIndex:"Name",key:"Name",width:200},{title:"Category",dataIndex:"Category",key:"Category",width:120,render:h=>h||"General"},{title:"Subject",dataIndex:"Subject",key:"Subject",width:250,render:h=>e(ee.Text,{ellipsis:{rows:1,showTooltip:!0},children:h})},{title:"Template",dataIndex:"Template",key:"Template",render:h=>e(ee.Text,{ellipsis:{rows:2,expandable:!0,symbol:"more"},style:{maxWidth:"400px"},children:h})},{title:"Operation",dataIndex:"Operation",width:180,render:(h,D)=>n(P,{children:[e(C,{type:"primary",size:"mini",onClick:t=>{t.stopPropagation(),U(D)},children:"Edit"}),e(ue,{focusLock:!0,title:"Confirm Deletion",content:`Are you sure you want to delete template "${D.Name}"?`,onOk:()=>d(D.id,D.Name),children:e(C,{type:"primary",status:"danger",size:"mini",loading:s===D.id,children:"Delete"})})]})}],d=async(h,D)=>{S(h);try{const t=await we.deleteEmailTemplate({id:h});t!=null&&t.data&&(F.success({title:"Success",content:`Email template "${D}" has been deleted successfully.`,duration:3e3}),T())}catch(t){console.error("Failed to delete email template:",t),F.error({title:"Deletion Failed",content:"Failed to delete email template. Please try again.",duration:5e3})}finally{S(null)}},$=()=>{const h=p.getFieldsValue();u(D=>({...D,current:1})),T(h)},E=a.exports.useMemo(()=>pe(()=>{$()},500),[]);a.exports.useEffect(()=>()=>{E.cancel()},[E]);const r=()=>{p.resetFields(),u(h=>({...h,current:1})),T()},i=h=>{h.key==="Enter"&&$()};return I?n("div",{children:[e(w,{form:p,labelAlign:"left",layout:"inline",style:{marginBottom:"10px"},children:n(le,{justify:"space-between",align:"center",style:{width:"100%"},children:[n(P,{wrap:!0,children:[e(w.Item,{label:"Name",field:"Name",children:e(G,{onKeyDown:i,onChange:E,allowClear:!0,placeholder:"Search by name",style:{width:200}})}),e(w.Item,{label:"Category",field:"Category",children:e(q,{onChange:E,allowClear:!0,placeholder:"All categories",style:{width:150},options:[{label:"All",value:""},{label:"General",value:"General"},{label:"Welcome",value:"Welcome"},{label:"Reminder",value:"Reminder"},{label:"Follow-up",value:"Follow-up"},{label:"Invoice",value:"Invoice"},{label:"Completion",value:"Completion"}]})}),n(P,{children:[e(C,{type:"primary",icon:e(me,{}),onClick:$,children:"Search"}),e(C,{icon:e(ie,{}),onClick:r,children:"Reset"})]})]}),e(C,{type:"primary",icon:e(Q,{}),onClick:z,children:"Add Template"})]})}),e(re,{rowKey:"id",columns:b,data:l,loading:v,pagination:xe(N,u)}),e(de,{title:c!=null&&c.id?"Edit Template":"Add Template",visible:f,onCancel:()=>o(!1),footer:null,children:e(wt,{rowData:c,onOk:h=>{o(!1),$(),F.success({title:"Success",content:`Email template "${h}" has been ${c!=null&&c.id?"updated":"created"} successfully.`,duration:3e3})},onCancel:()=>{o(!1)}})})]}):e("div",{style:{padding:"20px",textAlign:"center"},children:e("p",{children:"Please log in to access email templates."})})},{Title:je,Text:X}=ee,{Row:Nt,Col:Ue}=Ne,Lt=Xe.Item,At=q.Option,Tt=()=>{const[l,m]=a.exports.useState([]),[f,o]=a.exports.useState([]),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(!1),[p,c]=a.exports.useState(null),[A,N]=a.exports.useState([]),[u,I]=a.exports.useState(""),[R,T]=a.exports.useState("");a.exports.useEffect(()=>{z(),U()},[]);const z=async()=>{g(!0);try{const t=await fe.getGroups();(t==null?void 0:t.code)===0?m((t==null?void 0:t.data)||[]):F.error({title:"Error",content:"Failed to load microcredential groups.",duration:3e3})}catch(t){console.error("Failed to load groups:",t),F.error({title:"Error",content:"Failed to load microcredential groups.",duration:3e3})}finally{g(!1)}},U=async()=>{try{const t=await fe.getAvailableCourses();(t==null?void 0:t.code)===0&&o((t==null?void 0:t.data)||[])}catch(t){console.error("Failed to load courses:",t)}},b=()=>{c(null),N([]),I(""),T("jorgia@thegetgroup.co.nz"),S(!0)},d=t=>{c(t),N(t.Courses.map(y=>y.CourseID)),I(t.GroupName||""),T(t.NotificationEmail||"jorgia@thegetgroup.co.nz"),S(!0)},$=async()=>{if(A.length===0){B.warning("Please select at least one course");return}if(!u.trim()){B.warning("Please enter a group name");return}if(!R.trim()){B.warning("Please enter a notification email");return}try{if(p){const t=await fe.updateGroup(p.GroupId,{CourseIds:A,GroupName:u,NotificationEmail:R});(t==null?void 0:t.code)===0?(F.success({title:"Success",content:"Microcredential group updated successfully",duration:3e3}),S(!1),z(),U()):F.error({title:"Error",content:(t==null?void 0:t.message)||"Failed to update group",duration:3e3})}else{const t=await fe.createGroup({CourseIds:A,GroupName:u,NotificationEmail:R});(t==null?void 0:t.code)===0?(F.success({title:"Success",content:"Microcredential group created successfully",duration:3e3}),S(!1),z(),U()):F.error({title:"Error",content:(t==null?void 0:t.message)||"Failed to create group",duration:3e3})}}catch(t){console.error("Failed to save group:",t),F.error({title:"Error",content:"Failed to save microcredential group",duration:3e3})}},E=async t=>{try{const y=await fe.deleteGroup(t);(y==null?void 0:y.code)===0?(F.success({title:"Success",content:"Microcredential group deleted successfully",duration:3e3}),z(),U()):F.error({title:"Error",content:(y==null?void 0:y.message)||"Failed to delete group",duration:3e3})}catch(y){console.error("Failed to delete group:",y),F.error({title:"Error",content:"Failed to delete microcredential group",duration:3e3})}},r=t=>({1:"blue",2:"green",3:"orange",4:"red"})[t]||"gray",i=t=>{c(null),N(t.Courses.map(y=>y.CourseID)),I(`${t.GroupName} (Copy)`),T(t.NotificationEmail||"jorgia@thegetgroup.co.nz"),S(!0)},h=async()=>{try{const t=new Ze.Workbook,y=t.addWorksheet("Microcredential Groups");y.columns=[{header:"Group Name",key:"GroupName",width:40},{header:"Course Count",key:"CourseCount",width:15},{header:"Courses",key:"Courses",width:80}],y.getRow(1).font={bold:!0,size:12},y.getRow(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF165DFF"}},y.getRow(1).font={...y.getRow(1).font,color:{argb:"FFFFFFFF"}},l.forEach(_=>{const M=_.Courses.map(J=>`${J.CourseName} (Level ${J.CourseLevel})`).join("; ");y.addRow({GroupName:_.GroupName,CourseCount:_.Courses.length,Courses:M})}),y.autoFilter={from:"A1",to:"C1"};const k=await t.xlsx.writeBuffer(),L=new Blob([k],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),x=window.URL.createObjectURL(L),V=document.createElement("a");V.href=x,V.download=`Microcredential_Groups_${new Date().toISOString().split("T")[0]}.xlsx`,V.click(),window.URL.revokeObjectURL(x),F.success({title:"Export Successful",content:`${l.length} microcredential groups exported to Excel`,duration:3e3})}catch(t){console.error("Export error:",t),F.error({title:"Export Failed",content:"Failed to export microcredential groups. Please try again.",duration:3e3})}},D=a.exports.useMemo(()=>{const t=l.length,y=l.reduce((_,M)=>_+M.Courses.length,0),k=t>0?Math.round(y/t):0,L=l.reduce((_,M)=>_+M.Courses.filter(J=>J.CourseLevel===1).length,0),x=l.reduce((_,M)=>_+M.Courses.filter(J=>J.CourseLevel===2).length,0),V=l.reduce((_,M)=>_+M.Courses.filter(J=>J.CourseLevel===3).length,0);return{totalGroups:t,totalCourses:y,avgCoursesPerGroup:k,level1Courses:L,level2Courses:x,level3Courses:V}},[l]);return n("div",{style:{padding:"20px"},children:[n(Nt,{gutter:16,style:{marginBottom:20},children:[e(Ue,{span:6,children:e(O,{children:e(K,{title:"Total Groups",value:D.totalGroups,prefix:e(Fe,{}),styleValue:{color:"#0FC6C2"}})})}),e(Ue,{span:6,children:e(O,{children:e(K,{title:"Total Courses",value:D.totalCourses,groupSeparator:!0,styleValue:{color:"#165DFF"}})})}),e(Ue,{span:6,children:e(O,{children:e(K,{title:"Avg Courses/Group",value:D.avgCoursesPerGroup,suffix:"courses",styleValue:{color:"#722ED1"}})})}),e(Ue,{span:6,children:e(O,{children:e(K,{title:"Level 1-2 Courses",value:D.level1Courses+D.level2Courses,styleValue:{color:"#F77234"}})})})]}),n(O,{children:[n("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(je,{heading:4,children:"Microcredential Groups Management"}),n(P,{children:[e(C,{type:"outline",icon:e($e,{}),onClick:h,disabled:l.length===0,children:"Export to Excel"}),e(C,{type:"primary",icon:e(Q,{}),onClick:b,children:"Add New Group"}),e(C,{icon:e(ie,{}),onClick:()=>{z(),U()},children:"Refresh"})]})]}),e(X,{type:"secondary",style:{display:"block",marginBottom:"20px"},children:"Microcredential groups are collections of courses that students must complete together to earn a microcredential certificate. When a student completes all courses in a group, an email notification is automatically sent."}),v?e("div",{style:{textAlign:"center",padding:"50px"},children:"Loading..."}):l.length===0?e(Re,{icon:e(Fe,{style:{fontSize:64,color:"#165DFF"}}),description:n(P,{direction:"vertical",align:"center",children:[e("div",{style:{fontSize:16,fontWeight:500},children:"No microcredential groups found"}),e("div",{style:{color:"#86909C"},children:"Get started by creating your first microcredential group"}),e(C,{type:"primary",icon:e(Q,{}),onClick:b,style:{marginTop:10},children:"Add New Group"})]})}):e(Xe,{defaultActiveKey:["0"],expandIconPosition:"right",children:l.map((t,y)=>e(Lt,{header:e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:n(P,{children:[e(je,{heading:6,style:{margin:0},children:t.GroupName}),n(W,{color:"arcoblue",children:[t.Courses.length," Course",t.Courses.length!==1?"s":""]})]})}),name:String(y),extra:n(P,{onClick:k=>k.stopPropagation(),children:[e(C,{type:"text",size:"small",icon:e(it,{}),onClick:k=>{k.stopPropagation(),d(t)},children:"Edit"}),e(C,{type:"text",size:"small",icon:e(Ge,{}),onClick:k=>{k.stopPropagation(),i(t)},children:"Duplicate"}),e(ue,{title:"Are you sure you want to delete this microcredential group?",onOk:k=>{k==null||k.stopPropagation(),E(t.GroupId)},onCancel:k=>k==null?void 0:k.stopPropagation(),children:e(C,{type:"text",size:"small",status:"danger",icon:e(st,{}),onClick:k=>k.stopPropagation(),children:"Delete"})})]}),children:n("div",{style:{padding:"10px 20px"},children:[e("div",{style:{marginBottom:"12px",padding:"10px",backgroundColor:"#e8f4ff",borderRadius:"4px",borderLeft:"3px solid #165DFF"},children:n(P,{direction:"vertical",size:4,children:[n(X,{type:"secondary",style:{fontSize:"12px"},children:[e("strong",{children:"Notification Email:"})," ",t.NotificationEmail||"jorgia@thegetgroup.co.nz"]}),e(X,{type:"secondary",style:{fontSize:"11px"},children:"Email will be sent when students complete all courses in this group"})]})}),e(re,{columns:[{title:"Course Name",dataIndex:"CourseName",key:"CourseName"},{title:"Level",dataIndex:"CourseLevel",key:"CourseLevel",render:k=>n(W,{color:r(k),children:["Level ",k]})}],data:t.Courses,pagination:!1,rowKey:"CourseID",border:!1}),e("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#f7f8fa",borderRadius:"4px"},children:n(X,{type:"secondary",children:[e("strong",{children:"Note:"})," Students must complete ",n("strong",{children:["all ",t.Courses.length," courses"]})," in this group to be eligible for the microcredential certificate."]})})]})},t.GroupId))})]}),n(de,{title:p?"Edit Microcredential Group":"Create New Microcredential Group",visible:s,onOk:$,onCancel:()=>S(!1),autoFocus:!1,focusLock:!0,style:{width:"650px"},children:[e("div",{style:{marginBottom:"20px"},children:e(X,{children:"Configure the microcredential group settings, including the group name, notification email, and courses."})}),n("div",{style:{marginBottom:"16px"},children:[e(X,{bold:!0,children:"Group Name *"}),e(G,{placeholder:"Enter group name (e.g., GET Started Level 2)",value:u,onChange:t=>I(t),style:{width:"100%",marginTop:"8px"},allowClear:!0})]}),n("div",{style:{marginBottom:"16px"},children:[e(X,{bold:!0,children:"Notification Email *"}),e(G,{placeholder:"Enter notification email address",value:R,onChange:t=>T(t),style:{width:"100%",marginTop:"8px"},allowClear:!0}),e(X,{type:"secondary",style:{fontSize:"12px",display:"block",marginTop:"4px"},children:"Notifications will be sent to this email when students complete all courses in this group"})]}),n("div",{children:[e(X,{bold:!0,children:"Courses *"}),e(q,{mode:"multiple",placeholder:"Select courses that must be completed",value:A,onChange:t=>N(t),style:{width:"100%",marginTop:"8px"},allowClear:!0,children:f.map(t=>e(At,{value:t.CourseID,children:n(P,{children:[e("span",{children:t.CourseName}),n(W,{color:r(t.CourseLevel),size:"small",children:["Level ",t.CourseLevel]}),t.IsInGroup===1&&e(W,{color:"orange",size:"small",children:"Already in a group"})]})},t.CourseID))})]})]})]})},{Title:Bt,Text:Pt}=ee,Ke=Le.TabPane,qe=[{label:"Work & Life Skills",value:"Work & Life Skills"},{label:"Farming & Horticulture",value:"Farming & Horticulture"},{label:"Not Assigned",value:null}],Dt=()=>{const[l,m]=a.exports.useState([]),[f,o]=a.exports.useState([]),[v,g]=a.exports.useState(!1),[s,S]=a.exports.useState(null);a.exports.useEffect(()=>{p()},[]);const p=async()=>{g(!0);try{const[d,$]=await Promise.all([H.getCoursesWithCategories(),H.getUnitStandardsWithCategories()]);m((d==null?void 0:d.data)||[]),o(($==null?void 0:$.data)||[])}catch(d){console.error("Failed to load data:",d),F.error({title:"Error",content:"Failed to load courses and unit standards. Please try again.",duration:5e3})}finally{g(!1)}},c=async(d,$)=>{S({type:"course",id:d});try{const E=await H.updateCourseCategory({CourseID:d,CourseCategory:$});(E==null?void 0:E.code)===0&&(F.success({title:"Success",content:"Course category updated successfully",duration:3e3}),m(r=>r.map(i=>i.CourseID===d?{...i,CourseCategory:$}:i)))}catch(E){console.error("Failed to update course category:",E),F.error({title:"Update Failed",content:"Failed to update course category. Please try again.",duration:5e3})}finally{S(null)}},A=async(d,$)=>{S({type:"unit",id:d});try{const E=await H.updateUnitStandardCategory({UnitStandardID:d,USCategory:$});(E==null?void 0:E.code)===0&&(F.success({title:"Success",content:"Unit standard category updated successfully",duration:3e3}),o(r=>r.map(i=>i.UnitStandardID===d?{...i,USCategory:$}:i)))}catch(E){console.error("Failed to update unit standard category:",E),F.error({title:"Update Failed",content:"Failed to update unit standard category. Please try again.",duration:5e3})}finally{S(null)}},N=[{title:"Course Name",dataIndex:"CourseName",width:300},{title:"Level",dataIndex:"CourseLevel",width:80,render:d=>d||"-"},{title:"Credits",dataIndex:"CourseCredits",width:100,render:d=>d||"-"},{title:"Category",dataIndex:"CourseCategory",width:250,render:(d,$)=>e(q,{placeholder:"Select category",value:d||null,onChange:E=>c($.CourseID,E),loading:(s==null?void 0:s.type)==="course"&&(s==null?void 0:s.id)===$.CourseID,disabled:(s==null?void 0:s.type)==="course"&&(s==null?void 0:s.id)===$.CourseID,allowClear:!0,style:{width:"100%"},children:qe.map(E=>e(q.Option,{value:E.value,children:E.label},E.value||"none"))})},{title:"Current Status",dataIndex:"CourseCategory",width:180,render:d=>d?d==="Work & Life Skills"?e(W,{color:"blue",children:"Work & Life Skills"}):e(W,{color:"green",children:"Farming & Horticulture"}):e(W,{color:"gray",children:"Not Assigned"})}],u=[{title:"US Number",dataIndex:"US",width:120},{title:"Unit Standard Name",dataIndex:"USName",width:350},{title:"Level",dataIndex:"USLevel",width:80,render:d=>d||"-"},{title:"Credits",dataIndex:"USCredits",width:100,render:d=>d||"-"},{title:"Category",dataIndex:"USCategory",width:250,render:(d,$)=>e(q,{placeholder:"Select category",value:d||null,onChange:E=>A($.UnitStandardID,E),loading:(s==null?void 0:s.type)==="unit"&&(s==null?void 0:s.id)===$.UnitStandardID,disabled:(s==null?void 0:s.type)==="unit"&&(s==null?void 0:s.id)===$.UnitStandardID,allowClear:!0,style:{width:"100%"},children:qe.map(E=>e(q.Option,{value:E.value,children:E.label},E.value||"none"))})},{title:"Current Status",dataIndex:"USCategory",width:180,render:d=>d?d==="Work & Life Skills"?e(W,{color:"blue",children:"Work & Life Skills"}):e(W,{color:"green",children:"Farming & Horticulture"}):e(W,{color:"gray",children:"Not Assigned"})}],I=l.filter(d=>d.CourseCategory==="Work & Life Skills"),R=l.filter(d=>d.CourseCategory==="Farming & Horticulture"),T=l.filter(d=>!d.CourseCategory),z=f.filter(d=>d.USCategory==="Work & Life Skills"),U=f.filter(d=>d.USCategory==="Farming & Horticulture"),b=f.filter(d=>!d.USCategory);return n("div",{children:[n("div",{style:{marginBottom:16},children:[e(P,{children:e(C,{type:"primary",icon:e(ie,{}),onClick:p,loading:v,children:"Refresh"})}),e("div",{style:{marginTop:12},children:e(Pt,{type:"secondary",children:'Assign courses and unit standards to categories for the Remote Learner Registration form. Items assigned to "Work & Life Skills" will appear when users select that pathway, and items assigned to "Farming & Horticulture" will appear for that pathway.'})})]}),n(Le,{defaultActiveTab:"1",children:[n(Ke,{title:`Courses (${l.length})`,children:[e(O,{style:{marginBottom:16},children:n(P,{size:"large",children:[e("div",{children:n(W,{color:"blue",children:["Work & Life Skills: ",I.length]})}),e("div",{children:n(W,{color:"green",children:["Farming & Horticulture: ",R.length]})}),e("div",{children:n(W,{color:"gray",children:["Not Assigned: ",T.length]})})]})}),e(re,{columns:N,data:l,loading:v,pagination:{pageSize:20,showTotal:!0,showJumper:!0},rowKey:"CourseID",stripe:!0,border:!0})]},"1"),n(Ke,{title:`Unit Standards (${f.length})`,children:[e(O,{style:{marginBottom:16},children:n(P,{size:"large",children:[e("div",{children:n(W,{color:"blue",children:["Work & Life Skills: ",z.length]})}),e("div",{children:n(W,{color:"green",children:["Farming & Horticulture: ",U.length]})}),e("div",{children:n(W,{color:"gray",children:["Not Assigned: ",b.length]})})]})}),e(re,{columns:u,data:f,loading:v,pagination:{pageSize:20,showTotal:!0,showJumper:!0},rowKey:"UnitStandardID",stripe:!0,border:!0})]},"2")]})]})},ae=Le.TabPane;function jt(){return ye(l=>l.isAdmin),ye(l=>l.userInfo),ye(l=>l.token),e("div",{children:e(O,{bordered:!1,children:n(Le,{defaultActiveTab:"1",children:[e(ae,{title:"Courses",children:e(O,{children:e(Ct,{})})},"1"),e(ae,{title:"Unit Standards",children:e(O,{children:e(bt,{})})},"2"),e(ae,{title:"Schools",children:e(O,{children:e(vt,{})})},"3"),e(ae,{title:"Teachers",children:e(O,{children:e(Ut,{})})},"4"),e(ae,{title:"Users",children:e(O,{children:e(Ft,{})})},"5"),e(ae,{title:"Email Templates",children:e(O,{children:e(Et,{})})},"6"),e(ae,{title:"Microcredential Groups",children:e(O,{children:e(Tt,{})})},"7"),e(ae,{title:"Remote Registration Categories",children:e(O,{children:e(Dt,{})})},"8")]})})})}export{jt as default};
