import{R as K,r as u,u as Ae,k as w,q as se,j as o,v as It,aE as Yn,B as ge,aw as Gn,S as Me,aF as Kn,w as Jn,F as Ce,aG as Xn,aH as bt,aI as Pr,H as dn,aC as me,aD as he,Z as Pt,aJ as Qn,W as Ct,x as Be,aK as ea,az as ta,$ as ra,m as na,s as Kt,aL as aa,aM as oa,an as ia,af as la,a2 as qt,aN as sa,aO as ca,aP as ua,as as Rt,at as Et,aQ as da,aR as fa,aS as pa,aT as st,au as ma,aU as ha,ap as ga,aV as fn,aW as va,aX as ya,aY as ba,aZ as Ca,a_ as wa,a$ as xa,b0 as Sa,b1 as Ft,ax as wt,U as W,E as pn,b2 as Oa,L as S,J as ae,K as be,a8 as Fe,ag as De,Q as ie,b3 as mn,V as J,G as He,l as ye,M as B,ab as ct,O as Jt,ac as Nr,b4 as At,a7 as Ia,C as xt,ai as hn,b5 as gt,b6 as Pa,b7 as Na,ad as _a}from"./index.5c46b2c4.js";import{T as gn}from"./index.6fad1429.js";import{P as ka,R as vn}from"./index.8ad7a3ff.js";import{c as Wt,t as La}from"./teacher.5e7f4761.js";import{a as Xt,P as Qt,c as et,b as Ta}from"./communication.6d7cacab.js";import{h as ja}from"./moment.0f22a298.js";var Zt=globalThis&&globalThis.__assign||function(){return Zt=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Zt.apply(this,arguments)},Ra=globalThis&&globalThis.__rest||function(e,a){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r};function Ea(e,a){var r=u.exports.useContext(Ae).getPrefixCls,t=e.className,n=e.avatar,i=e.title,s=e.description,l=Ra(e,["className","avatar","title","description"]),p=r("list"),c=p+"-item-meta",g=!!n,y=!!(i||s);return w("div",{...Zt({ref:a},l,{className:se(c,t)}),children:[g&&o("div",{className:c+"-avatar",children:n}),y&&w("div",{className:c+"-content",children:[i&&o("div",{className:c+"-title",children:i}),s&&o("div",{className:c+"-description",children:s})]})]})}var yn=K.forwardRef(Ea);yn.displayName="ListItemMeta";var bn=yn,Bt=globalThis&&globalThis.__assign||function(){return Bt=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Bt.apply(this,arguments)},Fa=globalThis&&globalThis.__rest||function(e,a){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r},Aa={actionLayout:"horizontal"};function Ua(e,a){var r=u.exports.useContext(Ae),t=r.getPrefixCls,n=r.componentConfig,i=It(e,Aa,n&&n["List.Item"]),s=i.children,l=i.className,p=i.actions,c=i.extra,g=i.actionLayout,y=Fa(i,["children","className","actions","extra","actionLayout"]),x=t("list"),N=x+"-item",O=[],U=[];K.Children.forEach(s,function(C){C&&C.type&&C.type===bn?O.push(C):U.push(C)});var j=U.length?o("div",{className:N+"-content",children:U}):null,b=c?o("div",{className:N+"-extra-content",children:c}):null,T=p&&p.length?o("div",{className:N+"-action",children:p.map(function(C,f){return o("li",{children:C},N+"-action-"+f)})}):null;return w("div",{...Bt({role:"listitem",ref:a,className:se(N,l)},y),children:[w("div",{className:N+"-main",children:[O,j,g==="vertical"?T:null]}),g==="horizontal"?T:null,b]})}var $a=K.forwardRef(Ua),er=$a;er.displayName="ListItem";er.Meta=bn;var Ma=er,Ht=globalThis&&globalThis.__assign||function(){return Ht=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ht.apply(this,arguments)};function Da(e,a){if(e){Yn(e,Ht({block:"start",behavior:"instant",scrollMode:"if-needed"},a));var r=e.offsetHeight,t=e.getBoundingClientRect().height;if(a&&a.boundary&&r!==t){var n=ge(a.boundary)?a.boundary(e):a.boundary;n.scrollTop=Math.round(n.scrollTop*(r/t))}}}var Ne=globalThis&&globalThis.__assign||function(){return Ne=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ne.apply(this,arguments)},Va=globalThis&&globalThis.__rest||function(e,a){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r},Ut=globalThis&&globalThis.__read||function(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),n,i=[],s;try{for(;(a===void 0||a-- >0)&&!(n=t.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(s)throw s.error}}return i},_r=10,kr=1,za=["small","default","large"],qa={split:!0,bordered:!0,defaultCurrent:1,offsetBottom:0,throttleDelay:500};function Wa(e,a){var r=u.exports.useContext(Ae),t=r.getPrefixCls,n=r.loadingElement,i=r.size,s=r.renderEmpty,l=r.componentConfig,p=r.rtl,c=It(e,qa,l==null?void 0:l.List),g=c.style,y=c.wrapperStyle,x=c.className,N=c.wrapperClassName,O=c.children,U=O===void 0?[]:O,j=c.dataSource,b=j===void 0?[]:j,T=c.size,C=c.footer,f=c.header,d=c.pagination,v=c.bordered,P=c.split,k=c.render,h=c.grid,_=c.loading,I=c.hoverable,$=c.scrollLoading,L=c.paginationInFooter,F=c.offsetBottom,Z=c.throttleDelay,H=c.defaultCurrent,D=c.noDataElement,q=c.listRef,V=c.onReachBottom,R=c.onListScroll,Y=T||(za.indexOf(i)>-1?i:"default"),z=t("list"),oe=u.exports.useRef(null),re=u.exports.useRef(null),Q=u.exports.useRef(null),ve=u.exports.useRef(null),le=u.exports.useRef(!0),Ye=Ut(u.exports.useState(d&&typeof d=="object"&&(d.pageSize||d.defaultPageSize)||_r),2),Ve=Ye[0],nt=Ye[1],we=Ut(u.exports.useState(d&&typeof d=="object"&&(d.current||d.defaultCurrent)||kr),2),ze=we[0],qe=we[1],Oe=Ut(u.exports.useState(H),2),Ie=Oe[0],_e=Oe[1],ke=K.Children.count(U);u.exports.useImperativeHandle(q,function(){return{dom:oe.current,scrollIntoView:function(A,M){if(re.current)re.current.scrollTo({index:A,options:M});else if(ve.current){var G=ve.current.children[A];G&&Da(G,Ne({boundary:Q.current},M))}},getRootDOMNode:function(){return oe.current}}});var Le=c.virtualListProps?c.virtualListProps:c.height?{height:c.height}:void 0,de=Ne(Ne({pageSize:Ve,current:ze,total:b.length>0?b.length:ke},typeof d=="object"?d:{}),{onPageSizeChange:function(A,M){nt(A),d&&typeof d=="object"&&d.onPageSizeChange&&d.onPageSizeChange(A,M)},onChange:function(A,M){qe(A),d&&typeof d=="object"&&d.onChange&&d.onChange(A,M)}});de.current=Math.min(de.current,Math.ceil(de.total/de.pageSize));var Ge=!!(R||V),Ke=u.exports.useCallback(Gn(function(){if(R){R(Q.current);return}if(!!Q.current){var A=Q.current,M=A.scrollTop,G=A.scrollHeight,ne=A.clientHeight,te=G-(M+ne);Math.abs(te)<F+1?le.current&&(_e(Ie+1),V&&V(Ie+1),le.current=!1):le.current=!0}},Z),[Z,Ie,R,V]),Je=function(){var A=function(ne){var te=de.current,ue=de.pageSize,xe=(te-1)*ue;return d&&ne.length>xe?ne.slice(xe,xe+ue):ne},M=function(ne,te){var ue=A(ne);return te?ue.map(te):ue},G=function(ne,te){var ue=A(ne);if(h.column||h.span){for(var xe=[],Ue=h.gutter,ce=h.justify,at=h.align,ut=h.column,Se=Va(h,["gutter","justify","align","column"]),Xe=ut||Math.floor(24/h.span),Te=Se.span||Math.floor(24/Xe),je=0,dt=function(){var Re=je+Xe,We=~~(je/Xe);xe.push(o(bt,{className:z+"-row",gutter:Ue,justify:ce,align:at,children:ue.slice(je,Re).map(function(ft,pt){return o(Pr,{...Ne({key:We+"_"+pt,className:z+"-row-col"},Se,{span:Te}),children:te?te(ft,je+pt):ft})})},We)),je=Re};je<ue.length;)dt();return xe}return o(bt,{className:z+"-row",gutter:h.gutter,children:ue.map(function(Re,We){return o(Pr,{...Ne({className:z+"-row-col"},dn(h,["gutter"]),{key:We}),children:te?te(Re,We):Re})})})};return b.length>0&&k?h?G(b,k):M(b,k):ke>0?h?G(U):M(U):$?null:D||s("List")},m=function(){var A,M,G=Je(),ne=Le&&Le.threshold!==null&&Array.isArray(G),te=d?o(Kn,{...Ne({},de,{className:se(z+"-pagination",de&&de.className)})}):null,ue=L?te:null,xe=L?null:te,Ue=$!=null?o("div",{className:z+"-item "+z+"-scroll-loading",children:$}):null;return w("div",{ref:function(ce){a=ce,oe.current=a},style:y,className:se(z+"-wrapper",(A={},A[z+"-wrapper-rtl"]=p,A),N),children:[w("div",{...Ne({},Jn(c),{style:g,className:se(z,z+"-"+Y,(M={},M[z+"-no-border"]=!v,M[z+"-no-split"]=!P,M[z+"-hoverable"]=I,M[z+"-rtl"]=p,M),x),ref:function(ce){ne||(Q.current=ce)},onScroll:!ne&&Ge?Ke:void 0}),children:[f?o("div",{className:z+"-header",children:f}):null,ne?o(Ce,{children:o(Xn,{...Ne({role:"list",ref:function(ce){ce&&(re.current=ce,Q.current=ce.dom)},className:z+"-content "+z+"-virtual",data:Ue?G.concat(Ue):G,isStaticItemHeight:!1,onScroll:Ge?Ke:void 0},Le),children:function(ce){return ce}})}):w("div",{role:"list",className:z+"-content",ref:ve,children:[G,Ue]}),C||ue?w("div",{className:z+"-footer",children:[C,ue]}):null]}),xe]})};return"loading"in c?o(Me,{style:{display:"block"},loading:_,element:n||o(Me,{}),children:m()}):m()}var tr=K.forwardRef(Wa);tr.displayName="List";tr.Item=Ma;var Lr=tr,ee={init:"init",uploading:"uploading",success:"done",fail:"error"};function Tr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function jr(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Tr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Za(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=jr(jr({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-upload")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,o("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:o("path",{d:"M14.93 17.071 24.001 8l9.071 9.071m-9.07 16.071v-25M40 35v6H8v-6"})})}var rr=K.forwardRef(Za);rr.defaultProps={isIcon:!0};rr.displayName="IconUpload";var Nt=rr;function Rr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function Er(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Rr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ba(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=Er(Er({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-play-arrow-fill")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,o("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:o("path",{fill:"currentColor",stroke:"none",d:"M17.533 10.974a1 1 0 0 0-1.537.844v24.356a1 1 0 0 0 1.537.844L36.67 24.84a1 1 0 0 0 0-1.688L17.533 10.974Z"})})}var nr=K.forwardRef(Ba);nr.defaultProps={isIcon:!0};nr.displayName="IconPlayArrowFill";var Ha=nr;function Fr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function Ar(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Fr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ya(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=Ar(Ar({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-pause")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,w("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:[o("path",{d:"M14 12H18V36H14z"}),o("path",{d:"M30 12H34V36H30z"}),o("path",{fill:"currentColor",stroke:"none",d:"M14 12H18V36H14z"}),o("path",{fill:"currentColor",stroke:"none",d:"M30 12H34V36H30z"})]})}var ar=K.forwardRef(Ya);ar.defaultProps={isIcon:!0};ar.displayName="IconPause";var Ga=ar,tt=globalThis&&globalThis.__assign||function(){return tt=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},tt.apply(this,arguments)},Ka=function(e){var a=Pt(),r=e.file,t=e.prefixCls,n=e.progressProps,i=e.progressRender,s=u.exports.useContext(Ae).locale,l=r.status,p=r.percent,c=p===void 0?0:p,g=t+"-list",y=n&&n.width?{width:n.width}:{},x=w(Ce,{children:[l===ee.fail&&e.reuploadIcon!==null&&o("span",{...tt({className:t+"-list-reupload-icon",onClick:function(){e.onReupload&&e.onReupload(r)},tabIndex:0,role:"button","aria-label":s.Upload.reupload},a({onPressEnter:function(){e.onReupload&&e.onReupload(r)}})),children:e.reuploadIcon||(e.listType==="picture-card"?o(Nt,{}):s.Upload.reupload)}),l===ee.success&&e.successIcon!==null&&o("span",{className:t+"-list-success-icon",children:e.successIcon||o(Qn,{})}),l!==ee.success&&w("div",{className:g+"-status",style:y,children:[o(ka,{...tt({showText:!1,className:g+"-progress",type:"circle",status:l===ee.fail?"error":l===ee.success?"success":"normal",percent:c,size:"mini"},n)}),l===ee.init&&e.startIcon!==null&&o("span",{...tt({tabIndex:0,role:"button","aria-label":s.Upload.start,className:t+"-list-start-icon",onClick:function(){e.onUpload&&e.onUpload(r)}},a({onPressEnter:function(){e.onUpload&&e.onUpload(r)}})),children:e.startIcon||o(Ct,{content:s.Upload.start,children:o(Ha,{})})}),l===ee.uploading&&e.cancelIcon!==null&&o("span",{...tt({className:e.prefixCls+"-list-cancel-icon",onClick:function(){e.onAbort&&e.onAbort(r)},tabIndex:0,"aria-label":s.Upload.cancel},a({onPressEnter:function(){e.onAbort&&e.onAbort(r)}})),children:e.cancelIcon||o(Ct,{content:s.Upload.cancel,children:o(Ga,{})})})]})]});return ge(i)?i(r,x):x},Cn=Ka;function Ur(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function $r(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ur(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ja(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=$r($r({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-image-close")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,w("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:[o("path",{d:"M41 26V9a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v30a2 2 0 0 0 2 2h17"}),o("path",{d:"m24 33 9-8.5V27s-2 1-3.5 2.5C27.841 31.159 27 33 27 33h-3Zm0 0-3.5-4.5L17 33h7Z"}),o("path",{fill:"currentColor",stroke:"none",d:"M20.5 28.5 17 33h7l-3.5-4.5ZM33 24.5 24 33h3s.841-1.841 2.5-3.5C31 28 33 27 33 27v-2.5Z"}),o("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M46 38a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-4.95-4.782 1.74 1.74-3.045 3.046 3.046 3.046-1.74 1.74-3.047-3.045-3.046 3.046-1.74-1.74 3.046-3.047-3.046-3.046 1.74-1.74 3.046 3.046 3.046-3.046Z",clipRule:"evenodd"}),o("path",{d:"M17 15h-2v2h2v-2Z"})]})}var or=K.forwardRef(Ja);or.defaultProps={isIcon:!0};or.displayName="IconImageClose";var Xa=or,rt=globalThis&&globalThis.__assign||function(){return rt=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},rt.apply(this,arguments)},Qa=function(e,a){var r=e.disabled,t=e.prefixCls,n=e.file,i=e.showUploadList,s=e.locale,l=Pt(),p=t+"-list-item-picture",c=n.status,g=n.originFile,y=n.url!==void 0?n.url:g&&ge(URL.createObjectURL)&&URL.createObjectURL(g),x=Be(i)?i:{};return o("div",{className:p,ref:a,children:c===ee.uploading?o(Cn,{...rt({onReupload:e.onReupload,onUpload:e.onUpload,onAbort:e.onAbort,listType:"picture-card",file:n,prefixCls:t,progressProps:e.progressProps},x)}):w(Ce,{children:[ge(x.imageRender)?x.imageRender(n):o("img",{src:y,alt:n.name}),w("div",{className:p+"-mask",role:"radiogroup",children:[n.status===ee.fail&&o("div",{className:p+"-error-tip",children:x.errorIcon!==null&&o("span",{className:t+"-list-error-icon",children:x.errorIcon||o(Xa,{})})}),w("div",{className:p+"-operation",children:[n.status!==ee.fail&&x.previewIcon!==null&&o("span",{...rt({className:t+"-list-preview-icon",tabIndex:0,role:"button","aria-label":s.Upload.preview},l({onPressEnter:function(){e.onPreview&&e.onPreview(n)}}),{onClick:function(){e.onPreview&&e.onPreview(n)}}),children:x.previewIcon||o(ea,{})}),n.status===ee.fail&&x.reuploadIcon!==null&&o("span",{...rt({className:e.prefixCls+"-list-reupload-icon",onClick:function(){e.onReupload&&e.onReupload(n)},tabIndex:0,role:"button","aria-label":s.Upload.reupload},l({onPressEnter:function(){e.onReupload&&e.onReupload(n)}})),children:x.reuploadIcon||o(Nt,{})}),!r&&x.removeIcon!==null&&o("span",{...rt({className:t+"-list-remove-icon",onClick:function(){e.onRemove&&e.onRemove(n)},role:"button","aria-label":s.Upload.delete,tabIndex:0},l({onPressEnter:function(){e.onRemove&&e.onRemove(n)}})),children:x.removeIcon||o(Xt,{})})]})]})]})})},eo=u.exports.forwardRef(Qa);function Mr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function Dr(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Mr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function to(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=Dr(Dr({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-file-pdf")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,w("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:[o("path",{d:"M11 42h26a2 2 0 0 0 2-2V13.828a2 2 0 0 0-.586-1.414l-5.828-5.828A2 2 0 0 0 31.172 6H11a2 2 0 0 0-2 2v32a2 2 0 0 0 2 2Z"}),o("path",{d:"M22.305 21.028c.874 1.939 3.506 6.265 4.903 8.055 1.747 2.237 3.494 2.685 4.368 2.237.873-.447 1.21-4.548-7.425-2.685-7.523 1.623-7.424 3.58-6.988 4.476.728 1.193 2.522 2.627 5.678-6.266C25.699 18.79 24.489 17 23.277 17c-1.409 0-2.538.805-.972 4.028Z"})]})}var ir=K.forwardRef(to);ir.defaultProps={isIcon:!0};ir.displayName="IconFilePdf";var ro=ir;function Vr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function zr(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Vr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function no(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=zr(zr({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-file-image")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,o("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:o("path",{d:"m26 33 5-6v6h-5Zm0 0-3-4-4 4h7Zm11 9H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2ZM17 19h1v1h-1v-1Z"})})}var lr=K.forwardRef(no);lr.defaultProps={isIcon:!0};lr.displayName="IconFileImage";var wn=lr;function qr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function Wr(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?qr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ao(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=Wr(Wr({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-file-video")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,w("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:[o("path",{d:"M37 42H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2Z"}),o("path",{d:"M22 27.796v-6l5 3-5 3Z"})]})}var sr=K.forwardRef(ao);sr.defaultProps={isIcon:!0};sr.displayName="IconFileVideo";var oo=sr;function Zr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function Br(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Zr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function io(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=Br(Br({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-file-audio")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,w("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:[o("path",{d:"M37 42H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2Z"}),o("path",{fill:"currentColor",stroke:"none",d:"M25 30a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),o("path",{d:"M25 30a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm0 0-.951-12.363a.5.5 0 0 1 .58-.532L30 18"})]})}var cr=K.forwardRef(io);cr.defaultProps={isIcon:!0};cr.displayName="IconFileAudio";var lo=cr,lt=globalThis&&globalThis.__assign||function(){return lt=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},lt.apply(this,arguments)},so=function(e){var a="";if(e.originFile&&e.originFile.type)a=e.originFile.type;else{var r=e.name||"",t=r.split(".").pop()||"";a=t,["png","jpg","jpeg","bmp","gif"].indexOf(t)>-1?a="image":["mp4","m2v","mkv"].indexOf(t)>-1?a="video":["mp3","wav","wmv"].indexOf(t)>-1&&(a="audio")}return a.indexOf("image")>-1?wn:a.indexOf("pdf")>-1?ro:a.indexOf("audio")>-1?lo:a.indexOf("video")>-1?oo:na},co=function(e,a){var r=e.prefixCls,t=e.disabled,n=e.file,i=e.locale,s=r+"-list-item-text",l=Pt(),p=so(n),c=Be(e.showUploadList)?e.showUploadList:{},g=Be(c)?c:{},y=n.name||n.originFile&&n.originFile.name,x=n.url!==void 0?n.url:n.originFile&&ge(URL.createObjectURL)&&URL.createObjectURL(n.originFile),N={};return n.status!==ee.fail&&(N={popupVisible:!1}),w("div",{className:r+"-list-item "+r+"-list-item-"+n.status,ref:a,children:[w("div",{className:s,children:[e.listType==="picture-list"&&o("div",{className:s+"-thumbnail",children:ge(c.imageRender)?c.imageRender(n):o("img",{src:x})}),w("div",{className:s+"-content",children:[w("div",{className:s+"-name",children:[e.listType==="text"&&g.fileIcon!==null&&o("span",{className:r+"-list-file-icon",children:g.fileIcon||o(p,{})}),ge(c.fileName)?o("span",{className:s+"-name-text",children:c.fileName(n)}):n.url?o("a",{href:n.url,target:"_blank",rel:"noreferrer",className:s+"-name-link",children:y}):o("span",{className:s+"-name-text",children:y}),n.status===ee.fail&&g.errorIcon!==null&&o(Ct,{...lt({content:(typeof n.response=="object"?u.exports.isValidElement(n.response)&&n.response:n.response)||i.Upload.error},N,{disabled:n.status!==ee.fail}),children:o("span",{className:e.prefixCls+"-list-error-icon",children:g.errorIcon||(e.listType==="picture-card"?o(wn,{}):o(ta,{}))})})]}),o(Cn,{...lt({file:n,prefixCls:r,progressProps:e.progressProps,onReupload:e.onReupload,onUpload:e.onUpload,onAbort:e.onAbort},g)})]})]}),o("div",{className:r+"-list-item-operation",children:!t&&g.removeIcon!==null&&o(ra,{...lt({className:r+"-list-remove-icon-hover",onClick:function(){e.onRemove&&e.onRemove(n)},tabIndex:0,"aria-label":i.Upload.delete},l({onPressEnter:function(){e.onRemove&&e.onRemove(n)}})),children:o("span",{className:r+"-list-remove-icon",children:g.removeIcon||o(Xt,{})})})})]})},uo=u.exports.forwardRef(co);function Hr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function Yr(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Hr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fo(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=Yr(Yr({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-zoom-out")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,o("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:o("path",{d:"M32.607 32.607A14.953 14.953 0 0 0 37 22c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 4.142 0 7.892-1.679 10.607-4.393Zm0 0L41.5 41.5M29 22H15"})})}var ur=K.forwardRef(fo);ur.defaultProps={isIcon:!0};ur.displayName="IconZoomOut";var po=ur;function Gr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function Kr(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Gr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mo(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=Kr(Kr({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-zoom-in")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,o("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:o("path",{d:"M32.607 32.607A14.953 14.953 0 0 0 37 22c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 4.142 0 7.892-1.679 10.607-4.393Zm0 0L41.5 41.5M29 22H15m7 7V15"})})}var dr=K.forwardRef(mo);dr.defaultProps={isIcon:!0};dr.displayName="IconZoomIn";var ho=dr;function Jr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function Xr(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Jr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function go(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=Xr(Xr({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-fullscreen")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,o("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:o("path",{d:"M42 17V9a1 1 0 0 0-1-1h-8M6 17V9a1 1 0 0 1 1-1h8m27 23v8a1 1 0 0 1-1 1h-8M6 31v8a1 1 0 0 0 1 1h8"})})}var fr=K.forwardRef(go);fr.defaultProps={isIcon:!0};fr.displayName="IconFullscreen";var vo=fr;function Qr(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function en(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Qr(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yo(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=en(en({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-rotate-left")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,o("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:o("path",{d:"M10 22a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H11a1 1 0 0 1-1-1V22ZM23 11h11a6 6 0 0 1 6 6v6M22.5 12.893 19.587 11 22.5 9.107v3.786Z"})})}var pr=K.forwardRef(yo);pr.defaultProps={isIcon:!0};pr.displayName="IconRotateLeft";var bo=pr;function tn(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function rn(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?tn(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Co(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=rn(rn({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-rotate-right")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,o("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:o("path",{d:"M38 22a1 1 0 0 0-1-1H17a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V22ZM25 11H14a6 6 0 0 0-6 6v6M25.5 12.893 28.413 11 25.5 9.107v3.786Z"})})}var mr=K.forwardRef(Co);mr.defaultProps={isIcon:!0};mr.displayName="IconRotateRight";var wo=mr;function nn(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function an(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?nn(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xo(e,a){var r=u.exports.useContext(me),t=r.prefixCls,n=t===void 0?"arco":t,i=e.spin,s=e.className,l=an(an({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(s?s+" ":"").concat(n,"-icon ").concat(n,"-icon-original-size")});return i&&(l.className="".concat(l.className," ").concat(n,"-icon-loading")),delete l.spin,delete l.isIcon,w("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...l,children:[o("path",{d:"m5.5 11.5 5-2.5h1v32M34 11.5 39 9h1v32"}),o("path",{fill:"currentColor",stroke:"none",d:"M24 17h1v1h-1v-1ZM24 30h1v1h-1v-1Z"}),o("path",{d:"M24 17h1v1h-1v-1ZM24 30h1v1h-1v-1Z"})]})}var hr=K.forwardRef(xo);hr.defaultProps={isIcon:!0};hr.displayName="IconOriginalSize";var So=hr,Oo=globalThis&&globalThis.__read||function(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),n,i=[],s;try{for(;(a===void 0||a-- >0)&&!(n=t.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(s)throw s.error}}return i};function Io(e){var a=Oo(u.exports.useState(e),2),r=a[0],t=a[1],n=r==="beforeLoad",i=r==="loading",s=r==="error",l=r==="loaded",p=r==="lazyload";return{status:r,isBeforeLoad:n,isLoading:i,isError:s,isLoaded:l,isLazyLoad:p,setStatus:t}}var xn=[25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500],Po=function(){function e(a){this.updateScale(a)}return Object.defineProperty(e.prototype,"scales",{get:function(){return this.scaleAttr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minScale",{get:function(){return this.scaleAttr[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScale",{get:function(){return this.scaleAttr[this.scaleAttr.length-1]},enumerable:!1,configurable:!0}),e.prototype.updateScale=function(a){var r=xn;if(Kt(a)&&a.filter(function(s){return s>0}).length&&(r=a.filter(function(s){return s>0})),r=r.map(function(s){return+(s/100).toFixed(2)}),!r.includes(1)){var t=this.findClosestIndex(1,r),n=r[t],i=n<1?t+1:t;r.splice(i,0,1)}this.scaleAttr=r},e.prototype.findClosestIndex=function(a,r){if(r===void 0&&(r=this.scaleAttr),!!r.length){if(r.length===1)return 0;for(var t=r.length-1,n=0;n<r.length;n++){var i=r[n];if(a===i){t=n;break}if(a<i){var s=r[n-1];t=s===void 0||Math.abs(s-a)<=Math.abs(i-a)?n-1:n;break}}return t}},e.prototype.getNextScale=function(a,r){r===void 0&&(r="zoomIn");var t=this.scaleAttr.indexOf(a);return t===-1&&(t=this.findClosestIndex(a)),r==="zoomIn"?t===this.scaleAttr.length-1?a:this.scaleAttr[t+1]:t===0?a:this.scaleAttr[t-1]},e}(),No=Po;function _o(e,a,r,t,n){var i=r,s=t;return r&&(e.width>a.width?i=0:(a.left>e.left&&(i-=Math.abs(e.left-a.left)/n),a.right<e.right&&(i+=Math.abs(e.right-a.right)/n))),t&&(e.height>a.height?s=0:(a.top>e.top&&(s-=Math.abs(e.top-a.top)/n),a.bottom<e.bottom&&(s+=Math.abs(e.bottom-a.bottom)/n))),[i,s]}var ko=function(e){var a=e.style,r=e.className,t=e.prefixCls,n=e.popup,i=e.children,s=se(t+"-trigger",r);return K.createElement(aa,{style:a,className:s,popup:n,showArrow:!0},i)},Yt=globalThis&&globalThis.__assign||function(){return Yt=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Yt.apply(this,arguments)},Lo=globalThis&&globalThis.__rest||function(e,a){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r},$t=globalThis&&globalThis.__read||function(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),n,i=[],s;try{for(;(a===void 0||a-- >0)&&!(n=t.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(s)throw s.error}}return i},Mt=globalThis&&globalThis.__spreadArray||function(e,a,r){if(r||arguments.length===2)for(var t=0,n=a.length,i;t<n;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return e.concat(i||Array.prototype.slice.call(a))},To=function(e,a){var r,t=e.prefixCls,n=e.previewPrefixCls,i=e.simple,s=i===void 0?!1:i,l=e.actions,p=l===void 0?[]:l,c=e.actionsLayout,g=c===void 0?[]:c,y=e.defaultActions,x=y===void 0?[]:y,N=new Set(g),O=function(d){return N.has(d.key)},U=Mt(Mt([],$t(x.filter(O)),!1),$t(p.filter(O)),!1),j=p.filter(function(d){return!N.has(d.key)}),b=U.sort(function(d,v){var P=g.indexOf(d.key),k=g.indexOf(v.key);return P>k?1:-1});if(N.has("extra")){var T=g.indexOf("extra");b.splice.apply(b,Mt([T,0],$t(j),!1))}var C=function(d,v){var P;v===void 0&&(v=!1);var k=d.content,h=d.disabled,_=d.key,I=d.name,$=d.getContainer,L=d.onClick,F=Lo(d,["content","disabled","key","name","getContainer","onClick"]),Z=w("div",{...Yt({className:se(n+"-toolbar-action",(P={},P[n+"-toolbar-action-disabled"]=h,P)),key:_,onClick:function(H){!h&&L&&L(H)},onMouseDown:function(H){H.preventDefault()}},F),children:[k&&o("span",{className:n+"-toolbar-action-content",children:k}),v&&I&&o("span",{className:n+"-toolbar-action-name",children:I})]});return $?$(Z):Z};if(!b.length)return null;var f=b.map(function(d){var v=C(d,s);return!s&&d.name&&!d.getContainer?o(Ct,{content:d.name,children:v},d.key):v});return w("div",{ref:a,className:se(n+"-toolbar",(r={},r[n+"-toolbar-simple"]=s,r),e.className),style:e.style,children:[s&&o(ko,{prefixCls:t,className:n+"-trigger",popup:function(){return o("div",{children:f})},children:C({key:"trigger",content:o("span",{children:o(oa,{})})})}),!s&&f]})},jo=u.exports.forwardRef(To),Sn=u.exports.createContext({previewGroup:!1,previewUrlMap:new Map,previewPropsMap:new Map,infinite:!0,currentIndex:0,setCurrentIndex:function(){return null},setPreviewUrlMap:function(){return null},registerPreviewUrl:function(){return null},registerPreviewProps:function(){return null},visible:!1,handleVisibleChange:function(){return null}});function Ro(e){var a,r,t=e.current,n=e.previewCount,i=e.infinite,s=i===void 0?!1:i,l=e.onPrev,p=e.onNext,c=u.exports.useContext(Ae).getPrefixCls,g=c("image-preview"),y=se(g+"-arrow"),x=!s&&t<=0,N=!s&&t>=n-1;return w("div",{className:y,children:[o("div",{className:se(g+"-arrow-left",(a={},a[g+"-arrow-disabled"]=x,a)),onClick:function(O){O.preventDefault(),!x&&(l==null||l())},children:o(ia,{})}),o("div",{className:se(g+"-arrow-right",(r={},r[g+"-arrow-disabled"]=N,r)),onClick:function(O){O.preventDefault(),!N&&(p==null||p())},children:o(la,{})})]})}var $e=globalThis&&globalThis.__assign||function(){return $e=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},$e.apply(this,arguments)},Eo=globalThis&&globalThis.__rest||function(e,a){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r},Pe=globalThis&&globalThis.__read||function(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),n,i=[],s;try{for(;(a===void 0||a-- >0)&&!(n=t.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(s)throw s.error}}return i},Dt=90,Fo={maskClosable:!0,closable:!0,breakPoint:316,actionsLayout:["fullScreen","rotateRight","rotateLeft","zoomIn","zoomOut","originalSize","extra"],getPopupContainer:function(){return document.body},escToExit:!0,scales:xn,resetTranslate:!0};function Ao(e,a){var r,t=u.exports.useContext(Sn),n=t.previewGroup,i=t.previewUrlMap,s=t.currentIndex,l=t.setCurrentIndex,p=t.infinite,c=t.previewPropsMap,g=n?c.get(s):{},y=It(e,Fo,g),x=y.className,N=y.style,O=y.src,U=y.defaultVisible,j=y.maskClosable,b=y.closable,T=y.breakPoint,C=y.actions,f=y.actionsLayout,d=y.getPopupContainer,v=y.onVisibleChange,P=y.scales,k=y.escToExit,h=y.imgAttributes,_=h===void 0?{}:h,I=y.imageRender,$=y.extra,L=$===void 0?null:$,F=y.resetTranslate,Z=n?i.get(s):O,H=Pe(u.exports.useState(Z),2),D=H[0],q=H[1],V=Pe(qt(!1,{defaultValue:U,value:y.visible}),2),R=V[0],Y=V[1],z=u.exports.useContext(Ae),oe=z.getPrefixCls,re=z.locale,Q=z.rtl,ve=oe("image"),le=ve+"-preview",Ye=se(le,(r={},r[le+"-hide"]=!R,r[le+"-rtl"]=Q,r),x),Ve=u.exports.useRef(),nt=u.exports.useRef(),we=u.exports.useRef(),ze=u.exports.useRef(),qe=u.exports.useRef(!1),Oe=u.exports.useRef({pageX:0,pageY:0,originX:0,originY:0}),Ie=Io("loading"),_e=Ie.isLoading,ke=Ie.isLoaded,Le=Ie.setStatus,de=Pe(u.exports.useState(!1),2),Ge=de[0],Ke=de[1],Je=Pe(u.exports.useState({x:0,y:0}),2),m=Je[0],A=Je[1],M=Pe(u.exports.useState(1),2),G=M[0],ne=M[1],te=Pe(u.exports.useState(!1),2),ue=te[0],xe=te[1],Ue=Pe(u.exports.useState(0),2),ce=Ue[0],at=Ue[1],ut=Pe(u.exports.useState(!1),2),Se=ut[0],Xe=ut[1],Te=u.exports.useMemo(function(){return new No(P)},[]),je=_.onLoad,dt=_.onError,Re=_.onMouseDown,We=_.style,ft=_.className,pt=Eo(_,["onLoad","onError","onMouseDown","style","className"]);function _t(){A({x:0,y:0}),ne(1),at(0)}u.exports.useImperativeHandle(a,function(){return{reset:_t,getRootDOMNode:function(){return ze.current}}});var vr=Pe(u.exports.useState(),2),mt=vr[0],Ln=vr[1],yr=u.exports.useCallback(function(){return mt},[mt]);u.exports.useEffect(function(){var E=d==null?void 0:d(),X=sa(E)||document.body;Ln(X)},[d]),ca(yr,{hidden:R});var Tn=u.exports.useMemo(function(){return!ua&&mt===document.body},[mt]);function br(E){var X=i.size;p&&(E%=X,E<0&&(E=X-Math.abs(E))),E!==s&&E>=0&&E<=X-1&&l(E)}function Cr(){br(s-1)}function wr(){br(s+1)}function jn(){at(ce===0?360-Dt:ce-Dt)}function Rn(){at((ce+Dt)%360)}var kt=u.exports.useRef(null),En=function(){!ue&&xe(!0),kt.current&&clearTimeout(kt.current),kt.current=setTimeout(function(){xe(!1)},1e3)},ht=function(E){G!==E&&(ne(E),En())};function Lt(){var E=Te.getNextScale(G,"zoomIn");ht(E)}function Tt(){var E=Te.getNextScale(G,"zoomOut");ht(E)}function Fn(E){E.deltaY>0?G>=Te.minScale&&Tt():G<=Te.maxScale&&Lt()}function An(){ht(1)}function Un(){var E=we.current.getBoundingClientRect(),X=Ve.current.getBoundingClientRect(),fe=E.height/(X.height/G),Ee=E.width/(X.width/G),Qe=Math.max(fe,Ee);ht(Qe)}function xr(E){E.target===E.currentTarget&&j&&jt()}function $n(){jt()}function jt(){R&&(v&&v(!1,R),fn(y.visible)&&Y(!1))}function Mn(E){if(E&&E.length){var X=E[0].contentRect,fe=X.width<T;Ke(fe)}}var Sr=function(){if(!(!we.current||!Ve.current)){var E=we.current.getBoundingClientRect(),X=Ve.current.getBoundingClientRect(),fe=Pe(_o(E,X,m.x,m.y,G),2),Ee=fe[0],Qe=fe[1];(Ee!==m.x||Qe!==m.y)&&A({x:Ee,y:Qe})}},Or=function(E){if(R&&Se){E.preventDefault&&E.preventDefault();var X=Oe.current,fe=X.originX,Ee=X.originY,Qe=X.pageX,Zn=X.pageY,Bn=fe+(E.pageX-Qe)/G,Hn=Ee+(E.pageY-Zn)/G;A({x:Bn,y:Hn})}},Ir=function(E){E.preventDefault&&E.preventDefault(),Xe(!1)};function Dn(E){Le("loaded"),je&&je(E)}function Vn(E){Le("error"),dt&&dt(E)}var zn=function(E){var X;(X=E.preventDefault)===null||X===void 0||X.call(E),Xe(!0);var fe=E.type==="touchstart"?E.touches[0]:E;Oe.current.pageX=fe.pageX,Oe.current.pageY=fe.pageY,Oe.current.originX=m.x,Oe.current.originY=m.y,Re==null||Re(E)};u.exports.useEffect(function(){return R&&Se&&(Rt(document,"mousemove",Or,!1),Rt(document,"mouseup",Ir,!1)),function(){Et(document,"mousemove",Or,!1),Et(document,"mouseup",Ir,!1)}},[R,Se]),u.exports.useEffect(function(){F&&!Se&&Sr()},[Se,m]),u.exports.useEffect(function(){F&&Sr()},[G]),u.exports.useEffect(function(){R&&_t()},[R]),u.exports.useEffect(function(){q(Z),Le(Z?"loading":"loaded"),_t()},[Z]),da(function(){Te.updateScale(P),ne(1)},[P]),u.exports.useEffect(function(){var E=function(X){if(X)switch(X.key){case wa.key:k&&jt();break;case Ca.key:wr();break;case ba.key:Cr();break;case ya.key:Lt();break;case va.key:Tt();break}};return R&&!Se&&!qe.current&&(qe.current=!0,Rt(document,"keydown",E)),function(){qe.current=!1,Et(document,"keydown",E)}},[R,k,Se,s,G]);var qn=[{key:"fullScreen",name:re.ImagePreview.fullScreen,content:o(vo,{}),onClick:Un},{key:"rotateRight",name:re.ImagePreview.rotateRight,content:o(wo,{}),onClick:Rn},{key:"rotateLeft",name:re.ImagePreview.rotateLeft,content:o(bo,{}),onClick:jn},{key:"zoomIn",name:re.ImagePreview.zoomIn,content:o(ho,{}),onClick:Lt,disabled:G===Te.maxScale},{key:"zoomOut",name:re.ImagePreview.zoomOut,content:o(po,{}),onClick:Tt,disabled:G===Te.minScale},{key:"originalSize",name:re.ImagePreview.originalSize,content:o(So,{}),onClick:An}],Wn=function(){var E,X,fe=o("img",{...$e({onWheel:Fn,ref:Ve,className:se(ft,le+"-img",(E={},E[le+"-img-moving"]=Se,E)),style:$e($e({},We),{transform:"translate("+m.x+"px, "+m.y+"px) rotate("+ce+"deg)"}),key:D,src:D},pt,{onLoad:Dn,onError:Vn,onMouseDown:function(Ee){Ee.button===0&&zn(Ee)}})});return(X=I==null?void 0:I(fe))!==null&&X!==void 0?X:fe};return o(fa,{visible:R,forceRender:!1,getContainer:yr,children:o(pa,{...$e({},z,{getPopupContainer:function(){return we.current}}),children:w("div",{className:Ye,style:$e($e({},N||{}),Tn?{}:{zIndex:"inherit",position:"absolute"}),ref:ze,children:[o(st,{in:R,timeout:400,appear:!0,classNames:"fadeImage",mountOnEnter:!0,unmountOnExit:!1,onEnter:function(E){!E||(E.parentNode.style.display="block",E.style.display="block")},onExited:function(E){!E||(E.parentNode.style.display="",E.style.display="none")},children:o("div",{className:le+"-mask"})}),R&&o(ma,{onResize:Mn,getTargetDOMNode:function(){return we.current},children:w("div",{ref:we,className:le+"-wrapper",onClick:xr,children:[w("div",{ref:nt,className:le+"-img-container",style:{transform:"scale("+G+", "+G+")"},onClick:xr,children:[Wn(),_e&&o("div",{className:le+"-loading",children:o(ha,{})})]}),o(st,{in:ue,timeout:400,appear:!0,classNames:"fadeImage",unmountOnExit:!0,children:w("div",{className:le+"-scale-value",children:[(G*100).toFixed(0),"%"]})}),ke&&o(jo,{prefixCls:ve,previewPrefixCls:le,actions:C,actionsLayout:f,defaultActions:qn,simple:Ge}),b&&o("div",{className:le+"-close-btn",onClick:$n,children:o(ga,{})}),n&&o(Ro,{previewCount:i.size,current:s,infinite:p,onPrev:Cr,onNext:wr}),L]})})]})})})}var On=u.exports.forwardRef(Ao);On.displayName="ImagePreview";var Uo=On,Gt=globalThis&&globalThis.__assign||function(){return Gt=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Gt.apply(this,arguments)},$o=globalThis&&globalThis.__rest||function(e,a){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r},ot=globalThis&&globalThis.__read||function(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),n,i=[],s;try{for(;(a===void 0||a-- >0)&&!(n=t.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(s)throw s.error}}return i};function Mo(e,a){var r=e.children,t=e.srcList,n=e.infinite,i=e.current,s=e.defaultCurrent,l=e.onChange,p=e.visible,c=e.defaultVisible,g=e.forceRender,y=e.onVisibleChange,x=$o(e,["children","srcList","infinite","current","defaultCurrent","onChange","visible","defaultVisible","forceRender","onVisibleChange"]),N=ot(qt(!1,{value:p,defaultValue:c}),2),O=N[0],U=N[1],j=u.exports.useMemo(function(){return t?new Map(t.map(function(R,Y){return[Y,{url:R,preview:!0}]})):null},[t]),b=xa(),T=function(){return j?new Map(j):new Map},C=ot(u.exports.useState(T()),2),f=C[0],d=C[1],v=u.exports.useRef(),P=v.current||new Map,k=function(R){v.current=R(v.current)};u.exports.useEffect(function(){b||d(T())},[j]);var h=new Map(Array.from(f).filter(function(R){var Y=ot(R,2),z=Y[1].preview;return z}).map(function(R){var Y=ot(R,2),z=Y[0],oe=Y[1].url;return[z,oe]})),_=ot(qt(0,{value:i,defaultValue:s}),2),I=_[0],$=_[1];function L(R,Y,z){return j||d(function(oe){return new Map(oe).set(R,{url:Y,preview:z})}),function(){j||d(function(re){var Q=new Map(re),ve=Q.delete(R);return ve?Q:re})}}function F(R,Y){return k(function(z){return new Map(z).set(R,Be(Y)?Y:{})}),function(){k(function(oe){var re=new Map(oe),Q=re.delete(R);return Q?re:oe})}}var Z=u.exports.useRef();u.exports.useImperativeHandle(a,function(){return{reset:function(){Z.current&&Z.current.reset()}}});var H=function(R,Y){var z=fn(Y)?O:Y;y&&y(R,z),U(R)},D=function(R){l&&l(R),$(R)},q=function(R){var Y=0,z=function(oe){var re=K.Children.map(oe,function(Q){if(Q&&Q.props&&Q.type){var ve=Q.type.displayName;if(ve==="Image")return K.cloneElement(Q,{_index:Y++})}return Q&&Q.props&&Q.props.children?K.cloneElement(Q,{children:z(Q.props.children)}):Q});return!Kt(oe)&&K.Children.count(oe)===1?re[0]:re};return z(R)},V=function(){var R=Array.from(h.values());return R.length>0?o("div",{style:{display:"none"},children:R.map(function(Y){return o("img",{src:Y},Y)})}):null};return w(Sn.Provider,{value:{previewGroup:!0,previewUrlMap:h,previewPropsMap:P,infinite:n,currentIndex:I,setCurrentIndex:D,setPreviewUrlMap:d,registerPreviewUrl:L,registerPreviewProps:F,visible:O,handleVisibleChange:H},children:[q(r),o(Uo,{...Gt({ref:Z,src:"",visible:O,onVisibleChange:H},x)}),g&&V()]})}var In=u.exports.forwardRef(Mo);In.displayName="ImagePreviewGroup";var Do=In,St=globalThis&&globalThis.__assign||function(){return St=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},St.apply(this,arguments)},Vo=globalThis&&globalThis.__rest||function(e,a){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r},zo=globalThis&&globalThis.__read||function(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),n,i=[],s;try{for(;(a===void 0||a-- >0)&&!(n=t.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(s)throw s.error}}return i},Pn=function(e){var a,r=u.exports.useContext(Ae),t=r.locale,n=r.rtl,i=e.listType,s=e.fileList,l=e.renderUploadList,p=e.renderUploadItem,c=e.prefixCls,g=Vo(e,["listType","fileList","renderUploadList","renderUploadItem","prefixCls"]),y=zo(u.exports.useState(-1),2),x=y[0],N=y[1],O=u.exports.useMemo(function(){return s.map(function(j){var b=j.url;return j.url===void 0&&[ee.init,ee.success].indexOf(j.status)>-1&&(b=j.originFile&&ge(URL.createObjectURL)&&URL.createObjectURL(j.originFile)),b}).filter(Boolean)},[s]);if(ge(l))return o("div",{className:c+"-list",children:l(s,g)});var U=function(j){e.imagePreview&&N(j)};return w(Ce,{children:[o(Sa,{className:se(c+"-list",c+"-list-type-"+i,(a={},a[c+"-list-rtl"]=n,a)),children:s.map(function(j,b){var T=i==="picture-card"?o("div",{className:c+"-list-item "+c+"-list-item-"+j.status,children:o(eo,{...St({},e,{onPreview:function(C){var f;U(b),(f=e.onPreview)===null||f===void 0||f.call(e,C)},file:j,locale:t})})}):o(uo,{...St({},e,{file:j,locale:t})});return ge(p)&&(T=p(T,j,s)),i==="picture-card"?o(st,{timeout:{enter:200,exit:400},classNames:c+"-slide-inline",onEntered:function(C){!C||(C.style.width="")},onExit:function(C){!C||(C.style.width=C.scrollWidth+"px")},onExiting:function(C){!C||(C.style.width=0)},onExited:function(C){!C||(C.style.width=0)},children:T},j.uid):o(st,{timeout:{enter:200,exit:400},classNames:c+"-slide-up",onExit:function(C){!C||(C.style.height=C.scrollHeight+"px")},onExiting:function(C){!C||(C.style.height=0)},onExited:function(C){!C||(C.style.height=0)},children:T},j.uid)})}),i==="picture-card"&&e.imagePreview&&o(Do,{srcList:O,visible:x!==-1,current:x,onChange:U,onVisibleChange:function(j){U(j?x:-1)}})]})};Pn.displayName="FileList";var qo=Pn;function on(e){var a=e.responseText||e.response;if(!a)return a;try{return JSON.parse(a)}catch{return a}}var Wo=function(e){var a=e.onProgress,r=a===void 0?Ft:a,t=e.onError,n=t===void 0?Ft:t,i=e.onSuccess,s=i===void 0?Ft:i,l=e.action,p=e.method,c=e.headers,g=c===void 0?{}:c,y=e.name,x=e.file,N=e.data,O=N===void 0?{}:N,U=e.withCredentials,j=U===void 0?!1:U;function b(P){return typeof P=="function"?P(x):P}var T=b(y),C=b(O),f=new XMLHttpRequest;r&&f.upload&&(f.upload.onprogress=function(P){var k;P.total>0&&(k=P.loaded/P.total*100),r(parseInt(k,10),P)}),f.onerror=function(k){n(k)},f.onload=function(){if(f.status<200||f.status>=300)return n(on(f));s(on(f))};var d=new FormData;C&&Object.keys(C).map(function(P){return d.append(P,C[P])}),d.append(T||"file",x),f.open(p,l,!0),j&&"withCredentials"in f&&(f.withCredentials=!0);for(var v in g)g.hasOwnProperty(v)&&g[v]!==null&&f.setRequestHeader(v,g[v]);return f.send(d),{abort:function(){f.abort()}}},Zo=Wo,gr=function(e,a){var r=Be(a)?a==null?void 0:a.type:a,t=!(Be(a)&&a.strict===!1);if(t&&r&&e){var n=Kt(r)?r:r.split(",").map(function(s){return s.trim()}).filter(function(s){return s}),i=(e.name.indexOf(".")>-1?"."+e.name.split(".").pop():"").toLowerCase();return n.some(function(s){var l=s&&s.toLowerCase(),p=(e.type||"").toLowerCase(),c=p.split("/")[0];if(l===p||""+c+i.replace(".","/")===l||/^\*(\/\*)?$/.test(l))return!0;if(/\/\*/.test(l))return p.replace(/\/.*$/,"")===l.replace(/\/.*$/,"");if(/\..*/.test(l)){var g=[l];return(l===".jpg"||l===".jpeg")&&(g=[".jpg",".jpeg"]),g.indexOf(i)>-1}return!1})}return!!e},Bo=function(e,a){if(!!e){var r=[].slice.call(e);return a&&(r=r.filter(function(t){return gr(t,a)})),r}},Ho=function(e,a,r){var t=[],n=0,i=function(){!n&&r(t)},s=function(p){if(n+=1,p!=null&&p.isFile){p.file(function(x){n-=1,gr(x,a)&&(Object.defineProperty(x,"webkitRelativePath",{value:p.fullPath.replace(/^\//,"")}),t.push(x)),i()});return}if(p!=null&&p.isDirectory){var c=p.createReader(),g=!1,y=function(){c.readEntries(function(x){g||(n-=1,g=!0),x.length===0?i():(y(),x.forEach(s))})};y();return}n-=1,i()},l=[].slice.call(e);l.forEach(function(p){p.webkitGetAsEntry&&s(p.webkitGetAsEntry())})},Ot=globalThis&&globalThis.__assign||function(){return Ot=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ot.apply(this,arguments)},Vt=globalThis&&globalThis.__read||function(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),n,i=[],s;try{for(;(a===void 0||a-- >0)&&!(n=t.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(s)throw s.error}}return i},ln=globalThis&&globalThis.__spreadArray||function(e,a,r){if(r||arguments.length===2)for(var t=0,n=a.length,i;t<n;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return e.concat(i||Array.prototype.slice.call(a))},Yo=function(e,a){var r,t,n=Pt(),i=u.exports.useContext(Ae).locale,s=Vt(u.exports.useState(!1),2),l=s[0],p=s[1],c=Vt(u.exports.useState(0),2),g=c[0],y=c[1],x=e.tip,N=e.children,O=e.disabled,U=e.drag,j=e.listType,b=e.prefixCls,T=e.accept,C=e.multiple,f={disabled:O};return u.exports.useEffect(function(){y(0)},[l]),N===null?null:o("div",{...Ot({className:b+"-trigger",onClick:O?void 0:e.onClick},n({onPressEnter:function(){var d;!O&&((d=e.onClick)===null||d===void 0||d.call(e))}}),{ref:a,onDragEnter:function(){y(g+1)},onDragLeave:function(d){var v;d.preventDefault(),g===0?(p(!1),!O&&((v=e.onDragLeave)===null||v===void 0||v.call(e,d))):y(g-1)},onDrop:function(d){if(d.preventDefault(),!O&&e.drag!==!1){if(p(!1),e.directory)Ho(d.dataTransfer.items,T,function(h){e.onDragFiles&&e.onDragFiles(h)});else{var v=[].slice.call(d.dataTransfer.items||[]).reduce(function(h,_,I){if(_.webkitGetAsEntry){var $=_.webkitGetAsEntry();return $!=null&&$.isDirectory?ln(ln([],Vt(h),!1),[I],!1):h}},[]),P=[].slice.call(d.dataTransfer.files||[]).filter(function(h,_){return!v.includes(_)}),k=Bo(P,T);k.length>0&&e.onDragFiles&&e.onDragFiles(C?k:k.slice(0,1))}e.onDrop&&e.onDrop(d)}},onDragOver:function(d){var v;d.preventDefault(),!O&&!l&&(p(!0),(v=e.onDragOver)===null||v===void 0||v.call(e,d))}}),children:K.isValidElement(N)?o("div",{className:se((r={},r[b+"-trigger-custom-active"]=l,r)),children:K.cloneElement(N,f)}):j==="picture-card"?o("div",{className:b+"-trigger-picture-wrapper",children:o("div",{className:b+"-trigger-picture",tabIndex:0,"aria-label":i.Upload.upload,children:o("div",{className:b+"-trigger-picture-text",children:o(wt,{})})})}):U?w("div",{className:se(b+"-trigger-drag",(t={},t[b+"-trigger-drag-active"]=l,t)),tabIndex:0,"aria-label":i.Upload.drag,children:[o(wt,{}),o("p",{className:b+"-trigger-drag-text",children:l?i.Upload.dragHover:i.Upload.drag}),x&&o("div",{className:b+"-trigger-tip",children:x})]}):w(W,{...Ot({},f,{"aria-label":i.Upload.upload,type:"primary",className:b+"-trigger-with-icon"}),children:[o(Nt,{}),i.Upload.upload]})})},Go=u.exports.forwardRef(Yo),Ko=globalThis&&globalThis.__extends||function(){var e=function(a,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},e(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(a,r);function t(){this.constructor=a}a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}}(),pe=globalThis&&globalThis.__assign||function(){return pe=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},pe.apply(this,arguments)},Jo=globalThis&&globalThis.__awaiter||function(e,a,r,t){function n(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(g){try{c(t.next(g))}catch(y){s(y)}}function p(g){try{c(t.throw(g))}catch(y){s(y)}}function c(g){g.done?i(g.value):n(g.value).then(l,p)}c((t=t.apply(e,a||[])).next())})},Xo=globalThis&&globalThis.__generator||function(e,a){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,n,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(g){return p([c,g])}}function p(c){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,n&&(i=c[0]&2?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=a.call(e,r)}catch(g){c=[6,g],n=0}finally{t=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Qo=function(e){Ko(a,e);function a(r){var t=e.call(this,r)||this;return t.upload=function(n){t.doUpload(n)},t.abort=function(n){var i=t.state.uploadRequests[n.uid];i&&(i.abort&&i.abort(),t.updateFileStatus(pe(pe({},n),{status:ee.fail})),t.deleteReq(n.uid))},t.reupload=function(n){t.doUpload(pe(pe({},n),{percent:0,status:ee.uploading}))},t.deleteReq=function(n){var i=pe({},t.state.uploadRequests);delete i[n],t.setState({uploadRequests:i})},t.delete=t.deleteReq,t.updateFileStatus=function(n,i){i===void 0&&(i=t.props.fileList);var s=t.props.onFileStatusChange,l="uid"in n?"uid":"name";s&&s(i.map(function(p){return p[l]===n[l]?n:p}),n)},t.getTargetFile=function(n){var i="uid"in n?"uid":"name",s=t.props.fileList.find(function(l){return l[i]===n[i]});return s},t.doUpload=function(n){return Jo(t,void 0,void 0,function(){var i,s,l,p,c,g,y,x,N,O,U,j,b,T,C=this;return Xo(this,function(f){switch(f.label){case 0:return i=this.props,s=i.action,l=i.headers,p=i.name,c=i.data,g=i.withCredentials,y=i.customRequest,x=i.method,N=function(d,v){var P=C.getTargetFile(n);P&&(P.status=ee.uploading,P.percent=d,C.props.onProgress&&C.props.onProgress(P,v))},O=function(d){var v=C.getTargetFile(n);v&&(v.status=ee.success,v.response=d,C.updateFileStatus(v)),C.deleteReq(n.uid)},U=function(d){var v=C.getTargetFile(n);v&&(v.status=ee.fail,v.response=d,C.updateFileStatus(v)),C.deleteReq(n.uid)},j={onProgress:N,onSuccess:O,onError:U,headers:l,name:p,file:n.originFile,data:c,withCredentials:g},this.updateFileStatus(n),s?(b=Zo(pe(pe({},j),{action:s,method:x})),[3,3]):[3,1];case 1:return y?[4,y(j)]:[3,3];case 2:b=f.sent(),f.label=3;case 3:return this.setState({uploadRequests:pe(pe({},this.state.uploadRequests),(T={},T[n.uid]=b,T))}),[2]}})})},t.handleFiles=function(n){var i=t.props,s=i.limit,l=i.fileList,p=i.onExceedLimit,c=i.autoUpload;if(pn(s)&&s<l.length+n.length)return p&&p(n,l);var g=function(y,x){var N=t.props.fileList||[],O={uid:""+String(+new Date)+x,originFile:y,percent:0,status:ee.init,name:y.name};N.push(O),t.updateFileStatus(O,N),c&&setTimeout(function(){t.doUpload(pe(pe({},O),{status:ee.uploading}))},0)};n.forEach(function(y,x){gr(y,t.props.accept)&&(ge(t.props.beforeUpload)?Promise.resolve(t.props.beforeUpload(y,n)).then(function(N){if(N!==!1){var O=Oa(N)?N:y;g(O,x)}}).catch(function(N){console.error(N)}):g(y,x))})},t.state={uploadRequests:{}},t}return a.prototype.render=function(){var r=this,t=this.props,n=t.accept,i=t.multiple,s=t.children,l=t.prefixCls,p=t.tip,c=t.disabled,g=t.drag,y=t.listType,x=t.hide,N=t.directory,O=t.onDrop,U=t.onDragOver,j=t.onDragLeave;return K.createElement(K.Fragment,null,K.createElement("input",pe({key:"trigger-input",ref:function(b){return r.inputRef=b},style:{display:"none"},type:"file",accept:Be(n)?n==null?void 0:n.type:n,multiple:i},N?{webkitdirectory:"true"}:{},{onChange:function(b){var T=b.target.files;T&&(r.handleFiles([].slice.call(T)),r.inputRef.value="")},onClick:function(b){b.stopPropagation()}})),K.createElement(st,{key:"trigger-node",in:!x,timeout:100,unmountOnExit:!0,classNames:"fadeIn"},K.createElement(Go,{directory:N,tip:p,multiple:i,accept:n,disabled:c,drag:g,listType:y,onDrop:O,onDragOver:U,onDragLeave:j,onDragFiles:this.handleFiles,onClick:function(){!c&&r.inputRef&&r.inputRef.click()},prefixCls:l},ge(s)?s({fileList:this.props.fileList}):s)),p&&y!=="picture-card"&&!g?K.createElement("div",{key:"trigger-tip",className:l+"-trigger-tip"},p):null)},a}(K.Component),ei=Qo,Ze=globalThis&&globalThis.__assign||function(){return Ze=Object.assign||function(e){for(var a,r=1,t=arguments.length;r<t;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ze.apply(this,arguments)},ti=globalThis&&globalThis.__rest||function(e,a){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(r[t[n]]=e[t[n]]);return r},ri=globalThis&&globalThis.__read||function(e,a){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),n,i=[],s;try{for(;(a===void 0||a-- >0)&&!(n=t.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(s)throw s.error}}return i},zt=function(e){var a=[].concat(e||[]).filter(Boolean);return a.reduce(function(r,t,n){if(t.uid){var i=a.findIndex(function(p){return t.uid===p.uid&&t!==p}),s=Ze({status:ee.success,percent:100},t);i===-1?r.push(s):r.splice(i,1,s)}else{var l=""+String(+new Date)+n;r.push(Ze({uid:l,status:ee.success,percent:100},t))}return r},[])},ni={listType:"text",autoUpload:!0,showUploadList:!0,beforeUpload:function(){return!0},method:"post"},ai=function(e,a){var r,t=u.exports.useContext(Ae),n=t.getPrefixCls,i=t.componentConfig,s=t.rtl,l=It(e,ni,i==null?void 0:i.Upload),p=n("upload"),c=u.exports.useRef(),g=u.exports.useRef(),y=ri(u.exports.useState(function(){return"fileList"in l?zt(l.fileList):"defaultFileList"in l?zt(l.defaultFileList):[]}),2),x=y[0],N=y[1],O="fileList"in l?zt(l.fileList):x,U=function(D,q){var V;"fileList"in l||N(D),(V=l.onChange)===null||V===void 0||V.call(l,D,q)},j=function(D){D&&setTimeout(function(){c.current&&c.current.upload(D)},0)},b=function(D){c.current&&c.current.reupload(D),l.onReupload&&l.onReupload(D)},T=function(D){if(D){var q=l.onRemove;Promise.resolve(ge(q)?q(D,O):q).then(function(V){V!==!1&&(c.current&&c.current.abort(D),U(O.filter(function(R){return R.uid!==D.uid}),D))}).catch(function(V){console.error(V)})}},C=function(D){D&&c.current&&c.current.abort(D)};u.exports.useImperativeHandle(a,function(){return{submit:function(D){var q=[];D?q=[D]:q=O.filter(function(V){return V.status===ee.init}),q.forEach(function(V){j(V)})},abort:function(D){C(D)},reupload:function(D){b(D)},getRootDOMNode:function(){return g.current}}});var f=l.listType,d=l.className,v=l.style,P=l.renderUploadItem,k=l.showUploadList,h=l.renderUploadList,_=l.progressProps,I=l.imagePreview,$=ti(l,["listType","className","style","renderUploadItem","showUploadList","renderUploadList","progressProps","imagePreview"]),L=pn(l.limit)?{hideOnExceedLimit:!0,maxCount:l.limit}:Ze({hideOnExceedLimit:!0},l.limit),F=L.maxCount&&L.maxCount<=O.length,Z="disabled"in l?l.disabled:!L.hideOnExceedLimit&&F,H=o("div",{...Ze({},dn($,["disabled","directory","onReupload","defaultFileList","fileList","autoUpload","error","action","method","multiple","name","accept","customRequest","children","autoUpload","limit","drag","tip","headers","data","withCredentials","onChange","onPreview","onRemove","onProgress","onExceedLimit","beforeUpload","onDrop","onDragOver","onDragLeave"]),{className:se(p,(r={},r[p+"-type-"+f]=f,r[p+"-drag"]=l.drag,r[p+"-disabled"]=Z,r[p+"-hide"]=L.hideOnExceedLimit&&F,r[p+"-rtl"]=s,r),d),style:v,ref:g}),children:o(ei,{...Ze({ref:c},l,{limit:L.maxCount,hide:L.hideOnExceedLimit&&F,disabled:Z,prefixCls:p,fileList:O,onProgress:function(D,q){D&&("fileList"in l||N(O.map(function(V){return V.uid===D.uid?D:V})),l.onProgress&&l.onProgress(D,q))},onFileStatusChange:U})})});return w(Ce,{children:[f!=="picture-card"&&H,k&&o(qo,{imagePreview:I,progressProps:_,showUploadList:k,disabled:l.disabled,listType:f,fileList:O,renderUploadItem:P,renderUploadList:h,onUpload:j,onAbort:C,onRemove:T,onReupload:b,onPreview:l.onPreview,prefixCls:p}),f==="picture-card"&&H,l.tip&&f==="picture-card"&&o("div",{className:p+"-trigger-tip",children:l.tip})]})},Nn=u.exports.forwardRef(ai);Nn.displayName="Upload";var _n=Nn;const oi="_toolbar_15gdh_1",ii="_operations_15gdh_6";var yt={toolbar:oi,operations:ii,"content-type":"_content-type_15gdh_9","search-form-wrapper":"_search-form-wrapper_15gdh_16","right-button":"_right-button_15gdh_21","button-group":"_button-group_15gdh_30","search-form":"_search-form_15gdh_16","list-demo-actions-icon":"_list-demo-actions-icon_15gdh_60","list-demo-actions-button":"_list-demo-actions-button_15gdh_72","list-demo-actions":"_list-demo-actions_15gdh_60","arco-list-item-action":"_arco-list-item-action_15gdh_86"};const li=S.Item;ae.Option;function si({id:e,unitVisible:a,setUnitVisible:r,studentData:t,assesCourseData:n,refreshData:i,studentUnitStaderd:s}){const[l,p]=u.exports.useState(!1),c=be(b=>b.token),[g]=Fe(),[y,x]=u.exports.useState(!1);u.exports.useState({});const[N,O]=u.exports.useState([]);u.exports.useEffect(()=>{console.log("inti Assess"),c&&(console.log("inti Assess b"),U(n)),n&&console.log("inti Assess c : ",e)},[c,t,n,s]);const U=(b={})=>{Wt.getUnits(b).then(T=>{if(O((T==null?void 0:T.data)||[]),console.log("Alll aditional unitstd",s),s){var C=s.filter(f=>f.IsAditional==!0).map(f=>f.UnitStandardID);g.setFieldValue("UnitStandardIDs",C)}})};return o(Me,{loading:l,block:!0,children:o(De,{title:"Unit Standard",visible:a,footer:null,onCancel:()=>{r(!1)},autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"500px",height:"50%"},children:w(S,{form:g,layout:"vertical",labelAlign:"left",wrapperCol:{span:24},onSubmit:b=>{var C;x(!0);var T=[];(C=b==null?void 0:b.UnitStandardIDs)==null||C.forEach(f=>{console.log(f);var d=N.filter(v=>v.UnitStandardID==f);d.length>0&&T.push({...d[0],UnitStandard:d[0].US,IsAditional:!0})}),i(T),r(!1),x(!1)},children:[o(li,{label:"Unit Standards",field:"UnitStandardIDs",children:o(ae,{mode:"multiple",placeholder:"Select unit standards",allowClear:!0,showSearch:!0,options:N==null?void 0:N.map(b=>({label:`${b.US} - ${b.USName}`,value:b.UnitStandardID})),filterOption:(b,T)=>{var C,f,d;return((f=(C=T.props.value)==null?void 0:C.label)==null?void 0:f.toLowerCase().indexOf(b.toLowerCase()))>=0||((d=T.props)==null?void 0:d.children.toLowerCase().indexOf(b.toLowerCase()))>=0}})}),o(S.Item,{style:{textAlign:"center",marginTop:"50%"},children:w(ie,{children:[o(W,{loading:y,type:"primary",htmlType:"submit",children:"Submit"}),o(W,{onClick:()=>{r(!1)},children:"Cancel"})]})})]})})})}var kn={"workshop-result":"_workshop-result_9i6tk_1","is-add":"_is-add_9i6tk_1"};const{Row:ci,Col:Pi}=He,ui=({sendResultVisible:e,sendResultVisibleHandle:a,rowData:r,ok:t,isWorkshop:n,CourseID:i=null})=>{const[s]=S.useForm(),[l,p]=u.exports.useState(!1);u.exports.useState(null);const[c,g]=u.exports.useState(!1),y=be(O=>O.userInfo);u.exports.useEffect(()=>{console.log(r)});const x=O=>{g(!0);const U=l?y.mail:O.email,j=n?`workshop ${r==null?void 0:r.Code}`:`${(r==null?void 0:r.FirstName)||""} ${(r==null?void 0:r.LastName)||""}`;ye.sendResultEmail({email:U,reportType:O.type,StudentID:n?0:r==null?void 0:r.StudentID,code:n?r==null?void 0:r.Code:"",CourseID:i}).then(b=>{b.data?(s.clearFields(),B.success({content:`Results for ${j} have been successfully sent to ${U}`,duration:4e3}),t()):b!=null&&b.message&&B.error(b.message)}).catch(b=>{var C,f,d,v,P;console.error("Send results error:",b);let T="Failed to send results. Please try again.";b.code==="ECONNABORTED"||((C=b.message)==null?void 0:C.includes("timeout"))?T="Request timed out. Please try again.":((f=b.response)==null?void 0:f.status)===404?T="Student or course data not found.":((d=b.response)==null?void 0:d.status)===500?T="Server error occurred. Please try again later.":(P=(v=b.response)==null?void 0:v.data)!=null&&P.message&&(T=b.response.data.message),B.error({content:T,duration:4e3})}).finally(()=>{g(!1)})},N=O=>{p(O)};return o(Ce,{children:o(De,{title:"Send Result",visible:e,footer:null,onCancel:a,autoFocus:!1,focusLock:!0,unmountOnExit:!0,children:o(Me,{tip:"Just a moment...",loading:c,children:o(S,{form:s,className:kn["search-form"],layout:"vertical",labelAlign:"left",wrapperCol:{span:24},style:{display:"inline-block",marginBottom:"10px"},onSubmit:x,children:w(ci,{children:[o(S.Item,{children:o(mn,{checked:l,onChange:N,children:"Send to default email"})}),l?w("p",{children:["Email :",` ${y.mail||""}`]}):o(S.Item,{label:"Send to Email",field:"email",rules:[{required:!0,message:"required"},{match:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email!"}],children:o(J,{placeholder:"Please enter email address"})}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[o(W,{type:"primary",loading:c,onClick:()=>{s.submit()},children:"Submit"}),o(W,{onClick:()=>{a(!1)},children:"Cancel"})]})})]})})})})})},di=He.Row,sn=He.Col,cn=["Achieved","Partially Completed","Merit","Excellence","Not Yet Achieved"];function fi({id:e,assessVisible:a,setAssessVisible:r,studentData:t,assesCourseData:n,list:i}){const[s,l]=u.exports.useState(!1),p=be(_=>_.token),[c]=Fe(),[g]=Fe(),[y,x]=u.exports.useState(!1),[N,O]=u.exports.useState(!1);u.exports.useState({});const[U,j]=u.exports.useState([]);u.exports.useState([]);const[b,T]=u.exports.useState(!1);u.exports.useEffect(()=>{console.log("inti Assess"),c.resetFields(),p&&(console.log("inti Assess b"),f()),n&&console.log("inti Assess c : ",e),console.log("assesCourseData"),console.log(n)},[p,t,n]);const C=_=>{let I=[...U.filter($=>$.IsAditional!==!0),..._];j(I)},f=_=>{ct.getAllUnitStandard({id:e}).then(I=>{var F;j((I==null?void 0:I.data)||[]);let $={};console.log("res?.data",I==null?void 0:I.data),(F=I==null?void 0:I.data)==null||F.forEach(Z=>{var H=""+String(Z.UnitStandardID);$[H]=Z.UnitStatus}),console.log("assesCourseData",n);var L={...$,CourseStatus:n.CourseStatus,Note:n.Note};c.setFieldsValue(L),console.log("assesForm",L),g.setFieldValue("CertificateRequestedDate",n.CertificateRequestedDate)}).finally(()=>{l(!1)})},d=()=>{r(!1)},v=_=>{O(_)},P=_=>{T(_||!1)},k=_=>{x(!0);var I=`${(t==null?void 0:t.FirstName)||""} ${(t==null?void 0:t.LastName)||""}`,$={..._,CourseID:n.CourseID,id:e,CourseName:n.CourseName,StudentName:I};ye.AddAssessResult($).then(L=>{L!=null&&L.data?(r(!1),B.success({content:`Assessment for ${I} in ${n.CourseName} has been successfully saved with status: ${_.CourseStatus}`,duration:4e3}),c.resetFields(),i()):L!=null&&L.message&&B.error(L.message)}).catch(L=>{var F,Z;console.error("Assessment error:",L),B.error({content:((Z=(F=L==null?void 0:L.response)==null?void 0:F.data)==null?void 0:Z.message)||"Failed to save assessment. Please try again.",duration:4e3})}).finally(()=>{x(!1)})},h=()=>{l(!0);const I=new Date().toISOString().split("T")[0],$=`${t.FirstName} ${t.LastName}`;if(!n.CourseStatus)return l(!1),B.warning({content:"Cannot request certificate: Student has not been assessed yet.",duration:4e3});if(n.CourseStatus==="Not Yet Achieved")return l(!1),B.warning({content:'Cannot request certificate: Course status is "Not Yet Achieved".',duration:4e3});var L={id:n.Id,StudentID:t.StudentID,LEARNERNAME:$,COMPLETIONDATE:I};ye.RemoteLearnerCertificateRequest(L).then(F=>{F!=null&&F.data?(g.setFieldValue("CertificateRequestedDate",I),B.success({content:`Certificate request for ${$} in ${n.CourseName} has been successfully sent.`,duration:4e3})):F!=null&&F.message&&B.error(F.message)}).catch(F=>{var Z,H;console.error("Certificate request error:",F),B.error({content:((H=(Z=F==null?void 0:F.response)==null?void 0:Z.data)==null?void 0:H.message)||"Failed to send certificate request. Please try again.",duration:4e3})}).finally(()=>{l(!1)})};return w(Me,{loading:s,block:!0,children:[o(De,{title:"Assess",visible:a,footer:null,onCancel:d,autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"50%"},children:w(di,{gutter:12,children:[o(sn,{span:11,children:w(S,{form:c,layout:"vertical",labelAlign:"left",wrapperCol:{span:24},onSubmit:k,children:[o(S.Item,{label:"Learner Name",children:o(J,{defaultValue:`${(t==null?void 0:t.FirstName)||""} ${(t==null?void 0:t.LastName)||""}`,style:{width:"100%"},disabled:!0,placeholder:"please enter"})}),o(S.Item,{label:`${n==null?void 0:n.CourseName} Full Course`,field:"CourseStatus",rules:[{required:!0,message:"required"}],children:o(ae,{allowClear:!0,options:cn,placeholder:"please enter",onChange:_=>{let I={};U==null||U.forEach($=>{var L=""+String($.UnitStandardID);I[L]=_}),c.setFieldsValue(I)}})}),U==null?void 0:U.map(_=>w(Ce,{children:[o("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:o("label",{children:_.IsAditional?"Aditional":""})}),o(S.Item,{label:`${_.US} - ${_.USName}`,field:String(_.UnitStandardID),rules:[{required:!0,message:"required"}],children:o(ae,{allowClear:!0,options:cn,placeholder:"please enter"})},_.UnitStandardID)]})),o(S.Item,{label:"Note",field:"Note",children:o(J.TextArea,{allowClear:!0,style:{width:"100%"},placeholder:"please enter",autoSize:{minRows:3,maxRows:6}})}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[o(W,{loading:y,type:"primary",onClick:()=>{v(!0)},children:"Add additional US"}),o(W,{loading:y,type:"primary",htmlType:"submit",children:"Submit"}),o(W,{onClick:d,children:"Cancel"})]})})]})}),o(sn,{span:11,children:w(S,{layout:"vertical",labelAlign:"left",form:g,wrapperCol:{span:24},children:[o(S.Item,{label:"Certificate Request Date",field:"CertificateRequestedDate",children:o(Jt,{disabled:!0,format:_=>`${_.format("DD/MM/YYYY")}`,style:{width:"100%"}})}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[o(W,{type:"primary",style:{marginRight:"10px"},onClick:h,children:"Send Certificate request"}),o(W,{type:"primary",onClick:_=>{_.stopPropagation(),P(!0)},children:"Send Results"})]})})]})})]})}),o(si,{id:e,unitVisible:N,setUnitVisible:v,studentData:t,refreshData:C,studentUnitStaderd:U}),o(ui,{sendResultVisible:b,sendResultVisibleHandle:P,rowData:t,isWorkshop:!1,CourseID:n.CourseID,ok:()=>{T(!1)}})]})}const pi=["Work & Life Skills","Farming & Horticulture","Custom"];function mi({id:e,visibility:a,setVisible:r,studentData:t,list:n,courseData:i}){const[s,l]=u.exports.useState(!1),p=be(h=>h.token),[c]=Fe(),[g,y]=u.exports.useState(!1);u.exports.useState(!1),u.exports.useState({});const[x,N]=u.exports.useState([]),[O,U]=u.exports.useState({}),[j,b]=u.exports.useState([]),[T,C]=u.exports.useState(null);u.exports.useEffect(()=>{console.log("inti a"),p&&(console.log("inti b"),f(),d()),t&&console.log("inti c",t),e>0&&(c.setFieldsValue({...i}),c.setFieldValue("Course",{value:i==null?void 0:i.CourseID,label:i==null?void 0:i.CourseName})),c.setFieldValue("CourseType","Work & Life Skills"),C(0)},[p,t,e,i]);const f=(h={})=>{l(!0),Wt.getCourses(h).then(_=>{N((_==null?void 0:_.data)||[])}).finally(()=>{l(!1)})},d=(h={})=>{Wt.getUnits(h).then(_=>{b((_==null?void 0:_.data)||[])})},v=()=>{c.resetFields(),y(!1),r(!1)},P=h=>{var I,$,L;y(!0),console.log("id",e);var _={id:e,StudentID:t==null?void 0:t.StudentID,CourseId:(I=h==null?void 0:h.Course)==null?void 0:I.value,CourseType:(h==null?void 0:h.CourseType)||"",...h};console.log("values",_),e>0?ye.UpdateCourse({id:e,StudentID:t==null?void 0:t.StudentID,CourseId:($=h==null?void 0:h.Course)==null?void 0:$.value,CourseType:(h==null?void 0:h.CourseType)||"",...h}).then(F=>{F!=null&&F.data&&(r(!1),B.success("success"),c.resetFields(),n())}).finally(()=>{y(!1)}):ye.AddCourse({id:e,StudentID:t==null?void 0:t.StudentID,CourseId:(L=h==null?void 0:h.Course)==null?void 0:L.value,CourseType:(h==null?void 0:h.CourseType)||"",...h}).then(F=>{F!=null&&F.data&&(r(!1),B.success("success"),c.resetFields(),n())}).finally(()=>{y(!1)})},k=h=>{h==="Work & Life Skills"?(console.log("Select type f"),C(0)):h==="Farming & Horticulture"?C(1):(console.log("Select type t"),C(2)),console.log(h)};return o(Me,{loading:s,block:!0,children:o(De,{title:e>0?"Edit Course":"Add Course",visible:a,footer:null,onCancel:v,autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"30%"},children:w(S,{form:c,layout:"vertical",labelAlign:"left",wrapperCol:{span:24},onSubmit:P,children:[o(S.Item,{label:"Learner Name",children:o(J,{value:`${(t==null?void 0:t.FirstName)||"a"} ${(t==null?void 0:t.LastName)||""}`,style:{width:"100%"},disabled:!0,placeholder:"please enter"})}),o(S.Item,{label:"Course Type",field:"CourseType",rules:[{required:!1,message:"required"}],children:o(ae,{allowClear:!0,options:pi,placeholder:"please enter",onChange:h=>{var I;k(h);let _={};(I=O==null?void 0:O.units)==null||I.forEach($=>{var L=""+String($.UnitStandardID);_[L]=h}),c.setFieldsValue(_)}})}),(T==0||T==2)&&o(S.Item,{label:"Course Name",field:"Course",rules:[{required:!0,message:"required"}],children:o(ae,{labelInValue:!0,showSearch:!0,allowClear:!0,options:x.map(h=>({label:h.CourseName,value:h.CourseID})),filterOption:(h,_)=>{var I,$,L;return(($=(I=_.props.value)==null?void 0:I.label)==null?void 0:$.toLowerCase().indexOf(h.toLowerCase()))>=0||((L=_.props)==null?void 0:L.children.toLowerCase().indexOf(h.toLowerCase()))>=0},placeholder:"please enter",onChange:h=>{var I;let _={};(I=O==null?void 0:O.units)==null||I.forEach($=>{var L=""+String($.UnitStandardID);_[L]=h}),c.setFieldsValue(_)}})}),(T==1||T==2)&&o(S.Item,{label:"Unit Standards",field:"UnitStandards",rules:[{required:!0,message:"required"}],children:o(ae,{mode:"multiple",showSearch:!0,allowClear:!0,options:j.map(h=>({label:`${h.US} - ${h.USName}`,value:h.UnitStandardID})),filterOption:(h,_)=>{var I,$,L;return(($=(I=_.props.value)==null?void 0:I.label)==null?void 0:$.toLowerCase().indexOf(h.toLowerCase()))>=0||((L=_.props)==null?void 0:L.children.toLowerCase().indexOf(h.toLowerCase()))>=0},placeholder:"please enter",onChange:h=>{var I;let _={};(I=O==null?void 0:O.units)==null||I.forEach($=>{var L=""+String($.UnitStandardID);_[L]=h}),c.setFieldsValue(_)}})}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[o(W,{loading:g,type:"primary",htmlType:"submit",children:"Save"}),o(W,{onClick:v,children:"Cancel"})]})})]})})})}const{Row:hi,Col:Ni}=He,gi=({certificateVisible:e,certificateVisibleHandle:a,rowData:r,ok:t,Code:n,isAll:i,studentData:s=[]})=>{const[l]=S.useForm(),[p,c]=u.exports.useState(!1),[g,y]=u.exports.useState(null),[x,N]=u.exports.useState(!1),[O,U]=u.exports.useState("email"),[j,b]=u.exports.useState(!0),T=be(I=>I.userInfo),C=u.exports.useMemo(()=>!i||!s.length?[]:s.filter(I=>I.CourseStatus&&I.CourseStatus!=="Not Yet Achieved"),[i,s]),f=s.length,d=C.length,v=I=>{y(I)},P=I=>{c(I)},k=async I=>{var L,F,Z;N(!0);const $={StudentID:i?void 0:r.StudentID,Code:n,Id:(r==null?void 0:r.id)||(r==null?void 0:r.Id),reportType:I.type,NSN:I.NSN,deliveryMethod:"download"};try{const H=await ye.sendcertificateEmail($,{timeout:3e5}),q=`${window.location.origin}${H.data}`;window.open(q,"_blank");const V=g||"Certificate",R=i?`for ${d} student${d!==1?"s":""}`:`for ${r.FirstName||""} ${r.LastName||""}`;B.success({content:`Certificate${i&&d>1?"s":""} downloaded successfully ${R}`,duration:3e3})}catch(H){console.error("Certificate download error:",H);let D="Failed to download certificate. Please try again.";if(H.code==="ECONNABORTED"||H.message.includes("timeout"))D="Request timed out. The certificate generation is taking longer than expected. Please try again.";else if(((L=H.response)==null?void 0:L.status)===404)D="Certificate file not found. Please ensure the certificate has been generated.";else if(((F=H.response)==null?void 0:F.status)===500)D="Server error occurred while generating certificate. Please try again.";else if((Z=H.response)!=null&&Z.data)try{const q=typeof H.response.data=="string"?H.response.data:await H.response.data.text();D=JSON.parse(q).message||D}catch{}B.error(D)}finally{N(!1)}},h=I=>{if(O==="download"){k(I);return}N(!0);const $={StudentID:i?void 0:r.StudentID,Code:n,email:p?T.mail:I.email,Id:(r==null?void 0:r.id)||(r==null?void 0:r.Id),reportType:I.type,NSN:I.NSN,deliveryMethod:"email"};ye.sendcertificateEmail($,{timeout:3e5}).then(L=>{if(L.data){const F=p?T.mail:$.email,Z=i?`${d} certificate${d!==1?"s":""}`:`certificate for ${r.FirstName||""} ${r.LastName||""}`;B.success({content:`Successfully sent ${Z} to ${F}`,duration:4e3}),l.clearFields(),t()}}).catch(L=>{var F;console.error("Certificate send error:",L),L.code==="ECONNABORTED"||L.message.includes("timeout")?B.error("Request timed out. The certificate generation is taking longer than expected. Please try again."):((F=L.response)==null?void 0:F.status)===500?B.error("Server error occurred while generating certificate. Please try again."):B.error("Failed to send certificate. Please try again.")}).finally(()=>{N(!1)})},_=I=>{U(I),b(I==="email")};return o(Ce,{children:o(De,{title:"Generate Certificate",visible:e,footer:null,onCancel:a,autoFocus:!1,focusLock:!0,unmountOnExit:!0,children:w(Me,{tip:"Just a moment...",loading:x,children:[i?w(Ce,{children:[o("p",{style:{marginBottom:"12px"},children:"Generate certificates for all learners in the workshop"}),d===0?o(Nr,{type:"warning",content:"No assessed students found. Please assess students before generating certificates.",style:{marginBottom:"16px"}}):o(Nr,{type:"info",content:`${d} out of ${f} student${f!==1?"s":""} will receive certificates. Only students with assessment status other than "Not Yet Achieved" will be included.`,style:{marginBottom:"16px"}})]}):w("p",{children:["Learner Name:",`${r.FirstName||""} ${r.LastName||""}`]}),o(S,{form:l,className:kn["search-form"],layout:"vertical",labelAlign:"left",wrapperCol:{span:24},style:{display:"inline-block",marginBottom:"10px"},onSubmit:h,children:w(hi,{children:[o(S.Item,{label:"Choose Certificate",field:"type",rules:[{required:!0,message:"required"}],children:o(ae,{showSearch:!0,options:[{label:"Certificate of Achievement",value:1},{label:"Work Ready Skills L2 Micro-Credential",value:2},{label:"Employment Skills L3 Micro-Credential",value:3},{label:"Foundation Skills L1",value:4},{label:"Foundation Skills L2",value:5}],placeholder:"Please enter",onChange:v})}),o(S.Item,{label:"Delivery Method",children:w(At.Group,{value:O,onChange:_,children:[o(At,{value:"email",children:"Send Email"}),o(At,{value:"download",children:"Download File"})]})}),o(S.Item,{children:o(mn,{checked:p,onChange:P,children:"Send to default email"})}),!p&&o(S.Item,{label:"Send to Email",field:"email",rules:[{required:j,message:"required"},{match:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email!"}],children:o(J,{placeholder:"Please enter email address"})}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[o(W,{type:"primary",loading:x,onClick:()=>{l.submit()},children:"Submit"}),o(W,{onClick:a,children:"Cancel"})]})})]})})]})})})};function vi({onCancel:e=null,student:a}){Ia();const[r,t]=u.exports.useState(!1),[n,i]=u.exports.useState([]),s=be(q=>q.token),l=be(q=>q.isAdmin),[p,c]=u.exports.useState({}),[g,y]=u.exports.useState({total:0,pageSize:10,current:1}),[x,N]=u.exports.useState({}),[O]=Fe(),[U,j]=u.exports.useState(!1),[b,T]=u.exports.useState([]),[C,f]=u.exports.useState(1),d=be(q=>q.userInfo),[v,P]=u.exports.useState(!1),[k,h]=u.exports.useState(!1),[_,I]=u.exports.useState(!1);u.exports.useEffect(()=>{T([{title:"Course Name",key:"CourseName",dataIndex:"CourseName",width:160},{title:"Status",dataIndex:"CourseStatus",key:"CourseStatus",width:85},...[{title:"Operation",dataIndex:"operation",key:"operation",width:115,render:(V,R)=>w(ie,{children:[o(W,{type:"primary",size:"mini",onClick:Y=>{Y.stopPropagation(),N(R),console.log("item",R),console.log("rowData",x),P(!0)},children:"Assess"}),o(W,{type:"primary",size:"mini",onClick:Y=>{if(Y.stopPropagation(),console.log(R),!R.CourseStatus)return B.warning("Not yet assessed");if(!R.CourseStatus||R.CourseStatus==="Not Yet Achieved")return B.warning("Not yet assessed");I(!1),N(R),h(!0)},children:"Certificate"}),o(W,{type:"primary",size:"mini",onClick:Y=>{Y.stopPropagation(),N(R),console.log(R),j(!0)},children:"Edit"}),o("div",{onClick:Y=>{Y.stopPropagation()},children:o(Qt,{focusLock:!0,title:"Confirm",content:"Are you sure you want to delete?",onOk:()=>{$(R.Id)},children:o(W,{type:"primary",status:"danger",size:"mini",children:"Delete"})})})]})}]]),f(C+1)},[l]),u.exports.useEffect(()=>{s&&L()},[s]);const $=q=>{ct.deleteCourse({id:q}).then(V=>{V!=null&&V.data&&(B.success("success"),L())})},L=(q={})=>{t(!0),ct.getAllCourses({...g,...p,...q,id:a==null?void 0:a.StudentID,total:void 0,Email:l?"":d.mail}).then(V=>{i((V==null?void 0:V.data)||[]),y({...g,...V==null?void 0:V.pagination})}).finally(()=>{t(!1)})},F=q=>{const{current:V,pageSize:R}=q;y({...q,current:V,pageSize:R}),L({current:V,pageSize:R})},Z=()=>{P(!1),t(!1)},H=()=>{N({}),j(!0)},D=q=>{j(q)};return w(Ce,{children:[w(xt,{children:[o(S,{form:O,labelAlign:"left",layout:"inline",style:{display:"inline-block",marginBottom:"10px"},children:w(bt,{children:[o(S.Item,{label:"Name",field:"DeliverySpecialist",children:o(J,{allowClear:!0,placeholder:"Please enter"})}),w(ie,{children:[o(W,{type:"primary",icon:o(hn,{}),children:"Search"}),o(W,{children:"Cancel"})]}),o("div",{style:{position:"absolute",right:"20px",display:"inline-block"},children:o(W,{type:"primary",icon:o(wt,{}),onClick:H,children:"Add"})})]})}),o(vn,{columns:b,rowKey:"Id",data:n,loading:r,scroll:{x:1e3},border:{wrapper:!0,cell:!0},pagination:{...g,size:"mini",bufferSize:3,sizeCanChange:!0,showTotal:!0,showJumper:!0,pageSizeChangeResetCurrent:!0},onChange:F},C),w(bt,{children:[o(ie,{}),o("div",{style:{position:"absolute",right:"20px",display:"inline-block"},children:e&&o(W,{onClick:e,children:"Close"})})]})]}),o(fi,{id:(x==null?void 0:x.Id)||0,assessVisible:v,setAssessVisible:Z,studentData:a,assesCourseData:x,list:L}),o(mi,{id:(x==null?void 0:x.Id)||0,visibility:U,setVisible:D,studentData:a,list:L,courseData:x}),o(gi,{certificateVisible:k,certificateVisibleHandle:()=>{h(!1)},Code:"",isAll:_,rowData:x,ok:()=>{h(!1)}})]})}function yi({student:e}){const[a,r]=u.exports.useState(!1),[t,n]=u.exports.useState([]),i=be(v=>v.token);be(v=>v.isAdmin);const[s,l]=u.exports.useState({total:0,pageSize:10,current:1}),[p]=Fe(),[c,g]=u.exports.useState(!1),[y,x]=u.exports.useState([]),[N,O]=u.exports.useState(null),U=[{title:"Workshop Code",key:"Code",dataIndex:"Code",width:120},{title:"Course Name",key:"CourseName",dataIndex:"CourseName",width:200},{title:"School Name",key:"SchoolName",dataIndex:"SchoolName",width:200},{title:"Status",dataIndex:"Status",key:"Status",width:100},{title:"Operation",dataIndex:"operation",key:"operation",width:100,render:(v,P)=>o("div",{onClick:k=>k.stopPropagation(),children:o(Qt,{focusLock:!0,title:"Confirm",content:"Are you sure you want to remove this workshop enrollment?",onOk:()=>{b(P.StudentInCourseID)},children:o(W,{type:"primary",status:"danger",size:"mini",children:"Remove"})})})}];u.exports.useEffect(()=>{i&&(e==null?void 0:e.StudentID)&&(T(),j())},[i,e==null?void 0:e.StudentID]);const j=async()=>{var v;try{const P=await gt.get("/api/student/getAllWorkshops");console.log("getAllWorkshops response:",P==null?void 0:P.data),x(((v=P==null?void 0:P.data)==null?void 0:v.data)||(P==null?void 0:P.data)||[])}catch(P){console.error("Error loading workshops:",P),B.error("Failed to load workshops")}},b=async v=>{var P;try{const k=await gt.post("/api/student/removeWorkshopEnrollment",{StudentInCourseID:v});(P=k==null?void 0:k.data)!=null&&P.success?(B.success("Workshop enrollment removed successfully"),T()):B.error("Failed to remove workshop enrollment")}catch(k){console.error("Error removing workshop:",k),B.error("Failed to remove workshop enrollment")}},T=async()=>{var v,P;r(!0);try{const k=await gt.get("/api/student/getStudentWorkshops",{params:{StudentID:e==null?void 0:e.StudentID}});console.log("getStudentWorkshops full response:",k),console.log("getStudentWorkshops res.data:",k==null?void 0:k.data),console.log("getStudentWorkshops res.data.data:",(v=k==null?void 0:k.data)==null?void 0:v.data);let h=[];((P=k==null?void 0:k.data)==null?void 0:P.data)&&Array.isArray(k.data.data)?h=k.data.data:Array.isArray(k==null?void 0:k.data)&&(h=k.data),console.log("Workshop data to set:",h),console.log("Is array?",Array.isArray(h)),n(h),l({...s,total:h.length||0})}catch(k){console.error("Error loading student workshops:",k),B.error("Failed to load workshops")}finally{r(!1)}},C=v=>{const{current:P,pageSize:k}=v;l({...v,current:P,pageSize:k})},f=()=>{O(null),p.resetFields(),g(!0)},d=async()=>{var v,P;try{const k=await p.validate();if(!k.WorkshopCode){B.warning("Please select a workshop");return}r(!0);const h=await gt.post("/api/student/addWorkshopEnrollment",{StudentID:e==null?void 0:e.StudentID,WorkshopCode:k.WorkshopCode});(v=h==null?void 0:h.data)!=null&&v.success?(B.success("Workshop enrollment added successfully"),g(!1),p.resetFields(),T()):B.error(((P=h==null?void 0:h.data)==null?void 0:P.message)||"Failed to add workshop enrollment")}catch(k){console.error("Error adding workshop:",k),B.error("Failed to add workshop enrollment")}finally{r(!1)}};return w(Ce,{children:[w(xt,{children:[o("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"flex-end"},children:o(W,{type:"primary",icon:o(wt,{}),onClick:f,children:"Add Workshop"})}),o(vn,{columns:U,rowKey:"StudentInCourseID",data:t,loading:a,scroll:{x:800},border:{wrapper:!0,cell:!0},pagination:{...s,size:"mini",bufferSize:3,sizeCanChange:!0,showTotal:!0,showJumper:!0,pageSizeChangeResetCurrent:!0},onChange:C})]}),o(De,{title:"Add Workshop Enrollment",visible:c,onOk:d,onCancel:()=>{g(!1),p.resetFields()},confirmLoading:a,autoFocus:!1,focusLock:!0,children:o(S,{form:p,labelAlign:"left",labelCol:{span:6},wrapperCol:{span:18},children:o(S.Item,{label:"Workshop",field:"WorkshopCode",rules:[{required:!0,message:"Please select a workshop"}],children:o(ae,{placeholder:"Select a workshop",showSearch:!0,allowClear:!0,filterOption:(v,P)=>{var h;return(((h=P.props.children)==null?void 0:h.toString().toLowerCase())||"").indexOf(v.toLowerCase())>=0},children:y.map(v=>w(ae.Option,{value:v.Code,children:[v.Code," - ",v.CourseName," (",v.SchoolName,")"]},v.Code))})})})})]})}function bi({StudentID:e,LearnerName:a,Email:r,studentInfo:t}){const[n,i]=u.exports.useState(!1),[s,l]=u.exports.useState(0),[p,c]=u.exports.useState(!1),[g,y]=u.exports.useState([]),[x,N]=u.exports.useState(!1),[O,U]=u.exports.useState(null),[j,b]=u.exports.useState([]),[T,C]=u.exports.useState({}),[f,d]=u.exports.useState([]),[v,P]=u.exports.useState(""),[k,h]=u.exports.useState("");u.exports.useState(null);const[_,I]=u.exports.useState(!1),$=be(m=>m.isAdmin),L=be(m=>m.token),[F]=Fe(),[Z]=Fe(),{Row:H,Col:D}=He,[q]=Fe(),[V,R]=u.exports.useState([]);u.exports.useState({total:0,pageSize:10,current:1}),u.exports.useEffect(()=>{L&&(Y(),Oe(),z(),h(t.LastCommunicateDate),q.setFieldsValue({lastCommDate:t.LastCommunicateDate}),Z.setFieldsValue({lastCommDate:t.LastCommunicateDate}),console.log(t))},[L]);const Y=(m={})=>{I(!0),et.getTemplateList(m).then(A=>{b((A==null?void 0:A.data)||[])}).finally(()=>{I(!1)})},z=(m={})=>{I(!0),et.getList({StudentId:e,...m}).then(A=>{y((A==null?void 0:A.data)||[])}).finally(()=>{I(!1)})},oe=()=>{l(0),P(""),i(!0)},re=m=>{l(m.Id),console.log("comData"),console.log(m),F.setFieldValue("CommunicationType",m.CommunicationType),F.setFieldValue("SubType",m.SubType),F.setFieldValue("CommDate",m.CommDate),F.setFieldValue("CommTime",m.CommTime),F.setFieldValue("Message",m.Message),F.setFieldValue("Attachments",m.Attachments),i(!0)},Q=()=>{F.resetFields(),c(!1),i(!1)},ve=["Email","Phone","SMS","Custom"],le=m=>{var G,ne;console.log("Abcd"),console.log(m==null?void 0:m.SubType),console.log("fileList"),console.log(V);var A=V.length>0?V[0].originFile:null;console.log("attch"),console.log(V.length),console.log(A);const M=new FormData;M.append("StudentId",e),M.append("CommunicationType",m==null?void 0:m.CommunicationType),M.append("SubType",((G=m==null?void 0:m.SubType)==null?void 0:G.value)||""),M.append("SubTypeName",((ne=m==null?void 0:m.SubType)==null?void 0:ne.label)||""),M.append("Subject",T.Subject||""),M.append("CommDate",(m==null?void 0:m.CommDate)||""),M.append("CommTime",(m==null?void 0:m.CommTime)||""),M.append("Message",(m==null?void 0:m.Message)||""),M.append("Email",r||""),A&&M.append("AttachFile",A),s>0?et.UpdateComm({id:s,...M}).then(te=>{te!=null&&te.data&&(i(!1),B.success("success"),F.resetFields(),z())}).finally(()=>{c(!1)}):et.AddComm(M).then(te=>{te!=null&&te.data&&(B.success("success"),i(!1),F.resetFields(),z())}).finally(()=>{c(!1)})},Ye=m=>{console.log("Abcd");const A={StudentId:e,CommDate:m==null?void 0:m.lastCommDate};e>0&&et.UpdateLastCommDate({id:e,...A}).then(M=>{M!=null&&M.data&&(B.success("success"),h(m==null?void 0:m.lastCommDate),q.setFieldsValue({lastCommDate:m==null?void 0:m.lastCommDate}),N(!1))}).finally(()=>{c(!1)})},nt=[{title:"Type",dataIndex:"CommunicationType",key:"CommunicationType",width:85},{title:"Template Name",dataIndex:"SubTypeName",key:"SubTypeName",ellipsis:!0,width:110},{title:"Message",dataIndex:"Message",key:"Message",ellipsis:!0,width:120},{title:"Date",dataIndex:"CommDate",key:"CommDate",width:120,ellipsis:!0,render:m=>ja(m).format("DD/MM/YYYY")},{title:"Time",dataIndex:"CommTime",key:"CommTime",ellipsis:!0,width:160},...$?[{title:"Operation",dataIndex:"operation",key:"operation",width:150,render:(m,A)=>w(ie,{children:[o(W,{type:"primary",size:"mini",onClick:M=>{console.log("abcd"),M.stopPropagation(),re(A)},children:"View"}),o("div",{onClick:M=>{M.stopPropagation()},children:o(Qt,{focusLock:!0,title:"Confirm",content:"Are you sure you want to delete?",onOk:()=>{qe(A.Id)},children:o(W,{type:"primary",status:"danger",size:"mini",children:"Delete"})})})]})}]:[]],we=m=>{m.key==="Enter"&&ze()},ze=()=>{const m=q.getFieldsValue();z(m)},qe=m=>{et.deleteCommunication({id:m}).then(A=>{A!=null&&A.data&&(B.success("success"),z())})},Oe=(m={})=>{I(!0),ct.getAllCourses({id:e}).then(A=>{d((A==null?void 0:A.data)||[])}).finally(()=>{I(!1)})};let Ie="",_e="";const ke=()=>{var m=Ie;console.log("setMessage"),a&&(console.log("Con 01"),m=m.replace(/{LearnerName}/g,a),console.log(m)),_e?(console.log("Con 02"),m=m.replace(/{CourseName}/g,_e)):m=m.replace(/{CourseName}/g,""),F.setFieldValue("Message",m)},Le=m=>{U(m==="Email"?1:2),C({}),console.log(m)},de=m=>{var A=j.filter(M=>M.id==m.value);A.length>0&&(Ie=A[0].Template,ke()),console.log("handleSubTypeChange"),console.log(m)},Ge=m=>{if(!m||m===0){_e="",ke();return}var A=f.filter(M=>M.Id==m);console.log("Selected Course"),console.log(m),console.log(f),console.log(A),A.length>0?(_e=A[0].CourseName,ke()):(_e="",ke()),console.log(m)},Ke=m=>{console.log(m),R(m)},Je=m=>{R(A=>A.filter(M=>M.uid!==m.uid)),B.info(`${m.name} removed`)};return w(Me,{loading:_,block:!0,children:[w("div",{style:{padding:20},children:[o("div",{children:o(S,{form:q,className:yt["search-form"],labelAlign:"left",layout:"inline",style:{display:"inline-block",marginBottom:"10px"},children:w(H,{children:[o(S.Item,{label:"Search",field:"Search",children:o(J,{allowClear:!0,onKeyDown:we,placeholder:"Please enter keyword"})}),o(ie,{children:o(W,{type:"primary",icon:o(hn,{}),onClick:ze,children:"Search"})}),o("div",{style:{position:"absolute",right:"130px",display:"inline-block"},children:o(ie,{children:o(W,{type:"primary",onClick:oe,style:{marginRight:"10px",marginLeft:"10px"},children:"Add"})})})]})})}),o(Pa,{rowKey:"Id",columns:nt,data:g,loading:_})]}),w(De,{title:s>0?"Edit Comminucation":"Add Comminucation",visible:n,footer:null,onCancel:()=>{i(!1)},autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"30%"},children:["  ",w(S,{form:F,layout:"vertical",labelAlign:"left",wrapperCol:{span:24},onSubmit:le,children:[o(S.Item,{label:"Learner Name",field:"LearnerName",children:o(J,{defaultValue:`${a||""}`,style:{width:"100%"},disabled:!0,placeholder:a})}),o(S.Item,{label:"Email",field:"Email",children:o(J,{defaultValue:`${r||""}`,style:{width:"100%"},disabled:!0,placeholder:r})}),o(S.Item,{label:"Communication Type",field:"CommunicationType",style:{width:"70%"},rules:[{required:!1,message:"required"}],children:o(ae,{allowClear:!0,options:ve,placeholder:"please enter",onChange:m=>{Le(m)}})}),O==1&&o(S.Item,{label:"Email Template",field:"SubType",style:{width:"60%"},rules:[{required:!0,message:"required"}],children:o(ae,{labelInValue:!0,showSearch:!0,allowClear:!0,options:j.map(m=>({label:m.Name,value:m.id})),placeholder:"please enter",onChange:m=>{console.log(m),de(m)}})}),o(S.Item,{label:"Course (Optional)",field:"Courses",extra:f.length>0?`This student is enrolled in ${f.length} course${f.length>1?"s":""}. Select one to include course name in the message.`:"This student has no enrolled courses.",children:o(ae,{allowClear:!0,options:[{label:"-- None (Send without course name) --",value:0},...f.map(m=>({label:m.CourseName,value:m.Id}))],onChange:m=>{Ge(m)},placeholder:"Select a course or leave blank"})}),o(S.Item,{label:"Message",field:"Message",children:o(J.TextArea,{allowClear:!0,style:{width:"100%"},placeholder:"please enter",autoSize:{minRows:3,maxRows:6}})}),s!=0&&o(S.Item,{label:"Attachments",field:"Attachments",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),s==0&&o(S.Item,{children:o(_n,{fileList:V,onChange:Ke,onRemove:Je,showUploadList:!0,limit:1,children:o(W,{icon:o(Nt,{}),children:"Click to Upload"})})}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[s==0&&o(W,{loading:p,type:"primary",htmlType:"submit",children:"Save"}),o(W,{onClick:Q,children:"Cancel"})]})})]})]}),w(De,{title:"Change Last Comminucation  Date",visible:x,footer:null,onCancel:()=>{N(!1)},autoFocus:!1,focusLock:!0,unmountOnExit:!0,style:{width:"30%"},children:["  ",w(S,{form:Z,layout:"vertical",labelAlign:"left",wrapperCol:{span:24},onSubmit:Ye,children:[o(S.Item,{label:"Learner Name",field:"LearnerName",children:o(J,{defaultValue:`${a||""}`,style:{width:"100%"},disabled:!0,placeholder:a})}),o(S.Item,{"aria-readonly":!0,label:"Last Comm Date",field:"lastCommDate",children:o(Jt,{format:m=>`${m.format("DD/MM/YYYY")}`,style:{width:"100%"}})}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[s==0&&o(W,{loading:p,type:"primary",htmlType:"submit",children:"Save"}),o(W,{onClick:()=>{N(!1)},children:"Cancel"})]})})]})]})]})}const un=He.Row,vt=He.Col,it=gn.TabPane;function _i({handleSubmit:e,loading:a,form:r,handleCancel:t=null,headerInfo:n=null}){const i=()=>{r.resetFields()};u.exports.useEffect(()=>{U(),O(),j()},[]);const[s,l]=u.exports.useState([]),[p,c]=u.exports.useState([]),[g,y]=u.exports.useState([]);u.exports.useState({}),u.exports.useState({}),u.exports.useState({});const[x,N]=u.exports.useState([]),O=()=>{ct.getStudentImageList({StudentID:n.StudentID}).then(f=>{if((f==null?void 0:f.data.length)>0){const d=JSON.parse(f==null?void 0:f.data[0].AdditionalDocuments);y(d||[])}})},U=()=>{ye.getCourse({}).then(f=>{c((f==null?void 0:f.data)||[])}),ye.getSchool({}).then(f=>{l((f==null?void 0:f.data)||[])}),ye.getCourse({}).then(f=>{c((f==null?void 0:f.data)||[])})},j=async(f={})=>{La.getAll(f).then(d=>{N((d==null?void 0:d.data)||[])}).finally(()=>{})},b=f=>{const d=new FormData;console.log("file",f),d.append("file",f),d.append("StudentID",n.StudentID),console.log(n.AdditionalDocuments||[]),d.append("ImageList",JSON.stringify(g)),d.append("FileName",f.name),ye.addDocument(d).then(v=>{O()})},T=f=>{const d=`/api/images/${f.FileSaveName}`,v=document.createElement("a");v.href=d,v.download=f.FileName,document.body.appendChild(v),v.click(),document.body.removeChild(v)},C=f=>{var d=g.filter(v=>v.FileSaveName!==f.FileSaveName);ye.deleteDocument({StudentID:n.StudentID,fileName:f.FileSaveName,ImageList:JSON.stringify(d)}).then(v=>{O()})};return o("div",{style:{width:"100%"},children:o(xt,{children:w(gn,{defaultActiveTab:"1",destroyOnHide:!0,children:[o(it,{title:"Personal",children:w(S,{form:r,className:yt["search-form"],labelAlign:"left",wrapperCol:{span:24},initialValues:{type:1},onSubmit:e,children:[w(un,{gutter:12,children:[w(vt,{span:11,children:[o(S.Item,{field:"type",hidden:!0,children:o(J,{})}),o(S.Item,{label:"Learner First Name",field:"FirstName",rules:[{required:!0,message:"required"}],children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"Learner Last Name",field:"LastName",rules:[{required:!0,message:"required"}],children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"Date of Birth",field:"DateOfBirth",rules:[{required:!0,message:"required"}],children:o(Jt,{format:f=>`${f.format("DD/MM/YYYY")}`,style:{width:"100%"}})}),o(S.Item,{label:"Gender",field:"Gender",rules:[{required:!0,message:"required"}],children:o(ae,{allowClear:!0,options:["Male","Female","Other"],placeholder:"please enter"})}),o(S.Item,{label:"Ethnicity",field:"Ethnicity",rules:[{required:!0,message:"required"}],children:o(ae,{allowClear:!0,allowCreate:!0,showSearch:!0,options:["Australian","British","Cambodian","Chinese","Chinese","Cook Island","Dutch","Fijian","German","Indian","Italian","Japanese","Korean","American","NZ European","Maori","Polish","Samoan","Tongan"],placeholder:"please select (If the option does not exist, you can enter it manually)"})}),o(S.Item,{label:"Email",field:"Email",rules:[{required:!0,message:"required"}],children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"NSN",field:"NSN",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})})]}),w(vt,{span:11,offset:1,children:[o(S.Item,{label:"Street Address",field:"StreetAddress",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"City",field:"City",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"Region",field:"Region",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"Zipcode",field:"Zipcode",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"Phone Number",field:"PhoneNumber",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"Learner Status",field:"Status",children:o(ae,{allowClear:!0,options:["On Going","Withdrawn","Did Not Complete","Completed","Other"],placeholder:"please enter"})})]})]}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[o(W,{loading:a,type:"primary",htmlType:"submit",children:"Submit"}),t?o(W,{onClick:t,children:"Cancel"}):o(W,{onClick:i,children:"Reset"})]})})]})},"1"),o(it,{title:"School",children:w(S,{form:r,className:yt["search-form"],labelAlign:"left",wrapperCol:{span:24},initialValues:{type:2},onSubmit:e,children:[o(S.Item,{field:"type",hidden:!0,children:o(J,{})}),o(S.Item,{label:"School Name",field:"School",rules:[{required:!0,message:"required"}],children:o(ae,{showSearch:!0,allowClear:!0,options:s.map(f=>({label:f.SchoolName,value:f.SchoolName})),allowCreate:{formatter:f=>({value:f,label:f})},filterOption:(f,d)=>{var v,P,k;return((P=(v=d.props.value)==null?void 0:v.label)==null?void 0:P.toLowerCase().indexOf(f.toLowerCase()))>=0||((k=d.props)==null?void 0:k.children.toLowerCase().indexOf(f.toLowerCase()))>=0},placeholder:"please select (If the option does not exist, you can enter it manually)"})}),o(S.Item,{label:"Teacher Name",field:"TeacherName",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"Teacher Email",field:"TeacherEmail",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"Invoice Email",field:"InvoiceEmail",children:o(J,{allowClear:!0,style:{width:"100%"},placeholder:"please enter"})}),o(S.Item,{label:"Tutor",field:"TutorId",children:o(ae,{allowClear:!0,options:x.map(f=>({label:f.DeliverySpecialist,value:f.Id})),placeholder:"please enter"})}),o(S.Item,{label:"Will your school be resulting the credits with NZQA or will you need us to do that for you?",field:"NZQAInfo",children:o(J.TextArea,{allowClear:!0,style:{width:"100%"},placeholder:"please enter",autoSize:{minRows:3,maxRows:6}})}),o(S.Item,{label:"Assigned To",field:"AssignedTo",children:o(ae,{allowClear:!0,options:["","School","GET Group"],placeholder:"please enter"})}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[o(W,{loading:a,type:"primary",htmlType:"submit",children:"Submit"}),t?o(W,{onClick:t,children:"Cancel"}):o(W,{onClick:i,children:"Reset"})]})})]})},"2"),w(it,{title:"Courses",children:[o(vi,{student:n}),w(S,{form:r,className:yt["search-form"],labelAlign:"left",wrapperCol:{span:24},initialValues:{type:3},onSubmit:e,children:[w(un,{gutter:12,children:[w(vt,{span:11,children:[o(S.Item,{label:"Additional Info",field:"AdditionalInfo",children:o(J.TextArea,{allowClear:!0,style:{width:"100%"},placeholder:"please enter",autoSize:{minRows:3,maxRows:6}})}),o(S.Item,{label:"Workbook Option",field:"WorkbookOption",children:o(J.TextArea,{allowClear:!0,style:{width:"100%"},placeholder:"please enter",autoSize:{minRows:3,maxRows:6}})})]}),w(vt,{span:11,children:[o(S.Item,{label:"Internal Note",field:"InternalNote",children:o(J.TextArea,{allowClear:!0,style:{width:"100%"},placeholder:"please enter",autoSize:{minRows:3,maxRows:6}})}),o(S.Item,{label:"Fees",field:"Fees",children:o(ae,{allowClear:!0,options:["Paid","Parially Paid","Un Paid"],placeholder:"please enter"})})]})]}),o(S.Item,{field:"type",hidden:!0,children:o(J,{})}),o(S.Item,{style:{textAlign:"center"},children:w(ie,{children:[o(W,{loading:a,type:"primary",htmlType:"submit",children:"Submit"}),t?o(W,{onClick:t,children:"Cancel"}):o(W,{onClick:i,children:"Reset"})]})}),o(S.Item,{children:o(_n,{listType:"picture-list",multiple:!0,beforeUpload:b,showUploadList:!1})}),o(S.Item,{children:o(Lr,{style:{width:"100%",maxHeight:250},dataSource:g,render:(f,d)=>o(Lr.Item,{children:o(Ce,{children:o(xt,{className:"card-with-icon-hover",hoverable:!0,style:{width:360},children:o("div",{children:o(ie,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:w(ie,{children:[o(Na,{shape:"square",style:{backgroundColor:"#165DFF"},children:o("img",{alt:"avatar",src:`/api/images/${f.FileSaveName}`})}),o(_a.Text,{children:f.FileName}),o("span",{className:"icon-hover",onClick:()=>{T(f)},children:o(Ta,{style:{cursor:"pointer"}})}),o("span",{className:"icon-hover",onClick:()=>{C(f)},children:o(Xt,{style:{cursor:"pointer"}})})]})})})})})},d)})})]})]},"3"),o(it,{title:"Comms",children:o(bi,{StudentID:n.StudentID,LearnerName:n.FirstName+" "+n.LastName,Email:n.Email,studentInfo:n})},"4"),o(it,{title:"Workshops",children:o(yi,{student:n})},"5")]})})})}export{fi as A,Lr as L,ui as S,_i as U,vi as a,kn as b,gi as c,yt as s};
